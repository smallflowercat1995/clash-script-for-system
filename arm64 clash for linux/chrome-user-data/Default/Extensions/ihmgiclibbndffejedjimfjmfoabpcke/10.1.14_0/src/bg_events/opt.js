pl.extend(ke.app.handlers._processEventHandlers.app.opt,{generateDropdownHtml:function(e,t){ke.app.handlers.generateDropdownHtml(),t({old_data:e})},newTab:function(e,t){chrome.tabs.create({url:e.url})},sendEmail:function(){let e=ke.isProUser?" Pro User Support":"";chrome.tabs.create({url:"mailto:support@matetranslate.com?subject=Mate for "+ke.browserName+" v"+ke.ext.util.storageUtil.getVal("ext_ver")+e},(function(e){setTimeout((function(){chrome.tabs.remove(e.id)}),500)}))},openHC:function(){chrome.tabs.create({url:"https://help.gikken.co/hc/"})},showOtherApps:function(){chrome.tabs.create({url:"https://gikken.co/mate-translate/download/?ref="+ke.browserName})},shareViaEmail:function(){chrome.tabs.create({url:"mailto:?subject=Mate Translate for "+ke.browserName+"&body=Hi, check out Mate! It's the best translator extension for "+ke.browserName+": "+ke.storeLink},(function(e){setTimeout((function(){chrome.tabs.remove(e.id)}),500)}))},downloadFile:function(e){chrome.tabs.create({url:e.url},(function(e){setTimeout((function(){chrome.tabs.remove(e.id)}),2500)}))},attactContentFile:function(e,t,a){e.src.endsWith(".css")?chrome.tabs.insertCSS(a.tab.id,{file:e.src},(function(){t()})):chrome.tabs.executeScript(a.tab.id,{file:e.src},(function(){t()}))},chainRequestBackgroundOption:function(e,t){ke.ext.util.storageUtil.chainRequestBackgroundOption(e.calls,t,!0)},closeLoginPopup:function(e,t){chrome.tabs.query({},(function(e){var t=null,a=[];e.forEach((function(e){e.url&&(e.url.indexOf("pages/public/login.html")>-1?t=e.id:e.url.indexOf("pages/public")>-1&&a.push(e.id))})),null!==t&&chrome.tabs.remove(t),a.forEach((function(e){chrome.tabs.sendMessage(e,{action:ke.processCall("app","login","done")})}))}))},revokeToken:function(e,t){$.ajax({url:"https://sync.matetranslate.com/revoke_token",type:"GET",dataType:"json",data:{token:ke.ext.util.storageUtil.getVal("account_token")},success:function(e){e.success&&t({}),ke.app.handlers._processEventHandlers.app.opt.updateUninstallUri()}})},updateUninstallUri:function(e,t){let a=ke.ext.util.storageUtil.getVal("account_token"),n=ke.ext.util.storageUtil.getVal("user_country");n.indexOf("ip address")>-1&&(n=null);let o={d:ke.PLATFORM_CODE,d_id:ke.ext.util.storageUtil.getVal("user_id"),l:navigator.language,id:ke.ext.util.storageUtil.getIntValue("install_date"),v:ke.ext.util.storageUtil.getVal("ext_ver"),c:n};$.extend(o,ke.ext.util.storageUtil.getDecodedVal("all_trans_count")),a&&(o.t=a,delete o.d);var r=("https://sync.matetranslate.com/del_dev?"+$.param(o)).substr(0,255);chrome.runtime.setUninstallURL(r)},saveSettingsPersistently:function(e,t){if(!ke.IS_SAFARI){var a={};a[e.field.toUpperCase()]=e.value,chrome.storage.local.set(a)}}});