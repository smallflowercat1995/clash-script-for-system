"use strict";var infinity={localSet(i,n){return chrome.storage.local.set({[i]:n})},async localGet(i){return(await chrome.storage.local.get(i))[i]},localClear(){return chrome.storage.local.clear()},set:function(i,n,t,e){try{var a;t?((a={})[i]=JSON.stringify(n),chrome.storage.local.set(a,function(){e&&e(n)})):localStorage[i]=JSON.stringify(n)}catch(i){}},get:function(t,i,e){try{if(!i)return JSON.parse(localStorage[t]);chrome.storage.local.get(t,function(i){var n=null;try{n=JSON.parse(i[t])}catch(i){}e&&e(n)})}catch(i){return null}},clear:function(){chrome.storage.local.clear(function(){for(var i in localStorage)localStorage.removeItem(i);window.location.href=window.location.href})}};infinity.id=chrome.runtime.id.replace("@temporary-addon",""),infinity.browser=0<navigator.userAgent.indexOf("Chrome")?"Chrome":"FireFox",infinity.settingName="infinity-settings",infinity.setting=function(i,n){if(void 0===n)return infinity.get(infinity.settingName)[i];var t=infinity.get(infinity.settingName);t[i]=n,infinity.set(infinity.settingName,t)},infinity.settingInitOrReset=function(i,n){try{var t,e=infinity.get(infinity.settingName);for(t in e||(e={},infinity.set(infinity.settingName,e)),i)!n&&(e=infinity.get(infinity.settingName)).hasOwnProperty(t)||infinity.setting(t,i[t])}catch(i){}},infinity.i18n=function(n){try{return null==n?n:chrome.i18n.getMessage(n)||n}catch(i){return n}},infinity.sendMessage=function(i,n,t){chrome.runtime.sendMessage(void 0,{name:i,data:n},void 0,t)},infinity.onMessage=function(a,r){chrome.runtime.onMessage.addListener(function(i,n,t){var e;return!0===(e=i.name==a?r&&r(i.data,n,t):e)})},infinity.broadcast=async function(i,n,t){var n=n||{},[e]=await chrome.tabs.query({active:!0});e&&e.id&&(n.tabId=e.id,infinity.sendMessage("I-broadcast-"+i,n,t))},infinity.onBroadcast=function(i,a){infinity.onMessage("I-broadcast-"+i,async function(i,n,t){var[e]=await chrome.tabs.query({active:!0});e.id!=i.tabId&&a&&a(i,n,t)})},infinity.isZh=function(){return"zh-CN"==chrome.i18n.getUILanguage()};