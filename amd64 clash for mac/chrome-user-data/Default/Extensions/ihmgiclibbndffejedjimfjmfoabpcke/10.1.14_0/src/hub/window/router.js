pl.extend(ke.app,{import:["ext.const.lang","ext.const.selectors","ext.const.storage","ext.util.langUtil","ext.util.selectorsUtil","ext.util.storageUtil","ext.tpl","ext.event","ext.audio","ext.input","ext.errorManager","ext.dom","ext.string","ext.googleApi","ext.clipboard","ext.compatibility.storage","ext.const.subscriptions","bg_events.audio","particles.lang_selectors.lsView","particles.lang_selectors.lsModel","particles.listen.lModel","particles.translate.tModel","particles.tr_input.trView","particles.tr_input.trModel","particles.scrollbars.sModel","particles.stt.sttModel","particles.3dots_button.3dotsModel","particles.3dots_button.3dotsView","ui_views.i18n","ui_views.empty_trans_states","ui_components.tooltip.modal","ui_components.dropdown.dropdown","ui_components.scrollbar.scrollbar","ui_components.pro_alert","ui_components.loading","ui_components.login","ui_components.notifications","lib.siriwave","s:ui_components.contextMenu","lib.contextMenu"],temp:{currentDetectedLang:"",valueBeforeAutocorrection:"",account_token:"",current_ad:{},prev_window_size:{w:null,h:null},pro_block_test:null},SHORTCUTS:{SEL_FROM:"ctrl+alt",SEL_TO:"ctrl+space",CLEAR:"alt+c",SWAP:"alt+s",LISTEN_RAW:"alt+q",LISTEN_TRANS:"alt+a"},flags:{isPrevTranslationMulti:!1,isCurrentTranslationMulti:!1,rawUtterancePermission:!1,transUterrancePermission:!1,isTranslating:!1,isPlayingRaw:!1,isPlayingTrans:!1,shortcutsProceeding:!1,isAutocorrected:!1,clearFadedOut:!1,forceShowKeysSettingTooltip:!1,shownTSL:!1,isNarrow:!1,shouldHideSttButtonAfterEnd:!1,pro:!1},prevInput:"",$chars_used:$(".used-chars"),$input:$(".translation-input"),$main_wrap:$("#main-wrap"),siriWave:null,$stt_button:$(".toggle-stt"),$email_layout:$(".email-layout"),$no_results:$(".no-results-cap"),callbacksInitialization:{},tts_link:("https:"===window.location.protocol?"https":"http")+"://translate.google.com/translate_tts?ie=UTF-8&q={{text}}&tl={{lang}}&total={{textparts}}&idx=0&textlen={{textlen}}&client=dict-chrome-ex&prev=input&ttsspeed={{dictation_speed}}",translation_link:"",getCountry:function(){return"com"},init:function(){ke.IS_FIREFOX&&"#unpinned_"===document.location.hash&&(document.location.hash="#unpinned",document.location.reload()),ke.IS_SAMSUNG&&($(".dark-mode-switcher").remove(),$(".right-part").css("height",$("body").height()-($(".left-part").height()+$(".top-wrap").height())+"px")),ke.ext.util.storageUtil.chainRequestBackgroundOption([{fn:"isTrueOption",args:["gdpr_consent"]},{fn:"isTrueOption",args:["seen_tour"]},{fn:"getVal",args:["account_token"]},{fn:"isTrueOption",args:["supress_signin"]},{fn:"isTrueOption",args:["chr_pro_flag"]},{fn:"getVal",args:["user_country"]},{fn:"getIntValue",args:["trial_start"]},{fn:"isTrueOption",args:["trial_started"]},{fn:"isTrueOption",args:["dark_mode"]},{fn:"isTrueOption",args:["instant"]},{fn:"isTrueOption",args:["save"]},{fn:"getVal",args:["to_lang"]}],(function(e){e[4].response;var t=e[8].response;ke.app.temp.account_token=e[2].response,ke.app.temp.toLang=e[11].response,ke.app.flags.pro=ke.isProUser,ke.app.flags.instant=e[9].response,ke.app.flags.save=e[10].response,ke.app.initInstant(),ke.app.initValues(),t&&$("body").addClass("dark-mode");let n=()=>{ke.initAnalytics((()=>{ke.app.render.organize.tryShowingProUpgradeLayout(),ke.app.render.organize.tryShowingSponsorshipBar()}))};ke.supportsOnlineAnalytics?ke.loadExternalScript(ke.analyticsScriptLink,n):ke.import("lib.ga",n)})),document.title="Mate Translate Unpinned",ke.app.render.organize.toggleUnpinLink(),ke.app.render.organize.adjustSwapWidth(),this.siriWave=new SiriWave({container:$(".stt-layout").get(0),width:ke.IS_SAMSUNG?parseInt($(".action-bar").css("width"))-43:249,height:19,speed:.1,color:"#01E9AF",amplitude:0}),ke.ext.event.listen(ke.EF,ke.EF,ke.EF),ke.app.render.organize.ctrlHistoryLinkVisibility(),this.initDropdown(),ke.particles.listen.model.ctrlRawVisibility(),ke.particles.listen.model.ctrlTransVisibility(),ke.is_touch_device()?$("#tr-scrollbar").remove():ke.particles.scrollbars.model.setupTranslationScroll(),ke.app.render.events.swap(),ke.app.render.events.toggleTextareaFocus(),ke.app.render.events.enableRawListen(),ke.app.render.events.listen(),ke.app.render.events.onHistoryLinkClick(),ke.app.render.events.onSettingsLinkClick(),ke.app.render.events.onUnpinLinkClick(),ke.app.render.events.shortcuts(),ke.app.render.events.clearInput(),ke.app.render.events.dontAutocorrect(),ke.app.render.events.countTextLength(),ke.app.render.events.showArticleUpgrade(),ke.app.render.events.showIpaUpgrade(),$(".open-phrasebook").on("click",ke.app.handlers.onPhrasebookOpen),$(".ac-close").on("click",ke.app.handlers.closeAutocorrection),$(".toggle-stt").on("click",ke.particles.stt.model.toggle),$(".lang-swap").attr("title",ke.isMac?"Cmd+Shift+S":"Ctrl+Shift+S"),$(".dark-mode-switcher").on("click",ke.app.handlers.toggleDarkMode),$(".translation-input").keyup(ke.app.handlers.adjustOriginalIpa),ke.app.render.organize.fadeInElements(),ke.app.handlers.onResize(),ke.ui_views.i18n.init(),window.onunload=ke.app.handlers.onPageUnload},initValues:function(){chrome.tabs.query({active:!0},(function(e){var t=e.shift();t&&t.id&&(t.url.indexOf(".pdf")>-1?(ke.ext.util.storageUtil.requestBackgroundOption("getIntValue",["no_pdf_shows"],(function(e){e<2&&(ke.IS_CHROME?ke.ui.notifications.show(ke.getLocale("Window_CannotTranslatePDFChrome"),3500):ke.ui.notifications.show(ke.getLocale("Window_CannotTranslatePDF").replace("{{browser}}",ke.browserName),3500),ke.ext.util.storageUtil.requestBackgroundOption("setVal",["no_pdf_shows",e+1]),"undefined"!=typeof ga&&ga("send","event","window","cannot-translate-pdf"))})),ke.app.initSavedValue(ke.app.initEmptyCap)):chrome.tabs.sendMessage(t.id,{action:ke.processCall("app","trans","getSelectedText")},(function(e){ke.app.initSavedValue(ke.app.initEmptyCap,e),"undefined"!=typeof ga&&ga("send","event","translation","window","selected-on-page")})))}))},initInstant:function(){this.flags.instant?(ke.particles.translate.model.ctrlInstantVisibility("hide"),ke.app.render.events.translateOnKeyup()):(ke.app.render.events.translateOnClick(),ke.app.render.events.translateOnKeyCombinations())},initDropdown:function(){ke.ui.dropdown.init(ke.particles.lang_selectors.model.onLangDropdownChange,[ke.particles.lang_selectors.model.onOpen,ke.EF],(function(e,t,n){ke.particles.lang_selectors.view.fillDropdown(e,e,t,ke.ext.const.lang.list,n)}),"",(function(){$(".rm-recent").unbind().bind("click",ke.particles.lang_selectors.model.removeRecentLanguage)}))},initSavedValue:function(e,t){this.flags.save?(ke.app.render.events.saveValueOnKeyup(),ke.particles.tr_input.view.displaySaveValue((function(t){e(t),ke.app.handlers.countTextLength(),ke.particles.translate.model.translateSimple(),ke.app.handlers.adjustOriginalIpa()}),t)):t?ke.particles.tr_input.view.displaySaveValue((function(t){e(t),ke.app.handlers.countTextLength(),ke.particles.translate.model.translateSimple(),ke.app.handlers.adjustOriginalIpa()}),t):(ke.app.handlers.countTextLength(),$(".translation-input").focus(),e(!0))},initEmptyCap:function(e){e&&setTimeout((function(){ke.ui_views.empty_trans_states.displayEmptiness(),ke.app.handlers.toggleRawControls(!0)}),10)},getCurrentFromLang:function(){return"auto"===ke.ext.util.langUtil.getFromLang()?ke.app.temp.currentDetectedLang:ke.ext.util.langUtil.getFromLang()}});