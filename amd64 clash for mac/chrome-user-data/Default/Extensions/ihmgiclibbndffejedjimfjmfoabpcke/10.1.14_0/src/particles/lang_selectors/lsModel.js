pl.extend(ke.particles.lang_selectors.model,{onOpen:function(e,t){ke.is_touch_device()||(1===e?ke.particles.scrollbars.model.setupFromWindowDropdownScroll(t):2===e&&ke.particles.scrollbars.model.setupToWindowDropdownScroll(t))},onFullPageLangDropdownChange:function(e,t,n,o,r){ke.ext.util.storageUtil.requestBackgroundOption("setVal",["fp_to_lang",t],(()=>{"function"==typeof r&&r()}))},onLangDropdownChange:function(e,t,n,o,r){ke.ext.util.storageUtil.chainRequestBackgroundOption([{fn:"getVal",args:["from_lang"]},{fn:"getVal",args:["to_lang"]}],(function(n){var a,l=n[0].response,s=n[1].response,i=null;1===e?(a=s,i=["from_lang",t],"content"!==ke.section&&ke.particles.translate.model.toggleControls()):2===e&&(a=l,i=["to_lang",t],"content"!==ke.section&&(ke.app.temp.toLang=t)),ke.ext.util.storageUtil.chainRequestBackgroundOption([{fn:"getArrayValLen",args:["recently_used_lang"]},{fn:"spliceBySearch",args:["recently_used_lang",a]},{fn:"addArrayVal",args:["recently_used_lang",t]},{fn:"setVal",args:i}],(function(e){!0!==o&&"content"!==ke.section&&ke.particles.translate.model.translateSimple(void 0,!0);var t=e[0].response;if(t>=8)for(var n=t;n>8;--n)ke.ext.util.storageUtil.requestBackgroundOption("popArrayVal",["recently_used_lang"]);var a=e[1].response;pl.empty(a)||ke.ext.util.storageUtil.requestBackgroundOption("addArrayVal",["recently_used_lang",a]),chrome.runtime.sendMessage({action:ke.processCall("app","opt","generateDropdownHtml")},(function(e){"content"!==ke.section&&ke.app.initDropdown()})),chrome.runtime.sendMessage({action:ke.processCall("app","option","updateContextMenu")}),"function"==typeof r&&r()}))}))},removeRecentLanguage:function(e){var t=$(this).prev().attr("val");ke.ext.util.storageUtil.requestBackgroundOption("spliceBySearch",["recently_used_lang",t]),e.stopPropagation(),$(this).parent().slideUp(ke.getAnimSpeed("slide_up"),ke.getAnimType("slide_up")),$(".lang-"+t).removeClass("hidden"),ke.ext.util.storageUtil.requestBackgroundOption("isEmptyArray",["recently_used_lang"],(function(e){e&&$(".group").slideUp(ke.getAnimSpeed("slide_up"),ke.getAnimType("slide_up"),(function(){ke.is_touch_device()||(1===ke.ui.dropdown.data.openedOptionsSerial?ke.particles.scrollbars.model.setupFromWindowDropdownScroll():2===ke.ui.dropdown.data.openedOptionsSerial&&ke.particles.scrollbars.model.setupToWindowDropdownScroll())}))}))}});