pl.extend(ke.app.handlers._processEventHandlers.app.option,{get_dark_mode_option:function(t,e){t=t.params,console.log("dark mode msg (safari):",t),t.value=!0,e({})},get_show_translit_option:function(t,e){t=t.params,console.log("show translit msg (safari):",t),t.value=!0,e({})},get_show_netflix_option:function(t,e){t=t.params,console.log("show netflix msg (safari):",t),t.value=!0,e({})},get_show_ipa_option:function(t,e){t=t.params,console.log("show ipa msg (safari):",t),t.value=!0,e({})},get_double_click_option:function(t,e){t=t.params,console.log("double click msg (safari):",t),t.value=!0,e({})},get_selection_option:function(t,e){t=t.params,console.log("selection msg (safari):",t),t.value=!1,e({})},run_tts:function(t,e){console.log("run tts msg (safari):",t),ke.app.handlers._processEventHandlers.app.audio.play(t.params,(function(t){(t=t.old_data).finished=!0,console.log("run tts callback (safari):",t),e({})}))},stop_tts:function(t,e){ke.app.handlers._processEventHandlers.app.audio.stop(t,(function(){(t=t.params).finished=!0,e({})}))},translate:function(t,e){(t=t.params).from=t.type.indexOf("zendesk")>-1?"auto":"en",t.to||(t.to="de"),ke.ext.googleApi.getTextTranslation(t.from,t.to,t.text,(function(o){var n=ke.ext.googleApi.getInternalJSONFormat(o,t.text);n[6]=t.to,t.translation=JSON.stringify(n),e({})}))},open_from_lang_picker:function(t,e){console.log("open from lang picker (safari)")},open_to_lang_picker:function(t,e){console.log("open to lang picker (safari)")},getPromotionalTableButtons:function(t,e){var o=[],n=ke.ext.util.storageUtil.getVal("promo_table");if(n){var i=JSON.parse(n);for(var a in i)i[a][0]&&a!==ke.PLATFORM_CODE&&o.push(ke.ext.tpl.compile('<a class="app-button-link" href="<%=link%>" target="_blank"><%=platform_name%></a>',{link:i[a][1],platform_name:ke.getLocale("Promo_"+ke.capitalize(a))}))}e({buttons_code:o.join(", ")})},toggleMonetization:function(t,e){ke.ext.util.storageUtil.setOptionAsBoolean("monetization",t.state),"undefined"!=typeof ga&&ga("send","event","toggle-monetization",""+t.state)},getKeyComboOptionActiveness:function(t,e){e({is_active:ke.ext.util.storageUtil.isTrueOption("key_combo")})},getDoubleClickOptionActiveness:function(t,e){e({is_active:ke.ext.util.storageUtil.isTrueOption("double_click")})},getTranslateOnSelectActiveness:function(t,e){e({is_active:ke.ext.util.storageUtil.isTrueOption("selection")})},getCurrentKeyCombo:function(t,e){e({combo:ke.ext.util.storageUtil.getVal("trans_combination"),event:t.event})},isMainKeyCombo:function(t,e){e({is_active:ke.ext.event.is(ke.ext.util.storageUtil.getVal("trans_combination"),t.event)})},isKeyCombo:function(t,e){var o,n=!1,i={from:"",to:""},a=ke.ext.util.storageUtil.getDecodedVal("add_trans_combinations");for(var l in a)if(ke.ext.event.isDown(l,ke.ext.event.IN_CODES,t.keys_down)){n=!0,o=l,i=a[l];break}n||((n|=ke.ext.event.isDown(ke.ext.util.storageUtil.getVal("trans_combination"),ke.ext.event.IN_CODES,t.keys_down))||t.dblclick)&&(o=ke.ext.util.storageUtil.getVal("trans_combination"),i.from=ke.ext.util.langUtil.getFromLang(),i.to=ke.ext.util.langUtil.getToLang()),e({is_active:!!n,combo:o,from:i.from,to:i.to})},getMainLanguagePair:function(t,e){e({from_lang:ke.ext.util.langUtil.getFromLang(),to_lang:ke.ext.util.langUtil.getToLang()})},getToLang:function(t,e){e({to_lang:ke.ext.util.langUtil.getToLang()})},ctrlContextActiveness:function(t,e){ke.ext.util.storageUtil.setVal("ctx_menu",t.active),ke.app.initContextMenu()},ctrlFullpageActiveness:function(t,e){ke.ext.util.storageUtil.setVal("fullpage",t.active),ke.app.initFullpageContextMenu()},updateContextMenu:function(t,e){ke.app.initContextMenu(),ke.app.initFullpageContextMenu()},getCurrentSelectedText:function(t,e){e({selected_text:ke.particles.context.model.currentSelectedText})},enableOption:function(t,e){ke.ext.util.storageUtil.setVal(t.option,!0)},disableOption:function(t,e){ke.ext.util.storageUtil.setVal(t.option,!1)},isMonetizationOn:function(t,e){e({active:ke.ext.util.storageUtil.isTrueOption("monetization"),is_cis:ke.ext.util.storageUtil.isTrueOption("mon_is_cis")})}});