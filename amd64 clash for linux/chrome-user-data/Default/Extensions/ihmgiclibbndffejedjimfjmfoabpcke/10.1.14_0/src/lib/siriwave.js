!function(){function t(t){t=t||{},this.phase=0,this.run=!1,this.ratio=t.ratio||window.devicePixelRatio||1,this.width=this.ratio*(t.width||320),this.width_2=this.width/2,this.width_4=this.width/4,this.height=this.ratio*(t.height||100),this.height_2=this.height/2,this.MAX=this.height_2-4,this.amplitude=void 0===t.amplitude?1:t.amplitude,this.speed=void 0===t.speed?.2:t.speed,this.frequency=void 0===t.frequency?6:t.frequency,this.color=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,i,e,h){return i+i+e+e+h+h}));var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?parseInt(i[1],16).toString()+","+parseInt(i[2],16).toString()+","+parseInt(i[3],16).toString():null}(t.color||"#fff")||"255,255,255",this.speedInterpolationSpeed=t.speedInterpolationSpeed||.005,this.amplitudeInterpolationSpeed=t.amplitudeInterpolationSpeed||.05,this._interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,t.cover?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=this.width/this.ratio+"px",this.canvas.style.height=this.height/this.ratio+"px"),this.container=t.container||document.body,this.container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),t.autostart&&this.start()}t.prototype._interpolate=function(t){increment=this[t+"InterpolationSpeed"],Math.abs(this._interpolation[t]-this[t])<=increment?this[t]=this._interpolation[t]:this._interpolation[t]>this[t]?this[t]+=increment:this[t]-=increment},t.prototype._GATF_cache={},t.prototype._globAttFunc=function(i){return null==t.prototype._GATF_cache[i]&&(t.prototype._GATF_cache[i]=Math.pow(4/(4+Math.pow(i,4)),4)),t.prototype._GATF_cache[i]},t.prototype._xpos=function(t){return this.width_2+t*this.width_4},t.prototype._ypos=function(t,i){var e=this.MAX*this.amplitude/i;return this.height_2+this._globAttFunc(t)*e*Math.sin(this.frequency*t-this.phase)},t.prototype._drawLine=function(t,i,e){this.ctx.moveTo(0,0),this.ctx.beginPath(),this.ctx.strokeStyle=i,this.ctx.lineWidth=e||1;for(var h=-2;(h+=.01)<=2;){var s=this._ypos(h,t);Math.abs(h)>=1.9&&(s=this.height_2),this.ctx.lineTo(this._xpos(h),s)}this.ctx.stroke()},t.prototype._clear=function(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"},t.prototype._draw=function(){this._drawLine(-2,"rgba("+this.color+",0.1)"),this._drawLine(-6,"rgba("+this.color+",0.2)"),this._drawLine(4,"rgba("+this.color+",0.4)"),this._drawLine(2,"rgba("+this.color+",0.6)"),this._drawLine(1,"rgba("+this.color+",1)",1.5)},t.prototype._startDrawCycle=function(){!1!==this.run&&(this._clear(),this._interpolate("amplitude"),this._interpolate("speed"),this._draw(),this.phase=(this.phase+Math.PI*this.speed)%(2*Math.PI),window.requestAnimationFrame?window.requestAnimationFrame(this._startDrawCycle.bind(this)):setTimeout(this._startDrawCycle.bind(this),20))},t.prototype.start=function(){this.phase=0,this.run=!0,this._startDrawCycle()},t.prototype.stop=function(){this.phase=0,this.run=!1},t.prototype.setSpeed=function(t,i){this._interpolation.speed=t},t.prototype.setNoise=t.prototype.setAmplitude=function(t){this._interpolation.amplitude=Math.max(Math.min(t,1),0)},"function"==typeof define&&define.amd?define((function(){return t})):window.SiriWave=t}();