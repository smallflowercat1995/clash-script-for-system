ke.import("templates.helpSelectedTooltip"),ke.import("ui_components.tooltip.simple"),ke.import("ui_components.tooltip.help"),pl.extend(ke.ui.tooltip.helpSelected,{_getSelectionParameters:function(e){return e.getRangeAt?$.extend({scrollX:window.pageXOffset,scrollY:window.pageYOffset},e.getRangeAt(0).getBoundingClientRect()):{left:e.x||e.left,top:e.y||e.top,width:e.width,height:e.height}},_createTooltip:function(e,t,i){return ke.ui.tooltip.help.setXOffset(3),ke.ui.tooltip.simple.create(ke.ext.tpl.compile(ke.templates.helpSelectedTooltip,{content:e,prefix:ke.getPrefix(),ttid:i,lang_search:ke.getLocale("Kernel_SearchPlaceholder"),l_human:ke.getLocale("Human_OrderButton"),l_original:ke.getLocale("Kernel_Original"),l_open:ke.getLocale("Kernel_OpenGt"),l_reversed:ke.getLocale("Kernel_Reverse"),l_unpin:ke.getLocale("Kernel_Unpin"),l_highlight:ke.getLocale("Kernel_Highlight"),l_loading:ke.getLocale("Kernel_Loading"),l_offline:ke.getLocale("Window_Offline"),title_highlight_button:ke.getLocale("Tooltip_Highlight"),title_open_link:ke.getLocale("Tootip_OpenLink"),title_listen_original:ke.getLocale("Tooltip_ListenOriginal"),title_show_reversed:ke.getLocale("Tooltip_ShowReversed"),title_unpin:ke.getLocale("Tooltip_Unpin"),ti_localized:ke.getLocale("There_Is_Localised_Site"),ti_localized_desc:ke.getLocale("There_Is_Localised_Site_Desc"),title_settings:ke.getLocale("Kernel_SettingsTitle"),dd_localized:ke.getLocale("Tooltip_DisableDoubleClick"),dd_localized_desc:ke.getLocale("Tooltip_DisableDoubleClickDesc"),sel_localized:ke.getLocale("Tooltip_DisableSelection"),sel_localized_desc:ke.getLocale("Tooltip_DisableSelectionDesc"),upgrade_to_pro:ke.getLocale("Window_ProBannerAds").replace(".","").replace("ã€‚",""),netflix_save:ke.getLocale("Pb_SaveButton"),netflix_continue:ke.getLocale("Login_Continue")}),i,0,0,450,325,t,!0)},_createLoadingTooltip:function(e){return ke.ui.tooltip.help.setXOffset(3),ke.ui.tooltip.simple.create('<div class="'+ke.getPrefix()+'loading">LOADING...</div>',0,0,0,450,325,e,!0)},_addToggleClasses:function(){pl(ke.ui.tooltip.simple.Id+" *").addClass("TnITTtw-t")},tooltipId:0,toggleLoadingInTooltip:function(e,t){if($("."+ke.getPrefix()+"translate-loading").fadeOut(250,(function(){$(this).remove()})),t){var i=ke.particles.translate_ctt.model.getSelection(),o=i.toString()?ke.ui.tooltip.helpSelected._getSelectionParameters(i):ke.app.handlers.lastTranslationCallArgs.selectionBB,l=$("body"),a=!1;document.location.href.indexOf("https://www.netflix.com/watch")>-1?(l=$(".watch-video--player-view"),a=!0):0===l.length&&(l=$("html"));var n,s=o.left+o.width/2+window.pageXOffset-35;n=o.top+o.height+10+70>window.innerHeight||a?o.top-10-70+window.pageYOffset:o.top+o.height+10+window.pageYOffset,l.append($('<div class="'+ke.getPrefix()+'translate-loading"></div>').addClass(ke.app.flags.dark_mode||a?ke.getPrefix()+"dark-mode":"").html('<div class="'+ke.getPrefix()+'mate-loading"></div>').css({top:n,left:s}))}},toggleOfflineInTooltip:function(e,t){t?$("."+ke.getPrefix()+"tooltip-"+e).find("."+ke.getPrefix()+"offline").css("display","flex"):$("."+ke.getPrefix()+"tooltip-"+e).find("."+ke.getPrefix()+"offline").fadeOut(250,(function(){$(this).remove()}))},fadeInTooltip:function(e,t){$("."+ke.getPrefix()+"tooltip-"+e).fadeIn(400,t)},showTooltip:function(e,t,i){var o,l=++ke.ui.tooltip.helpSelected.tooltipId,a=this._getSelectionParameters(e),n=this._createTooltip("",t,l),s=0,p=0;if(i){var r=ke.ext.dom.getPosition(i);s=r[0],p=r[1]}s+=a.left,p+=a.top,o=ke.ui.tooltip.help.getOParamsInstance(a);var g=ke.app.temp.scale;return n.css("transform","scaleX("+g+") scaleY("+g+")"),ke.ui.tooltip.help.computeTooltipPosition(n,s,p,o,g,(function(e){ke.ui.tooltip.help.applyTooltipPosition(n,e);var t=$("body"),i=ke.app.flags.dark_mode;document.location.href.indexOf("https://www.netflix.com/watch")>-1?(t=$(".watch-video--player-view"),i=!0):0===t.length&&(t=$("html")),$(n).data("ttid",l),i&&n.addClass(ke.getPrefix()+"dark-mode"),t.append(n.get()),ke.ui.tooltip.help.attachArrows(l),ke.ui.tooltip.help.applyArrowPosition(n,e,s,p,g,o),ke.ui.tooltip.helpSelected._addToggleClasses()})),l},setTooltipContents:function(e,t){$("."+ke.getPrefix()+"content-layout-"+e).html(t),ke.ui.tooltip.helpSelected._addToggleClasses()},get MAX_HEIGHT(){return 253},resizeTooltip:function(e,t,i,o){i=i||0,o=o||0;var l=$("."+ke.getPrefix()+"hsw-"+e).hasClass(ke.getPrefix()+"has-bottom-arr0w"),a=!$("."+ke.getPrefix()+"iw-"+e).hasClass(ke.getPrefix()+"hide")||$("."+ke.getPrefix()+"nf-"+e).is(":visible"),n=$("."+ke.getPrefix()+"iw-"+e).height()+2*parseInt($("."+ke.getPrefix()+"iw-"+e).css("padding"))||0,s=o+parseInt($("."+ke.getPrefix()+"content-layout-"+e).css("height"));s>ke.ui.tooltip.helpSelected.MAX_HEIGHT&&(s=ke.ui.tooltip.helpSelected.MAX_HEIGHT);var p=$("."+ke.getPrefix()+"hil-"+e).height(),r=s+11+10+parseInt($("."+ke.getPrefix()+"tooltip-"+e).find("."+ke.getPrefix()+(t?"unpinned-":"")+"utils").css("height"));$("#"+ke.getPrefix()+"trVisibleLayout-"+e).css("height",s-o),$("."+ke.getPrefix()+"hil-"+e).css("height",r),$("."+ke.getPrefix()+"tooltip-"+e).animate({top:parseInt($("."+ke.getPrefix()+"tooltip-"+e).css("top"))-(a&&l?n+i:0)+(l?p-r:0)},125)}});