!function(){const e='            <div class="ccw-upgrade-layout pro-alert">                <div class="popup combo-change-window">                    <div class="ccw-top">                        <div class="ccw-logo"></div>                    </div>                    <div class="ccw-contents">                        <div class="ccw-more"><%=message%></div>                        <div class="features">                            <div class="feature">                                <span><%=split_test_2_feature_2%></span>                            </div>                            <div class="feature">                                <span><%=split_test_2_feature_3%></span>                            </div>                            <div class="feature">                                <span><%=split_test_2_feature_4%></span>                            </div>                            <div class="feature">                                <span><%=split_test_2_feature_5%></span>                            </div>                            <div class="feature rm-1">                                <span><%=split_test_2_feature_8%></span>                            </div>                        </div>                        <div class="one-off-elements">                            <button class="mw-button high-cta ccw-upgrade"><%=upgrade_button%></button>                            <button class="mw-button wba-s ccw-restore"><%=l_restore%></button>                            <button class="mw-button wba-s ccw-close"><%=l_not_now%></button>                        </div>                        <div class="sub-elements">                            <div class="plans">                                <div class="plan monthly">                                    <div class="checkbox"></div>                                    <div class="price-layout"><span class="price"><%=price_monthly%></span></div>                                </div>                                <div class="plan annual selected">                                    <div class="checkbox"></div>                                    <div class="price-layout">                                        <div class="price"><%=price_annual%></div>                                        <div class="savings"><%=savings%></div>                                    </div>                                </div>                            </div>                            <div class="mw-button high-cta pro-subscribe">                                <div class="main-cta" id="Sub_TryFreeCTA"><%=subscribe_btn%></div>                                \x3c!--<div class="secondary-note"><%=due_after_trial%></div>--\x3e                            </div>                            <div class="secondary-sub-actions">                                <div class="sec-button more-settings"><%=more_settings%></div>                                <div class="sec-button ccw-close"><%=l_not_now%></div>                            </div>                        </div>                    </div>                </div>            </div>';pl.extend(ke.ui.pro_alert,{opened:!1,getTopPos:function(e,t){var s=t.height()+2*parseInt(t.css("padding-top"));return e.height()/2-s/2},show:function(t,s,o,a){ke.ext.util.storageUtil.chainRequestBackgroundOption([{fn:"getVal",args:["pro_inapp_price"]},{fn:"getVal",args:["account_token"]},{fn:"isTrueOption",args:["chr_pro_flag"]}],(function(i){var r=i[0].response,l=i[1].response;i[2].response;if(ke.ui.pro_alert.opened||ke.isProUser)return;ke.ui.pro_alert.opened=!0,t=t||"";let c=ke.ext.util.storageUtil.getVal("user_country"),n=ke.isEEA(c)?"eu":c in ke.ext.const.subscriptions.prices.tier_1?c:"default",p=ke.ext.util.storageUtil.getVal("sub_price_annual").replace(",",".").match(/\d+(,|.)\d+/)[0],u=ke.ext.util.storageUtil.getVal("sub_price_monthly").replace(",",".").match(/\d+(,|.)\d+/)[0],_=Math.floor(100*(1-p/(12*u)));const d=ke.ext.util.storageUtil.isTrueOption("sub_been_subscribed_once");let g=ke.getLocale("Sub_TryFreeCTA").replace('<span class="trial-days"></span>',7);d&&(g=ke.getLocale("Sub_SubscribeNow")),ke.ext.util.storageUtil.getVal("user_country")in ke.ext.const.subscriptions.CUSTOM_CHECKOUT_LINKS&&(r=ke.ext.const.subscriptions.CUSTOM_CHECKOUT_LINKS[ke.ext.util.storageUtil.getVal("user_country")].price),$("body").append(ke.ext.tpl.compile(e,{savings:ke.getLocale("Sub_Savings").replace("{{savings}}",_),more_settings:ke.getLocale("Sub_MoreInlineInfo"),_48h_notification:ke.getLocale("Sub_48hNotificationLabel"),price_annual:ke.ext.util.storageUtil.getVal("sub_price_annual")+ke.getLocale("Sub_Year"),price_monthly:ke.ext.util.storageUtil.getVal("sub_price_monthly")+ke.getLocale("Sub_Month"),subscribe_btn:g,due_after_trial:ke.getLocale("Sub_DueAfterTrial").replace('<span class="price-due"></span>','<span class="price-due">'+ke.ext.const.subscriptions.prices.tier_1[n][1]+ke.getLocale("Sub_Year")+"</span>"),message:"<b>"+t.substr(0,t.length-1)+"</b>"+ke.getLocale("Pro_ComesAlong"),upgrade_button:ke.getLocale("Window_Mw_UpgradeButton",r),l_more:ke.getLocale("Pro_UnlockMore"),l_feature1:ke.getLocale("Tour_ProFeature1"),l_feature1_tooltip:ke.getLocale("Pro_PhrasebookFeature"),l_feature7:ke.getLocale("Tour_ProFeature7"),l_feature2:ke.getLocale("Tour_ProFeature2"),l_feature2_tooltip:ke.getLocale("Pro_STTFeature"),l_feature3:ke.getLocale("Tour_ProFeature3"),l_feature3_tooltip:ke.getLocale("Pro_ShortcutsFeature"),l_feature4:ke.getLocale("Tour_ProFeature4"),l_restore:ke.getLocale("Settings_Restore"),l_not_now:ke.getLocale("Window_Mw_NotChromeNotNow"),l_feature_ipa:ke.getLocale("Pro_IPA"),l_feature_ipa_tooltip:ke.getLocale("Pro_IPA_Desc"),l_feature_articles:ke.getLocale("Pro_Articles"),l_feature_articles_tooltip:ke.getLocale("Pro_Articles_Desc"),split_test_2_feature_1:ke.getLocale("ProSplitTests_2_F1"),split_test_2_feature_2:ke.getLocale("ProSplitTests_2_F2"),split_test_2_feature_3:ke.getLocale("ProSplitTests_2_F3"),split_test_2_feature_4:ke.getLocale("ProSplitTests_2_F4"),split_test_2_feature_5:ke.getLocale("ProSplitTests_2_F5"),split_test_2_feature_6:ke.getLocale("ProSplitTests_2_F6"),split_test_2_feature_8:ke.getLocale("ProSplitTests_2_F8"),split_test_3_pitch:"<b>"+t+"</b><br>"+ke.getLocale("ProSplitTests_2_Pitch").split("<br>").pop()}));var b=$(".pro-alert"),f=b.find(".combo-change-window");o&&b.append(o),ke.isSubscriptionBased?b.find(".one-off-elements").hide():b.find(".sub-elements").hide(),t||b.find(".ccw-more").remove(),ke.IS_CHROME||b.find(".stt-feature").remove(),$("."+s+"-feature").remove(),b.css("top",$(document).scrollTop()),$("body").addClass("stop-scrolling"),"undefined"!=typeof ga&&ga("send","event","pro","shown",s),b.find(".ccw-restore").attr("data-id",s),b.find(".ccw-close").attr("data-id",s),"options"===ke.section?b.find(".more-settings").remove():b.find(".more-settings").on("click",ke.ui.pro_alert.openMoreSubscriptionInfo),b.find(".plan").on("click",ke.ui.pro_alert.changeBillingPeriod),l?b.find(".ccw-restore").remove():b.find(".ccw-restore").on("click",ke.ui.pro_alert.restore),ke.isSubscriptionBased?b.find(".pro-subscribe").attr("data-id",s).on("click",ke.ui.pro_alert.subscribe):b.find(".ccw-upgrade").attr("data-id",s).on("click",ke.ui.pro_alert.upgrade),setTimeout((()=>{for(var e=ke.ui.pro_alert.getTopPos(b,f),t=0,s=0;(e<5||f.height()>$(window).height())&&++s<=10;)0===t?b.addClass("ccw-small"):b.find(".rm-"+t).remove(),e=ke.ui.pro_alert.getTopPos(b,f),++t;f.css("top",e),a?(b.find(".ccw-close").remove(),b.css("backdrop-filter","blur(5px)"),b.css("-webkit-backdrop-filter","blur(5px)")):b.find(".ccw-close").on("click",ke.ui.pro_alert.close)}),50)}))},changeBillingPeriod:function(){$(".plan.selected").removeClass("selected"),$(this).addClass("selected"),$(".price-due").html($(".plan.selected .price").html())},openMoreSubscriptionInfo:function(){let e=$(".plan.selected").hasClass("monthly")?"monthly":"annual",t=$(this).parent().prev().attr("data-id");chrome.tabs.create({url:chrome.extension.getURL("/pages/public/options.html#sub_ref,"+e+","+t)})},upgrade:function(e,t){var s=$(this).data("id");"options"===ke.section?ke.particles.pro_block.model.upgrade():chrome.tabs.create({url:chrome.extension.getURL("/pages/public/options.html#start_purchase,"+s)}),"undefined"!=typeof ga&&ga("send","event","pro","upgrade-clicked",s)},subscribe:function(e,t){var s=$(this).data("id");if("options"===ke.section)ke.particles.pro_block.model.subscribe();else{let e=$(".plan.selected").hasClass("monthly")?"monthly":"annual";chrome.tabs.create({url:chrome.extension.getURL("/pages/public/options.html#start_purchase,"+e+","+s)})}"undefined"!=typeof ga&&ga("send","event","pro","subscribe-clicked",s)},restore:function(){ke.ui.login.show({is_restore:!0});var e=$(this).data("id");"undefined"!=typeof ga&&ga("send","event","pro","restore-clicked",e)},close:function(){$(".ccw-upgrade-layout.pro-alert").remove(),$("body").removeClass("stop-scrolling");var e=$(this).data("id");ke.ui.pro_alert.opened=!1,"undefined"!=typeof ga&&ga("send","event","pro","alert-closed",e)}})}();