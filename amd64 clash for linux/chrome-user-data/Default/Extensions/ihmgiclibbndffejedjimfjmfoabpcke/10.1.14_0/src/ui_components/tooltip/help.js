!function(t){ke.import("templates.helpTooltip"),ke.import("ui_components.tooltip.simple"),"content"!==ke.section&&ke.import("s:ui_components.tooltip.help");pl.extend(ke.ui.tooltip.help,{setXOffset:function(t){t},show:function(t,e){var o=ke.ext.dom.getPosition(e),p=o[0],i=o[1],l=ke.ui.tooltip.help.getOParamsInstance(e);ke.ui.tooltip.simple.create(ke.ext.tpl.compile(ke.templates.helpTooltip,{content:t}),-100,-100,250,200,document),setTimeout((function(){ke.ui.tooltip.help.attachArrows();var t=ke.ui.tooltip.help.computeArrowPosition(p,i,l);ke.ui.tooltip.help.computeTooltipPosition(p,i,l,(function(e){ke.ui.tooltip.help.applyArrowPosition(t),ke.ui.tooltip.help.applyTooltipPosition(e)}))}),25)},getOParamsInstance:function(t){return t.width=t.width||0,t.height=t.height||0,t.pl=t.pl||0,t.pr=t.pr||0,t.pt=t.pt||0,t.pb=t.pb||0,t},getAllParams:function(t){return pl.extend(ke.ui.tooltip.help.computeOParams(t),{left:ke.ext.dom.getPosition(t)[0],top:ke.ext.dom.getPosition(t)[1]})},computeOParams:function(t){return ke.ui.tooltip.help.getOParamsInstance({width:parseInt(pl(t).css("width")),height:parseInt(pl(t).css("height")),pl:parseInt(pl(t).css("padding-left")),pr:parseInt(pl(t).css("padding-right")),pt:parseInt(pl(t).css("padding-top")),pb:parseInt(pl(t).css("padding-bottom"))})},attachArrows:function(t){$("."+ke.getPrefix()+"tooltip-"+t).prepend($("<div>").addClass(ke.getPrefix()+"t").addClass(ke.getPrefix()+"arr0w").addClass(ke.getPrefix()+"top-arr0w").get()),$("."+ke.getPrefix()+"tooltip-"+t).append($("<div>").addClass(ke.getPrefix()+"t").addClass(ke.getPrefix()+"arr0w").addClass(ke.getPrefix()+"bottom-arr0w").get())},computeTooltipPosition:function(t,e,o,p,i,l){var r=[0,0],n=0,s=0;$(t.get()).measure((function(){n=this.width(),s=this.height();var t=e+ke.app.bodyScrollLeft,a=o+ke.app.bodyScrollTop,d=p.width+p.pl+p.pr,c=p.height+p.pt+p.pb;r[0]=t-n/2+d/2,r[1]=a-s-10*i,r[2]="bottom",r[0]-ke.app.bodyScrollLeft<1?r[0]=ke.app.bodyScrollLeft+1-n*(1-i)/2:r[0]+n>document.body.clientWidth&&(r[0]=document.body.clientWidth-n-1+n*(1-i)/2),r[1]-ke.app.bodyScrollTop<1?(r[1]=a+c+10*i,r[1]-=s*(1-i)/2,r[2]="top"):r[1]+=s*(1-i)/2,l(r)}))},applyArrowPosition:function(t,e,o,p,i,l){var r=e[0],n=e[2],s=o+ke.app.bodyScrollLeft+(l.width+l.pl+l.pr)/2-r-32*i/2;t.find("."+ke.getPrefix()+"help-selected-wrap").addClass(ke.getPrefix()+"has-"+n+"-arr0w"),t.find("."+ke.getPrefix()+n+"-arr0w").css("margin-left",s).show()},applyTooltipPosition:function(t,e){var o=$(t.get()),p=e[1]-5;o.css({left:e[0],top:p})}})}();