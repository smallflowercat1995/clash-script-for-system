pl.extend(ke.app.handlers._processEventHandlers.app.sync,{syncHistory:function(e,d){ke.particles.sync.model.syncHistory(d)},uploadWordlist:function(e,d){ke.canSync&&(e.wordlist.id=e.id,e.wordlist.timestamp=e.wordlist.created,e.wordlist.words=[],delete e.wordlist.created,delete e.wordlist.phrases_count,delete e.wordlist.server_id,delete e.wordlist.pending_removal,ke.particles.sync.model.uploadWordlists([e.wordlist],(function(e){e.error&&console.log(e.message)})))},deleteHistoryItems:function(e,d){ke.ext.cache.deleteFewById(e.ids,d)},syncPhrasebook:function(e,d){ke.particles.sync.model.syncPhrasebook(d)},uploadWord:function(e,d){ke.canSync&&ke.particles.sync.model.uploadWords([{id:e.wl_id,server_id:e.wl_server_id,last_update:e.word.added,words:[{id:e.id,added:e.word.added,json:e.word.json}]}],(function(e){e.error&&console.log(e.message)}))},deleteWordlist:function(e,d){if(ke.canSync){var s=[],o=[];e.words.forEach((function(e){s.push(e.server_id),o.push(e.id)})),ke.particles.sync.model.deleteWordlists([{r:e.r_wl,id:e.wl_server_id,_id:e.wl_id,words:s,_words:o}],(function(e){e.error&&console.log(e.message)}))}}});