Vue.filter("i18n",function(e){return infinity.i18n(e)}),infinity.sendMessage("popup","popup");var browser="FireFox"==infinity.browser;function getCleanTime(e){var t;return"Last Hour"==e?t=36e5:"Last Day"==e?t=864e5:"Last Week"==e?t=6048e5:"Last Month"==e?t=2592e6:"Everything"==e&&(t=(new Date).getTime()),t}function getCleanItemContent(e){for(var t={},a=0;a<e.length;a++)t[e[a].name]=e[a].isClean;return t}const start=async()=>{await Promise.all([infinity.localSet("ga:sr",screen.width+"x"+window.screen.height),infinity.localSet("ga:sd",screen.colorDepth+"-bits"),infinity.localSet("ga:title",document.title),infinity.localSet("ga:ready",!0)]);const oldData=localStorage.getItem("clean-master");let cleanMaster;oldData?(cleanMaster=JSON.parse(oldData),await infinity.localSet("clean-master",cleanMaster),localStorage.removeItem("clean-master")):cleanMaster=await infinity.localGet("clean-master");var cleanData={data:{clean_item:cleanMaster.clean_item,clean_time:cleanMaster.clean_time,clean_tabs:cleanMaster.clean_tabs},get(e){return this.data[e]},set(){infinity.localSet("clean-master",this.data)},setting(e,t){this.data[e]=t}},vm=new Vue({el:"#app",render:function render(){with(this)return _c("div",{staticClass:"main",on:{click:bodyClick}},[_c("div",{staticClass:"header"},[_c("img",{attrs:{src:"../lib/img/Group-2.svg",alt:""}}),_v(" "),_c("span",{staticClass:"header-span"},[_v(_s(_f("i18n")("CleanMaster")))])]),_v(" "),_c("div",{staticClass:"clean-time",class:{browser:browser}},[_c("div",{staticClass:"clean-time-title clean-time-item"},[_v(_s(_f("i18n")("timePeriod")))]),_v(" "),_c("div",{staticClass:"clean-time-item clean-content",class:{active:taggle},on:{click:function(e){return e.stopPropagation(),handletaggle(e)}}},[_c("span",{staticClass:"clean-selected"},[_v(_s(_f("i18n")(cleanTimeContent)))]),_v(" "),_c("img",{attrs:{src:"../lib/img/icon-down.svg",alt:""}})])]),_v(" "),_c("div",{staticClass:"select-time-d",class:{"select-time-d-active":taggle}},[_c("ul",[_c("li",{staticClass:"clean-time-item-change",attrs:{"data-index":"Last Hour"},on:{click:selectTime}},[_v(_s(_f("i18n")("lastHour")))]),_v(" "),_c("li",{staticClass:"clean-time-item-change",attrs:{"data-index":"Last Day"},on:{click:selectTime}},[_v(_s(_f("i18n")("lastDay")))]),_v(" "),_c("li",{staticClass:"clean-time-item-change",attrs:{"data-index":"Last Week"},on:{click:selectTime}},[_v(_s(_f("i18n")("lastWeek")))]),_v(" "),_c("li",{staticClass:"clean-time-item-change",attrs:{"data-index":"Last Month"},on:{click:selectTime}},[_v(_s(_f("i18n")("lastMonth")))]),_v(" "),_c("li",{staticClass:"clean-time-item-change",attrs:{"data-index":"Everything"},on:{click:selectTime}},[_v(_s(_f("i18n")("Everything")))])]),_v(" "),_c("img",{attrs:{src:"/lib/img/cancel.svg"},on:{click:cancelTime}})]),_v(" "),_c("div",{staticClass:"clean-img"},[_c("div",{staticClass:"clean-box",on:{click:function(e){return e.stopPropagation(),oneClean(e)}}},[_c("div",{staticClass:"clean-bg"},[_c("div",{staticClass:"clean-rotate"},[_c("div",{staticClass:"clean-rotate-item clean-rotate-item2",class:{"clean-rotate-begin2":cleaning,"clean-rotate-end2":endClean}}),_v(" "),_c("div",{staticClass:"clean-rotate-item clean-rotate-item1",class:{"clean-rotate-begin1":cleaning,"clean-rotate-end1":endClean}}),_v(" "),_c("div",{directives:[{name:"show",rawName:"v-show",value:startClean1,expression:"startClean1"}],staticClass:"clean-rotate-chen clean-rotate-chen1"},[_c("div",{class:{"clean-rotate-chen-dianji":startClean}})]),_v(" "),_c("div",{staticClass:"true-one"},[_c("div",{staticClass:"true-one-sub",class:{"true-one-begin":endClean}})]),_v(" "),_c("div",{staticClass:"true-two",class:{"true-two-begin":endClean}})])]),_v(" "),_c("div",{staticClass:"clean-text",class:{"clean-text-hide":endClean,"clean-text-ssss":startClean1}},[_c("span",[_v(_s(_f("i18n")(cleanText)))])])])]),_v(" "),_c("div",[_c("div",{staticClass:"setting",on:{click:gotoSetting}},[_c("img",{attrs:{src:"/lib/img/icon-set.svg"}}),_v(" "),_c("span",[_v(_s(_f("i18n")("AdvancedOptions")))])])]),_v(" "),_c("details",{directives:[{name:"show",rawName:"v-show",value:0<trackerCount,expression:"trackerCount > 0"}],staticClass:"tracker-box"},[_c("summary",[_v(_s(trackerTitle))]),_v(" "),_c("ol",{staticClass:"tracker-list"},_l(trackerList,function(e){return _c("li",{key:e,staticClass:"tracker-item",attrs:{title:e}},[_v(_s(e))])}))])])},data:{browser:browser,begintime:0,endClean:!1,cleaning:!1,cleanText:"cleani",taggle:!1,cleanOnclick:!0,cleanTime:cleanData.get("clean_time"),cleanTimeContent:"lastHour",cleanContent:cleanData.get("clean_item"),startClean:!1,startClean1:!0,trackerList:[],trackerTitle:infinity.i18n("trackerTitle")},computed:{trackerCount(){return this.trackerList.length}},created(){"Last Hour"==this.cleanTime?this.cleanTimeContent="lastHour":"Last Day"==this.cleanTime?this.cleanTimeContent="lastDay":"Last Week"==this.cleanTime?this.cleanTimeContent="lastWeek":"Last Month"==this.cleanTime?this.cleanTimeContent="lastMonth":"Everything"==this.cleanTime&&(this.cleanTimeContent="Everything")},async mounted(){var e=infinity.get("open_auto"),[e]=("boolean"!=typeof e&&(await infinity.localSet("open_auto",!1),e=!1),e&&this.oneClean(),await chrome.tabs.query({active:!0}));infinity.sendMessage("getTrackerList",{tabId:e.id},e=>{Array.isArray(e)&&0<e.length&&(this.trackerList=e)})},methods:{cleaningdoing(){setTimeout(()=>{this.startClean1=!1,this.startClean=!1,this.cleanOnclick=!1,this.cleaning=!0;let t=(new Date).getTime();this.cleanText="cleaningup";var e=getCleanTime(this.cleanTime),a=getCleanItemContent(this.cleanContent),e=(new Date).getTime()-e;chrome.browsingData.remove({since:e},a,()=>{var e=(new Date).getTime(),e=313-parseInt(e-t)%313;setTimeout(()=>{this.cleaning=!1,this.endClean=!0},e)})},250)},oneClean(){var e;this.cleanOnclick&&(infinity.sendMessage("clean","clean"),this.startClean=!0,cleanData.get("clean_tabs")||cleanData.setting("clean_tabs",{tabs:!1,fixed:!1}),cleanData.get("clean_tabs").tabs?(e={active:!1,currentWindow:!0},cleanData.get("clean_tabs").fixed||(e.pinned=!1),chrome.tabs.query(e,e=>{for(var t=[],a=0;a<e.length;a++)t.push(e[a].id);chrome.tabs.remove(t,()=>{this.cleaningdoing()})})):this.cleaningdoing())},handletaggle(){this.taggle=!this.taggle},bodyClick(){},cancelTime(){this.taggle=!1},changeTaggle(){this.taggle=!1},selectTime(e){this.taggle=!1,this.cleanTimeContent=e.target.innerHTML,this.cleanTime=e.target.dataset.index,cleanData.setting("clean_time",this.cleanTime),cleanData.set(),this.cleanOnclick||(this.cleanOnclick=!0,this.endClean=!1,this.cleaning=!1,this.cleanText="cleani",this.startClean1=!0)},gotoSetting(){window.open("/option/option.html","option")}}})};start();