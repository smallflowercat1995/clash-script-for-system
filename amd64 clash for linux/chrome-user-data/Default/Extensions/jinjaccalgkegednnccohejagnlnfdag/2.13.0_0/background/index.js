(e=>{function t(t){for(var s,a,i=t[0],c=t[1],l=t[2],d=0,h=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&h.push(n[a][0]),n[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);for(u&&u(t);h.length;)h.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],s=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(s=!1)}s&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var s={},n={3:0},o=[];function a(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=s,a.d=(e,t,r)=>{a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=(e,t)=>{if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(r,s,(t=>e[t]).bind(null,s));return r},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,"a",t),t},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([96,8,0]),r()})([,,,,,,(e,t,r)=>{"use strict";r.d(t,"a",()=>n),r.d(t,"c",()=>o),r.d(t,"b",()=>a);var s=r(0);const n={};function o(e){browser.notifications.create(e.id||"ViolentMonkey",{type:"basic",iconUrl:s.d,title:`${e.title} - ${Object(s.n)("extName")}`,message:e.body,isClickable:e.isClickable})}async function a(e){const t=await browser.tabs.query({});let r=0;for(const s of t)e(s),r+=1,r%20==0&&await new Promise(setTimeout)}},,,(e,t,r)=>{"use strict";r.d(t,"b",()=>p),r.d(t,"a",()=>f),r.d(t,"d",()=>m),r.d(t,"c",()=>b);var s=r(0),n=r(1),o=r(29),a=r(17),i=r(6);Object.assign(i.a,{GetAllOptions:()=>i.a.GetOptions(o.a),GetOptions:e=>n.f.call(e,([e])=>p(e)),SetOptions(e){Object(s.g)(e).forEach(e=>m(e.key,e.value))}});let c={};const l=Object(s.o)(),u=Object(s.c)(()=>{l.fire(c),c={}},100);let d={},h=browser.storage.local.get("options").then(({options:e})=>{e&&"object"==typeof e&&(d=e),Object(n.h)(d,"version")||m("version",1),h=null});function p(e,t){const r=Object(s.u)(e),a=r[0];let i=d[a];return null==i&&(i=o.a[a]),null==i&&(i=t),r.length>1?Object(n.h)(i,r.slice(1),t):i}function f(e){return Object(n.h)(o.a,e)}function m(e,t){if(h)return void h.then(()=>{m(e,t)});const r=Object(s.u)(e);r.join(".");let a=t;const i=r[0];i in o.a&&(r.length>1&&(a=Object(n.k)(p(i),r.slice(1),t)),d[i]=a,browser.storage.local.set({options:d}),((e,t)=>{const r=e.join(".");delete c[r],c[r]=t,u()})(r,t))}a.d.push(h);const b=l.hook},,,,,,(e,t,r)=>{"use strict";var s=r(32),n=r(6);const o=Object(s.a)({lifetime:3e5});Object.assign(n.a,{CacheLoad:e=>o.get(e)||null,CacheHit(e){o.hit(e.key,e.lifetime)},CachePop:e=>o.pop(e)||null}),t.a=o},,(e,t,r)=>{"use strict";r.d(t,"a",()=>s),r.d(t,"d",()=>n),r.d(t,"c",()=>o),r.d(t,"b",()=>a);const s=browser.runtime.getURL("/"),n=[],o=[];async function a(e){const t=e=>"function"==typeof e?e():e;await Promise.all(n.map(t)),await t(e),await Promise.all(o.map(t)),n.length=0,o.length=0}},(e,t,r)=>{"use strict";function s(){const e={};return{on:(t,r)=>{let s=e[t];s||(s=[],e[t]=s),s.push(r)},off:(t,r)=>{const s=e[t];if(s){const e=s.indexOf(r);e>=0&&s.splice(e,1)}},fire:(t,r)=>{const s=e[t];s&&s.forEach(e=>{e(r,t)})}}}r.d(t,"c",()=>s),r.d(t,"a",()=>n.a),r.d(t,"g",()=>n.c),r.d(t,"d",()=>o.b),r.d(t,"h",()=>o.d),r.d(t,"e",()=>o.c),r.d(t,"f",()=>a),r.d(t,"b",()=>i),r(15);var n=r(6),o=r(9);function a(e){return e.split("&").reduce((e,t)=>{const[r,s]=t.split("=").map(decodeURIComponent);return e[r]=s,e},{})}function i(e){return Object.entries(e).map(e=>e.map(encodeURIComponent).join("=")).join("&")}},function(e,t,r){"use strict";r.d(t,"k",()=>j),r.d(t,"f",()=>O),r.d(t,"e",()=>x),r.d(t,"g",()=>k),r.d(t,"i",()=>S),r.d(t,"b",()=>C),r.d(t,"h",()=>U),r.d(t,"d",()=>R),r.d(t,"a",()=>M),r.d(t,"l",()=>_),r.d(t,"j",()=>D),r.d(t,"c",()=>A);var s=r(4),n=r.n(s),o=r(0),a=r(3),i=r(1),c=r(2),l=r(8),u=new class{constructor(e){this.events={},this.allowed=e}checkType(e){if(this.allowed&&!this.allowed.includes(e))throw new Error(`Unknown event type: ${e}`)}on(e,t){this.checkType(e);const{events:r}=this;let s=r[e];return s||(s=[],r[e]=s),()=>this.off(e,t)}off(e,t){this.checkType(e);const r=this.events[e];if(r){const e=r.indexOf(t);e>=0&&r.splice(e,1)}}emit(e,t){this.checkType(e);const r=this.events[e];if(r){const s={type:e,data:t,defaultPrevented:!1,preventDefault(){s.defaultPrevented=!0}};r.some(e=>(e(s),s.defaultPrevented))}}}(["scriptEdit","scriptChanged"]),d=r(23),h=r(33),p=r(17),f=r(6),m=r(9);function b(e={}){const t={},{init:r,transform:s}=e;return function(...e){const[r]=e;return t[r]||(t[r]=n.call(this,...e))};async function n(...e){const[n,a]=e;try{const i=await Object(o.v)(n,(null==r?void 0:r(a))||a);if(await(async({headers:e},t)=>{const r=e.get("etag")||+new Date(e.get("last-modified"))||+new Date(e.get("date"));if(!r||r!==await c.a.mod.getOne(t))return r&&await c.a.mod.set(t,r),!0})(i,n)){const t=s?await s(i,...e):i.data;await this.set(n,t)}}catch(e){throw e}finally{delete t[n]}}}c.a.cache.fetch=b({init:e=>n()({},e,{responseType:"arraybuffer"}),async transform(e,t,r,s){const[n,o]=c.a.cache.makeRaw(e,!0);return await(null==s?void 0:s(t,e.data,n)),`${n},${o}`}}),c.a.require.fetch=b();const g={};function v(e){return+e||0}function w(e){return null==e?void 0:e.props.id}async function y(){const e=g.scripts.filter(({props:e},t)=>{const r=t+1,s=e.position!==r;return s&&(e.position=r),s});return g.storeInfo.position=g.scripts.length,e.length&&(await c.a.script.dump(e),Object(m.d)("lastModified",Date.now())),e.length}async function j(){g.scripts.sort((e,t)=>v(e.props.position)-v(t.props.position));const e=await y();return Object(o.w)("ScriptsUpdated",null),e}function O(e){return g.scriptMap[e]}function x({id:e,uri:t,meta:r}){let s;return e?s=O(e):(t||(t=Object(d.b)({meta:r,id:"@@should-have-name"})),s=g.scripts.find(({props:e})=>t===e.uri)),s}function k(){return g.scripts.filter(e=>!e.config.removed)}function S(e){return c.a.value.getMulti(e)}async function C(e){return await c.a.value.dump(e),e}c.a.script.onDump=e=>{g.scriptMap[e.props.id]=e},Object.assign(f.a,{CheckPosition:j,CheckRemove:M,CheckScript({name:e,namespace:t}){const r=x({meta:{name:e,namespace:t}});return r&&!r.config.removed?r.meta.version:null},async ExportZip({values:e}){const t=k(),r=t.map(w),s=await c.a.code.getMulti(r);return{items:t.map(e=>({script:e,code:s[e.props.id]})),values:e?await c.a.value.getMulti(r):void 0}},GetScriptCode:e=>c.a.code.getOne(e),MarkRemoved:({id:e,removed:t})=>_(e,{config:{removed:t?1:0},props:{lastModified:Date.now()}}),Move({id:e,offset:t}){const r=O(e),s=g.scripts.indexOf(r);return g.scripts.splice(s,1),g.scripts.splice(s+t,0,r),y()},async RemoveScript(e){const t=g.scripts.indexOf(O(e));return t>=0&&(g.scripts.splice(t,1),await Promise.all([c.a.script.remove(e),c.a.code.remove(e),c.a.value.remove(e)])),Object(o.w)("RemoveScript",e)},ParseMeta:d.e,ParseScript:D,UpdateScriptInfo:({id:e,config:t,custom:r})=>_(e,{config:t,custom:r,props:{lastModified:Date.now()}}),Vacuum:async()=>{const e={},t={},r={},s={},n=[[c.a.value,e],[c.a.cache,t],[c.a.require,r],[c.a.code,s]],a=await browser.storage.local.get();i.d.call(a,e=>{n.some(([t,r])=>{const{prefix:s}=t;return!!e.startsWith(s)&&(r[e.slice(s.length)]=-1,!0)})});const l=(e,t)=>{e[t]<0?e[t]=1:e[t]||(e[t]=2)};g.scripts.forEach(n=>{var a;const{id:c}=n.props;l(s,c),l(e,c),n.custom.pathMap||E(n);const{pathMap:u}=n.custom;n.meta.require.forEach(e=>{l(r,u[e]||e)}),(a=n.meta.resources,i.e).call(a,e=>{l(t,u[e]||e)});const{icon:d}=n.meta;if(Object(o.q)(d)){const e=u[d]||d;l(t,e)}}),n.forEach(([e,t])=>{i.c.call(t,([t,r])=>{r<0?e.remove(t):2===r&&e.fetch&&e.fetch(t)})})}}),p.d.push(async()=>{var e;const{version:t}=await browser.storage.local.get("version");t||await new Promise((e,t)=>{console.info("Upgrade database..."),(()=>{const r=indexedDB.open("Violentmonkey",1);r.onsuccess=()=>{try{(r=>{const s=r.transaction(["scripts","require","cache","values"]),n={};let o=3;const a=()=>{o-=1,o||e(browser.storage.local.set(n))},i=(e,r)=>{const n=s.objectStore(e).getAll();n.onsuccess=()=>r(n.result),n.onerror=t};i("scripts",e=>{const t={};e.forEach(e=>{const{code:r,id:s,uri:o}=e;n[`${c.a.script.prefix}${s}`]=(e=>({meta:Object(d.e)(e.code),custom:Object.assign({origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},e.custom),props:{id:e.id,uri:e.uri,position:e.position},config:{enabled:e.enabled,shouldUpdate:e.update}}))(e),n[`${c.a.code.prefix}${s}`]=r,t[o]=s}),i("values",e=>{e.forEach(({uri:e,values:r})=>{const s=t[e];s&&(n[`${c.a.value.prefix}${s}`]=r)}),a()})}),i("cache",e=>{e.forEach(({uri:e,data:t})=>{n[`${c.a.cache.prefix}${e}`]=t}),a()}),i("require",e=>{e.forEach(({uri:e,code:t})=>{n[`${c.a.require.prefix}${e}`]=t}),a()})})(r.result)}catch(e){t(e)}},r.onerror=t,r.onupgradeneeded=()=>{t()}})()}).catch(()=>{}),"2.13.0"!==t&&browser.storage.local.set({version:"2.13.0"});const r=await browser.storage.local.get(),s=[],u={id:0,position:0},h={},p={},f=[],b=[],w=function(e){b.push(this[e]||e)};return i.c.call(r,([e,t])=>{if(e.startsWith(c.a.script.prefix)){var r;const o=v(e.slice(c.a.script.prefix.length));if(!o||h[o])return;h[o]=t;const a=Object(d.b)(t);if(p[a])return;p[a]=t,t.props=n()({},t.props,{id:o,uri:a}),t.custom=n()({},Object(d.a)(),{},t.custom),u.id=Math.max(u.id,o),u.position=Math.max(u.position,v(t.props.position)),s.push(t);const{custom:{pathMap:i={}}={},meta:l={}}=t;l.grant=[...new Set(l.grant||[])],null==(r=l.require)||r.forEach(w,i),Object.values(l.resources||{}).forEach(w,i),w.call(i,l.icon)}else e.startsWith(c.a.mod.prefix)&&f.push(e.slice(c.a.mod.prefix.length))}),c.a.mod.removeMulti(f.filter(e=>!b.includes(e))),Object.assign(g,{scripts:s,storeInfo:u,scriptMap:s.reduce((e,t)=>(e[t.props.id]=t,e),{})}),"2.13.0"!==t&&l.a.isFirefox&&(null==(e=r.options)?void 0:e.defaultInjectInto)===a.f&&Object(o.b)(t,"2.12.7")<=0&&Object(m.d)("defaultInjectInto",a.d),j()});const I=["GM_getValue","GM.getValue","GM_setValue","GM.setValue","GM_listValues","GM.listValues","GM_deleteValue","GM.deleteValue"];async function U(e,t){const r=Object(h.a)(e)?[]:g.scripts.filter(r=>!r.config.removed&&(t||!r.meta.noframes)&&Object(h.b)(e,r)),s=[],n=[],o=r.filter(e=>e.config.enabled);o.forEach(e=>{var t;const{meta:r,custom:o}=e,{pathMap:a=E(e)}=o;r.require.forEach(e=>{$(s,a[e]||e)}),(t=r.resources,i.e).call(t,e=>{$(n,a[e]||e)})});const a=r.map(w),l=o.map(w),u=o.filter(e=>{var t;return null==(t=e.meta.grant)?void 0:t.some(e=>I.includes(e))}).map(w),[d,p,f,m]=await Promise.all([c.a.require.getMulti(s),c.a.cache.getMulti(n),c.a.value.getMulti(u,{}),c.a.code.getMulti(l)]);return{inject:{cache:p,ids:a,scripts:o},cacheKeys:n,code:m,enabledIds:l,reqKeys:s,require:d,values:f,withValueIds:u}}function $(e,t){e.includes(t)||e.push(t)}async function R(e){const t=e?e.map(O):g.scripts;return{scripts:t,cache:await T(t)}}function T(e){const t=[];return e.forEach(e=>{const{icon:r}=e.meta;var s;Object(o.q)(r)&&t.push((null==(s=e.custom.pathMap)?void 0:s[r])||r)}),t.length?c.a.cache.getMulti(t,void 0,c.a.cache.makeDataUri):{}}function M({force:e}={}){const t=Date.now(),r=g.scripts.filter(r=>r.config.removed&&(e||t-v(r.props.lastModified)>a.k));if(r.length){g.scripts=g.scripts.filter(e=>!e.config.removed);const e=r.map(w);c.a.script.removeMulti(e),c.a.code.removeMulti(e),c.a.value.removeMulti(e)}return r.length}async function P(e,t){const r=e.config||{};r.enabled=v(r.enabled),r.shouldUpdate=v(r.shouldUpdate);const s=e.props||{};let a;if(s.id?a=g.scriptMap[s.id]:(g.storeInfo.id+=1,s.id=g.storeInfo.id),s.uri=Object(d.b)(e),s.uuid=s.uuid||(()=>{const e=new Uint16Array(8);return window.crypto.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768,"01-2-3-4-567".replace(/\d/g,t=>(e[t]+65536).toString(16).slice(-4))})(),g.scripts.some(({props:{id:e,uri:t}={}})=>s.id!==e&&s.uri===t))throw Object(o.n)("msgNamespaceConflict");if(a){e.config=n()({},a.config,{},r),e.props=n()({},a.props,{},s);const t=g.scripts.indexOf(a);g.scripts[t]=e}else s.position?g.storeInfo.position<s.position&&(g.storeInfo.position=s.position):(g.storeInfo.position+=1,s.position=g.storeInfo.position),e.config=r,e.props=s,g.scripts.push(e);return Promise.all([c.a.script.dump(e),c.a.code.set(s.id,t)])}async function _(e,t){const r=g.scriptMap[e];if(!r)throw null;return r.props=n()({},r.props,{},t.props),r.config=n()({},r.config,{},t.config),r.custom=n()({},r.custom,{},t.custom),await c.a.script.dump(r),Object(o.w)(a.b,{where:{id:e},update:r})}async function D(e){const t=Object(d.e)(e.code);if(!t.name)throw Object(o.n)("msgInvalidScript");const r={update:{message:null==e.message?Object(o.n)("msgUpdated"):e.message||""}};let s,i=a.b;const c=await x({id:e.id,meta:t});if(c){if(e.isNew)throw Object(o.n)("msgNamespaceConflict");s=n()({},c)}else({script:s}=Object(d.d)()),i=a.a,r.isNew=!0,r.update.message=Object(o.n)("msgInstalled");return s.config=n()({},s.config,{},e.config,{removed:0}),s.custom=n()({},s.custom,{},e.custom),s.props=n()({},s.props,{lastModified:Date.now(),lastUpdated:Date.now()},e.props),s.meta=t,t.homepageURL||s.custom.homepageURL||!Object(o.q)(e.from)||(s.custom.homepageURL=e.from),Object(o.q)(e.url)&&(s.custom.lastInstallURL=e.url),e.position&&(s.props.position=+e.position),E(s,e.url),await P(s,e.code),A(s,e),Object.assign(r.update,s,e.update),r.where={id:s.props.id},Object(o.w)(i,r),u.emit("scriptChanged",r),r}function E(e,t){const{meta:r}=e,s=t||e.custom.lastInstallURL,n=s?[...r.require,...Object.values(r.resources),r.icon].reduce((e,t)=>{if(t){const r=Object(o.j)(t,s);r!==t&&(e[t]=r)}return e},{}):{};return e.custom.pathMap=n,n}async function A(e,t,r){const{custom:{pathMap:s},meta:n}=e,i=(e,n,o)=>{var a;e=s[e]||e;const i=null==t||null==(a=t[n])?void 0:a[e];return null==i||o?c.a[n].fetch(e,r,o).catch(e=>e):c.a[n].set(e,i)&&null},l=await Promise.all([...n.require.map(e=>i(e,"require")),...Object.values(n.resources).map(e=>i(e,"cache")),Object(o.q)(n.icon)&&i(n.icon,"cache",q)]);if(!t){var u;const t=(u=l.map(L),o.z).call(u,"\n");if(t){const r=Object(o.n)("msgErrorFetchingResource");return Object(o.w)(a.b,{update:{error:t,message:r},where:{id:e.props.id}}),`${r}\n${t}`}}}function q(e,t,r){return new Promise((s,n)=>{const o=URL.createObjectURL(new Blob([t],{type:r})),a=t=>{URL.revokeObjectURL(o),"load"===t.type?s():n({type:"IMAGE_ERROR",url:e})},i=new Image;i.onload=a,i.onerror=a,i.src=o})}function L(e){var t;return e&&(t=[e.status&&`HTTP${e.status}`,e.url],o.z).call(t," ")||e}},,,,(e,t,r)=>{"use strict";r.d(t,"c",()=>d),r.d(t,"e",()=>b),r.d(t,"a",()=>g),r.d(t,"d",()=>v),r.d(t,"b",()=>w);var s=r(4),n=r.n(s),o=r(0),a=r(3),i=r(1),c=r(6),l=r(9),u=r(15);function d(e){return!(/^\s*</.test(e)||e.indexOf("// ==UserScript==")<0)}Object.assign(c.a,{CacheNewScript(e){const t=Object(o.m)();return u.a.put(`new-${t}`,v(e)),t},NewScript:e=>e&&u.a.get(`new-${e}`)||v(),ParseMeta:b});const h={default:()=>[],transform:(e,t)=>(e.push(t),e)},p={default:()=>null,transform:(e,t)=>null==e?t:e},f={include:h,exclude:h,match:h,excludeMatch:h,require:h,resource:{default:()=>({}),transform:(e,t)=>{const r=t.match(/^(\w\S*)\s+(.*)/);return r&&(e[r[1]]=r[2]),e}},grant:h,noframes:{default:()=>!1,transform:()=>!0}},m={antifeature:h,compatible:h,connect:h};function b(e){const t=i.f.call(f,([,e])=>e.default());return(e.match(a.g)[1]||"").replace(/(?:^|\n)\s*\/\/\x20(@\S+)(.*)/g,(e,r,s)=>{const[n,o]=r.slice(1).split(":"),a=n.replace(/[-_](\w)/g,(e,t)=>t.toUpperCase()),i=o?`${a}:${o.toLowerCase()}`:a,c=s.trim(),l=f[i]||m[i]||p;let u=t[i];void 0===u&&(u=l.default()),t[i]=l.transform(u,c)}),t.resources=t.resource,delete t.resource,!t.homepageURL&&t.homepage&&(t.homepageURL=t.homepage),t}function g(){return{origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0}}function v(e){const t=n()({url:"*://*/*",name:"",date:(new Date).toLocaleString()},e),r=Object(l.b)("scriptTemplate").replace(/{{(\w+)}}/g,(e,r)=>{const s=t[r];return null==s?e:s});return{script:{custom:{origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},config:{enabled:1,shouldUpdate:1},meta:b(r)},code:r}}function w(e){const t=e.meta.namespace||"",r=e.meta.name||"";let s=Object(o.f)(`${t}\n${r}\n`);return t||r||(s+=e.props.id||""),s}},,,,,,,,(e,t,r)=>{"use strict";r.d(t,"c",()=>o),r.d(t,"d",()=>i),r.d(t,"a",()=>c),r.d(t,"b",()=>l);var s=r(63),n=r.n(s);function o(){}function a(e){return(...t)=>n.a&&n.a[e](...t)}function i(){return!!n.a}const c=a("getDomain"),l=(a("getSubdomain"),a("getPublicSuffix"))},,(e,t,r)=>{"use strict";r.d(t,"b",()=>b),r.d(t,"a",()=>O);var s=r(31),n=r(15),o=r(17),a=r(6),i=r(9);Object.assign(a.a,{TestBlacklist:O}),o.c.push(x),s.c(!0);const c=/(.*?):\/\/([^/]*)\/(.*)/;let l=[];Object(i.c)(e=>{"blacklist"in e&&x(e.blacklist||"")});const u=/^https?$/i;let d={},h=0;function p(e,t,r,s){return t.some(t=>{const o=`${r}:${t}`;let a=n.a.get(o);return a?n.a.hit(o):n.a.put(o,a=s(t)),a.test(e)})}function f(e,t){return p(e,t,"re",y)}function m(e,t){return p(e,t,"match",j)}function b(e,t){n.a.batch(!0);const{custom:r,meta:s}=t,o=g(r.origMatch&&s.match,r.match),a=g(r.origInclude&&s.include,r.include),i=g(r.origExclude&&s.exclude,r.exclude),c=g(r.origExcludeMatch&&s.excludeMatch,r.excludeMatch);let l=!o.length&&!a.length;return l=l||m(e,o),l=l||f(e,a),l=l&&!m(e,c),l=l&&!f(e,i),n.a.batch(!1),l}function g(...e){return e.reduce((e,t)=>t?e.concat(t):e,[])}function v(e){return e.replace(/([.?+[\]{}()|^$])/g,"\\$1").replace(/\*/g,".*?")}function w(e){return e.test.bind(e)}function y(e){if(e.length>1&&"/"===e[0]&&"/"===e[e.length-1]){let t;try{t=new RegExp(e.slice(1,-1),"i")}catch(e){}return{test:t?w(t):()=>!1}}const t=v(e.toLowerCase());if(s.d()&&e.includes(".tld/")){const e=t.replace("\\.tld/","((?:\\.[-\\w]+)+)/");return{test:t=>{const r=t.toLowerCase().match(e);if(r){const e=r[1].slice(1);if(s.b(e)===e)return!0}return!1}}}return{test:w(new RegExp(`^${t}$`,"i"))}}function j(e){let t;if("<all_urls>"===e)t=()=>!0;else{const r=e.match(c);if(r){const e=(e=>{if("*"===e)return()=>1;const t=e.toLowerCase();let r="",n=t,o="";e.startsWith("*.")&&(n=n.slice(2),r="(?:|.*?\\.)"),s.d()&&e.endsWith(".tld")&&(n=n.slice(0,-4),o="((?:\\.[-\\w]+)+)");const a=new RegExp(`^${r}${v(n)}${o}$`);return e=>{if(e=e.toLowerCase(),t===e)return 1;const r=e.match(a);if(r){const[,e]=r;if(!e)return 1;const t=e.slice(1);return s.b(t)===t}return 0}})(r[2]),n=(e=>{const t=e.indexOf("#");let r=e.indexOf("?"),s=v(e);return r>t&&(r=-1),t<0&&(s=r<0?`^${s}(?:[?#]|$)`:`^${s}(?:#|$)`),w(new RegExp(s))})(r[3]);t=t=>{const s=t.match(c);return!!r&&!!s&&((e,t)=>e===t||["*","http*"].includes(e)&&u.test(t)?1:0)(r[1],s[1])&&e(s[2])&&n(s[3])}}else t=()=>!1}return{test:t}}function O(e){let t=d[e];if(void 0===t){const n=l.find(({test:t})=>t(e));t=(null==n?void 0:n.reject)&&n.text,s=t||!1,d[r=e]=s,h+=r.length,h>1e5&&Object.keys(d).some(e=>(h-=e.length,delete d[e],h<75e3))}var r,s;return t}function x(e){n.a.batch(!0);const t=null==e?Object(i.b)("blacklist"):e;l=(Array.isArray(t)?t:(t||"").split("\n")).map(e=>{if(!(e=e.trim())||e.startsWith("#"))return null;const t=e.startsWith("@")&&e.split(/\s/,1)[0],r=t?e.slice(t.length+1).trim():e,s="@include"!==t&&"@match"!==t,{test:n}="@include"===t||"@exclude"===t&&y(r)||!t&&!r.includes("/")&&j(`*://${r}/*`)||j(r);return{reject:s,test:n,text:e}}).filter(Boolean),d={},h=0,n.a.batch(!1)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"b",()=>U),r.d(t,"c",()=>$),r.d(t,"a",()=>y);var s=r(0),n=r(3),o=r(1),a=r(18),i=r(19),c=r(6);const l={update:c.a.ParseScript,list:async()=>Object(i.g)(),get:c.a.GetScriptCode,remove:e=>c.a.MarkRemoved({id:e,removed:!0})},u=[],d=[],h={},p=Object(s.c)($,n.i);let f,m=Promise.resolve();function b({name:e,uri:t}){return e||`vm@2-${t}`}function g(e){return/^vm(?:@\d+)?-/.test(e)}function v(e){const t=e.indexOf("-"),[,r]=e.slice(0,t).split("@");if("2"===r)return e.slice(t+1);try{return decodeURIComponent(e.slice(3))}catch(t){return e.slice(3)}}function w(e,t,r){let n=t||e[0];function o(){return n}return{get:o,set:t=>(e.includes(t)?(n=t,r&&r()):console.warn("Invalid state:",t),o()),is:e=>Object(s.g)(e).includes(n)}}function y(){return u.map(e=>{const t=h[e];return{name:t.name,displayName:t.displayName,authState:t.authState.get(),syncState:t.syncState.get(),lastSync:t.config.get("meta",{}).lastSync,progress:t.progress,properties:t.properties,userConfig:t.getUserConfig()}})}function j(e){const t=function(){this.initialize()};return t.prototype=e,t.extend=O,t}function O(e){return j(Object.assign(Object.create(this.prototype),e))}const x=Object(s.c)(()=>{Object(s.w)("UpdateSync",y())}),k=j({name:"base",displayName:"BaseService",delayTime:1e3,urlPrefix:"",metaFile:"Violentmonkey",properties:{authType:"oauth"},getUserConfig:s.t,setUserConfig:s.t,initialize(){this.progress={finished:0,total:0},this.config=(e=>{function t(t){const r=Object(s.u)(t);return r.unshift("services",e),r}return{get:(e,r)=>f.get(t(e),r),set:(e,r)=>{"object"==typeof e?o.c.call(e,([e,r])=>{f.set(t(e),r)}):f.set(t(e),r)},clear:()=>{f.set(t(),{})}}})(this.name),this.authState=w(["idle","initializing","authorizing","authorized","unauthorized","error"],null,x),this.syncState=w(["idle","ready","syncing","error"],null,x),this.lastFetch=Promise.resolve(),this.startSync=this.syncFactory();const e=Object(a.c)();["on","off","fire"].forEach(t=>{this[t]=(...r)=>{e[t](...r)}})},log(...e){console.log(...e)},syncFactory(){let e,t;const r=()=>this.authState.is("authorized")&&C()===this.name,n=()=>{if(!r())return Promise.resolve();this.log("Ready to sync:",this.displayName),this.syncState.set("ready"),m=m.then(()=>new Promise(e=>{t=Object(s.c)(e,1e4),t()})).then(()=>{if(r())return this.sync();this.syncState.set("idle")}).catch(e=>{console.error(e)}).then(()=>{e=null,t=null}),e=m};return()=>(e||n(),t&&t(),e)},prepareHeaders(){this.headers={}},prepare(){return this.authState.set("initializing"),(this.initToken()?Promise.resolve(this.user()):Promise.reject({type:"unauthorized"})).then(()=>{this.authState.set("authorized")},e=>{throw e&&"unauthorized"===e.type?this.authState.set("unauthorized"):(console.error(e),this.authState.set("error")),this.syncState.set("idle"),e})},checkSync(){return this.prepare().then(()=>this.startSync())},user:s.t,acquireLock:s.t,releaseLock:s.t,handleMetaError(e){throw e},getMeta(){return this.get({name:this.metaFile}).then(e=>JSON.parse(e)).catch(e=>this.handleMetaError(e)).then(e=>({name:this.metaFile,data:e}))},initToken(){this.prepareHeaders();const e=this.config.get("token");return this.headers.Authorization=e?`Bearer ${e}`:null,!!e},loadData(e){const{progress:t}=this,{delay:r=this.delayTime}=e;let n=Promise.resolve();return r&&(n=this.lastFetch.then(e=>Object(s.s)(r-(Date.now()-e))).then(()=>Date.now()),this.lastFetch=n),t.total+=1,x(),n.then(()=>{var t;(e=Object.assign({},e)).headers=Object.assign({},this.headers,e.headers);let{url:r}=e;return r.startsWith("/")&&(r=(null!=(t=e.prefix)?t:this.urlPrefix)+r),Object(s.v)(r,e)}).then(({data:e})=>({data:e}),e=>({error:e})).then(({data:e,error:r})=>(t.finished+=1,x(),r?Promise.reject(r):e))},getLocalData:()=>l.list(),getSyncData(){return this.getMeta().then(e=>Promise.all([e,this.list(),this.getLocalData()]))},sync(){return this.progress={finished:0,total:0},this.syncState.set("syncing"),this.prepare().then(()=>this.getSyncData()).then(e=>Promise.resolve(this.acquireLock()).then(()=>e)).then(([e,t,r])=>{const n=e.data||{},c=n.info||{},u=n.timestamp||0;let d=!u||Object.keys(c).length!==t.length;const h=Date.now(),p=Object(a.d)("lastModified"),f={},m=this.config.get("meta",{}),b=!m.timestamp,g=b||u>m.timestamp;this.log("First sync:",b),this.log("Outdated:",g,"(","local:",m.timestamp,"remote:",u,")");const v=[],w=[],y=[],j=[],O=[];n.info=t.reduce((e,t)=>{f[t.uri]=t;let r=c[t.uri];return r||(r={},d=!0),e[t.uri]=r,r.modified||(r.modified=h,d=!0),e},{}),r.forEach(e=>{const{props:{uri:t,position:r,lastModified:s}}=e,o=n.info[t],a=f[t];o&&a?(b||!s||o.modified>s?v.push({local:e,remote:a,info:o}):(o.modified<s&&(w.push({local:e,remote:a}),o.modified=s,d=!0),o.position!==r&&(o.position&&p<=u?O.push({local:e,remote:a,info:o}):(o.position=r,d=!0))),delete f[t]):b||!g||s>u?w.push({local:e}):j.push({local:e})}),o.c.call(f,([e,t])=>{const r=n.info[e];g?v.push({remote:t,info:r}):y.push({remote:t})});const x=[...v.map(({remote:e,info:t})=>(this.log("Download script:",e.uri),this.get(e).then(e=>{const r=(e=>{const t={};try{const r=JSON.parse(e);t.code=r.code,2===r.version?(t.config=r.config,t.custom=r.custom,t.props=r.props):1===r.version&&r.more&&(t.custom=r.more.custom,t.config=Object(o.j)({enabled:r.more.enabled,shouldUpdate:r.more.update}),t.props=Object(o.j)({lastUpdated:r.more.lastUpdated}))}catch(r){t.code=e}return t})(e);if(!r.code)return;t.modified&&Object(o.k)(r,"props.lastModified",t.modified);const s=+t.position;return s&&(r.position=s),!Object(a.d)("syncScriptStatus")&&r.config&&delete r.config.enabled,l.update(r)}))),...w.map(({local:e,remote:t})=>(this.log("Upload script:",e.props.uri),l.get(e.props.id).then(r=>{const s=((e,t,r)=>{let s;return s={version:1,more:{custom:e.custom,enabled:e.config.enabled,update:e.config.shouldUpdate,lastUpdated:e.props.lastUpdated}},Object.assign(s,r)})(e,0,{code:r});return n.info[e.props.uri]={modified:e.props.lastModified,position:e.props.position},d=!0,this.put(Object.assign({},t,{uri:e.props.uri,name:null}),JSON.stringify(s))}))),...y.map(({remote:e})=>(this.log("Remove remote script:",e.uri),delete n.info[e.uri],d=!0,this.remove(e))),...j.map(({local:e})=>(this.log("Remove local script:",e.props.uri),l.remove(e.props.id))),...O.map(({local:e,info:t})=>{const r={};return t.position&&(r.props={position:t.position}),Object(i.l)(e.props.id,r)})];return x.push(Promise.all(x).then(()=>Object(i.k)()).then(e=>{if(e)return d=!0,l.list().then(e=>{e.forEach(e=>{const t=n.info[e.props.uri];t&&(t.position=e.props.position)})})})),x.push(Promise.all(x).then(()=>{const t=[];return d&&(n.timestamp=Date.now(),t.push(this.put(e,JSON.stringify(n)))),m.timestamp=n.timestamp,m.lastSync=Date.now(),this.config.set("meta",m),Promise.all(t)})),Promise.all(x.map(e=>e.then(s.t,e=>e||!0))).then(e=>e.filter(Boolean)).then(e=>{if(e.length)throw e})}).then(()=>{this.syncState.set("idle"),this.log("Sync finished:",this.displayName)},e=>{this.syncState.set("error"),this.log("Failed syncing:",this.displayName),this.log(e)}).then(()=>Promise.resolve(this.releaseLock()).catch(s.t))}});function S(e){d.push(e)}function C(){return f.get("current")}function I(e){return h[e||C()]}function U(){f||(f=(()=>{function e(e,t){const r=Object(s.u)(e);r.unshift("sync"),Object(a.h)(r,t)}return(()=>{let t=Object(a.d)("sync");t&&t.services||(t={services:{}},e([],t))})(),{get:(e,t)=>{const r=Object(s.u)(e);return r.unshift("sync"),Object(a.d)(r,t)},set:e}})(),d.forEach(e=>{const t=new e,{name:r}=t;u.push(r),h[r]=t})),$()}function $(){const e=I();return e&&Promise.resolve((e=>{if(!e.syncState.is(["ready","syncing"]))return e.authState.is(["idle","error"])?e.checkSync():e.authState.is("authorized")?e.startSync():void 0})(e)).then(p)}Object(a.e)(e=>{(null==e?void 0:e["sync.current"])&&U()});const R="https://violentmonkey.github.io/auth_dropbox.html",T=/[\u007f-\uffff]/g,M=e=>`\\u${(e.charCodeAt(0)+65536).toString(16).slice(1)}`;function P(e){return JSON.stringify(e).replace(T,M)}function _(e){return{name:e.name,size:e.size,uri:v(e.name)}}S(k.extend({name:"dropbox",displayName:"Dropbox",user(){return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/users/get_current_account"}).catch(e=>401===e.status?Promise.reject({type:"unauthorized"}):Promise.reject({type:"error",data:e}))},handleMetaError(e){if(409!==e.status)throw e},list(){return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/files/list_folder",body:{path:""},responseType:"json"}).then(e=>e.entries.filter(e=>"file"===e[".tag"]&&g(e.name)).map(_))},get(e){const t=b(e);return this.loadData({method:"POST",url:"https://content.dropboxapi.com/2/files/download",headers:{"Dropbox-API-Arg":P({path:`/${t}`})}})},put(e,t){const r=b(e);return this.loadData({method:"POST",url:"https://content.dropboxapi.com/2/files/upload",headers:{"Dropbox-API-Arg":P({path:`/${r}`,mode:"overwrite"}),"Content-Type":"application/octet-stream"},body:t,responseType:"json"}).then(_)},remove(e){const t=b(e);return this.loadData({method:"POST",url:"https://api.dropboxapi.com/2/files/delete",body:{path:`/${t}`},responseType:"json"}).then(_)},authorize(){const e={response_type:"token",client_id:"f0q12zup2uys5w8",redirect_uri:R},t=`https://www.dropbox.com/oauth2/authorize?${Object(a.b)(e)}`;browser.tabs.create({url:t})},authorized(e){const t=Object(a.f)(e);t.access_token&&this.config.set({uid:t.uid,token:t.access_token})},checkAuth(e){const t=`${R}#`;if(e.startsWith(t))return this.authorized(e.slice(t.length)),this.checkSync(),!0},revoke(){return this.config.set({uid:null,token:null}),this.prepare()}}));const D=JSON.parse(window.atob("eyJjbGllbnRfc2VjcmV0Ijoiajl4M09WRXRIdmhpSEtEV09HcXV5TWZaS2s5NjA0MEgifQ==")),E=Object.assign({client_id:"000000004418358A",redirect_uri:"https://violentmonkey.github.io/auth_onedrive.html"},D);function A(e){return{name:e.name,size:e.size,uri:v(e.name)}}S(k.extend({name:"onedrive",displayName:"OneDrive",urlPrefix:"https://api.onedrive.com/v1.0",refreshToken(){const e=this.config.get("refresh_token");return this.authorized({refresh_token:e,grant_type:"refresh_token"}).then(()=>this.prepare())},user(){const e=()=>this.loadData({url:"/drive",responseType:"json"});return e().catch(t=>{if(401===t.status)return this.refreshToken().then(e);throw t}).catch(e=>400===e.status&&"invalid_grant"===Object(o.h)(e,"data.error")?Promise.reject({type:"unauthorized"}):Promise.reject({type:"error",data:e}))},handleMetaError(e){if(404===e.status){var t;const r=(null==(t=e.headers.get("WWW-Authenticate"))?void 0:t[0])||"";return/^Bearer realm="OneDriveAPI"/.test(r)?this.refreshToken().then(()=>this.getMeta()):void 0}throw e},list(){return this.loadData({url:"/drive/special/approot/children",responseType:"json"}).then(e=>e.value.filter(e=>e.file&&g(e.name)).map(A))},get(e){const t=b(e);return this.loadData({url:`/drive/special/approot:/${encodeURIComponent(t)}`,responseType:"json"}).then(e=>this.loadData({url:e["@content.downloadUrl"],delay:!1}))},put(e,t){const r=b(e);return this.loadData({method:"PUT",url:`/drive/special/approot:/${encodeURIComponent(r)}:/content`,headers:{"Content-Type":"application/octet-stream"},body:t,responseType:"json"}).then(A)},remove(e){const t=b(e);return this.loadData({method:"DELETE",url:`/drive/special/approot:/${encodeURIComponent(t)}`}).catch(s.t)},authorize(){const e={client_id:E.client_id,scope:"onedrive.appfolder wl.offline_access",response_type:"code",redirect_uri:E.redirect_uri},t=`https://login.live.com/oauth20_authorize.srf?${Object(a.b)(e)}`;browser.tabs.create({url:t})},checkAuth(e){const t=`${E.redirect_uri}?code=`;if(e.startsWith(t))return this.authState.set("authorizing"),this.authorized({code:e.slice(t.length)}).then(()=>this.checkSync()),!0},revoke(){return this.config.set({uid:null,token:null,refresh_token:null}),this.prepare()},authorized(e){return this.loadData({method:"POST",url:"https://login.live.com/oauth20_token.srf",prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(a.b)(Object.assign({},{client_id:E.client_id,client_secret:E.client_secret,redirect_uri:E.redirect_uri,grant_type:"authorization_code"},e)),responseType:"json"}).then(e=>{if(!e.access_token)throw e;this.config.set({uid:e.user_id,token:e.access_token,refresh_token:e.refresh_token})})}}));const q=JSON.parse(window.atob("eyJjbGllbnRfc2VjcmV0IjoiTjBEbTZJOEV3bkJaeE1xMUpuMHN3UER0In0=")),L=Object.assign({client_id:"590447512361-05hjbhnf8ua3iha55e5pgqg15om0cpef.apps.googleusercontent.com",redirect_uri:"https://violentmonkey.github.io/auth_googledrive.html",scope:"https://www.googleapis.com/auth/drive.appdata"},q),N={status:"UNAUTHORIZED"};function z(e){return{id:e.id,name:e.name,size:+e.size,uri:v(e.name)}}S(k.extend({name:"googledrive",displayName:"Google Drive",urlPrefix:"https://www.googleapis.com/drive/v3",refreshToken(){const e=this.config.get("refresh_token");return e?this.authorized({refresh_token:e,grant_type:"refresh_token"}).then(()=>this.prepare()):Promise.reject({type:"unauthorized"})},user(){const e=()=>this.loadData({url:`https://www.googleapis.com/oauth2/v3/tokeninfo?${Object(a.b)({access_token:this.config.get("token")})}`,responseType:"json"});return e().then(e=>"online"===e.access_type?this.loadData({method:"POST",url:`https://accounts.google.com/o/oauth2/revoke?token=${this.config.get("token")}`,prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(()=>(Object(a.g)({title:"Sync Upgraded",body:"Please reauthorize access to your Google Drive to complete the upgradation."}),Promise.reject("Online access revoked."))):e.scope!==L.scope?Promise.reject(N):void 0).catch(t=>t===N||400===t.status&&"Invalid Value"===Object(o.h)(t,"data.error_description")?this.refreshToken().then(e):Promise.reject({type:"error",data:t}))},getSyncData(){return this.loadData({url:`/files?${Object(a.b)({spaces:"appDataFolder",fields:"files(id,name,size)"})}`,responseType:"json"}).then(({files:e})=>{let t;const r=e.filter(e=>!!g(e.name)||(t||e.name!==this.metaFile?this.remove(e):t=e,!1)).map(z).filter(e=>!!e.size||(this.remove(e),!1)),s=t?z(t):{},n=this.get(s).then(e=>JSON.parse(e)).catch(e=>this.handleMetaError(e)).then(e=>Object.assign({},s,{name:this.metaFile,uri:null,data:e}));return Promise.all([n,r,this.getLocalData()])})},authorize(){const e={response_type:"code",access_type:"offline",client_id:L.client_id,redirect_uri:L.redirect_uri,scope:L.scope};this.config.get("refresh_token")||(e.prompt="consent");const t=`https://accounts.google.com/o/oauth2/v2/auth?${Object(a.b)(e)}`;browser.tabs.create({url:t})},checkAuth(e){const t=`${L.redirect_uri}?code=`;if(e.startsWith(t))return this.authState.set("authorizing"),this.authorized({code:decodeURIComponent(e.split("#")[0].slice(t.length))}).then(()=>this.checkSync()),!0},revoke(){return this.config.set({token:null,refresh_token:null}),this.prepare()},authorized(e){return this.loadData({method:"POST",url:"https://www.googleapis.com/oauth2/v4/token",prefix:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(a.b)(Object.assign({},{client_id:L.client_id,client_secret:L.client_secret,redirect_uri:L.redirect_uri,grant_type:"authorization_code"},e)),responseType:"json"}).then(e=>{if(!e.access_token)throw e;{const t={token:e.access_token};e.refresh_token&&(t.refresh_token=e.refresh_token),this.config.set(t)}})},handleMetaError:s.t,list(){throw new Error("Not supported")},get({id:e}){return e?this.loadData({url:`/files/${e}?alt=media`}):Promise.reject()},put(e,t){const r=b(e),{id:n}=e,o=Object(s.m)("violentmonkey-is-great-"),a={"Content-Type":`multipart/related; boundary=${o}`},i=n?{name:r}:{name:r,parents:["appDataFolder"]},c=[`--${o}`,"Content-Type: application/json; charset=UTF-8","",JSON.stringify(i),`--${o}`,"Content-Type: text/plain","",t,`--${o}--`,""].join("\r\n"),l=n?`https://www.googleapis.com/upload/drive/v3/files/${n}?uploadType=multipart`:"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart";return this.loadData({url:l,body:c,headers:a,method:n?"PATCH":"POST"})},remove({id:e}){return this.loadData({method:"DELETE",url:`/files/${e}`})}}));var F=r(4),V=r.n(F);const H=Symbol("children");class B{constructor(e,t){this.node=e,this.nsMap=V()({},t),this.parseAttrs(),this.parseName()}static fromXML(e){const t=(new DOMParser).parseFromString(e,"application/xml");return new B(t)}parseAttrs(){const{node:e,nsMap:t}=this,r={},{attributes:s}=e;if(s)for(const s of e.attributes){const{name:e,value:n}=s;"xmlns"===e?t.$=n:e.startsWith("xmlns:")&&(t[e.slice(6)]=n),r[e]=n}this.attrs=r}parseName(){const{node:e,nsMap:t}=this;if(1===e.nodeType){let r=e.tagName,s=t.$;if(r.includes(":")){let e;if([e,r]=r.split(":"),s=t[e],!s)throw new Error(`Unknown namespace: ${e}`)}this.name=s+r}}text(){const{node:e}=this;if(e)return(e.textContent||"").trim()}children(){if(!this[H]){const{node:e,nsMap:t}=this;this[H]=[...e.children].map(e=>new B(e,t))}return this[H]}map(e){return this.children().map(e)}getCallback(e){return"string"==typeof e?(t=e,e=>e.name===t):e;var t}filter(e){return this.children().filter(this.getCallback(e))}find(e){return this.children().find(this.getCallback(e))}attr(e){return this.attrs[e]}}const W={serverUrl:"",anonymous:!1,username:"",password:""};S(k.extend({name:"webdav",displayName:"WebDAV",properties:{authType:"password",serverUrl:null},getUserConfig(){return this.userConfig||(this.userConfig=V()({},W,{},this.config.get("userConfig"))),this.userConfig},setUserConfig(e){Object.assign(this.userConfig,e),this.config.set("userConfig",this.userConfig)},initToken(){var e;this.prepareHeaders();const t=this.getUserConfig();let r=(null==(e=t.serverUrl)?void 0:e.trim())||"";r.includes("://")||(r=`http://${r}`),r.endsWith("/")||(r+="/");try{new URL(r)}catch(e){return this.properties.serverUrl=null,!1}this.properties.serverUrl=`${r}Violentmonkey/`;const{anonymous:s,username:n,password:o}=t;if(s)return!0;if(!n||!o)return!1;const a=window.btoa(`${n}:${o}`);return this.headers.Authorization=`Basic ${a}`,!0},loadData(e){return k.prototype.loadData.call(this,Object.assign({credentials:"omit"},e))},handleMetaError(e){if(![404,409].includes(e.status))throw e},list(){const{serverUrl:e}=this.properties,t=()=>this.loadData({method:"MKCOL",url:e}),r=()=>this.loadData({method:"PROPFIND",url:e,headers:{depth:"1"}}).then(e=>B.fromXML(e).children()[0].map(e=>{const t=e.find("DAV:propstat").find("DAV:prop");if("file"==(t.find("DAV:resourcetype").find("DAV:collection")?"directory":"file")){let s;const n=t.find("DAV:displayname");if(void 0!==n)s=n.text();else{const t=e.find("DAV:href").text();s=decodeURIComponent(t.substring(t.lastIndexOf("/")+1))}if(g(s)){const e=t.find("DAV:getcontentlength");return{name:(r={name:s,size:e?+e.text():0}).name,size:r.size,uri:v(r.name)}}}var r;return null}).filter(Boolean));return r().catch(e=>{if(404===e.status)return t().then(r);throw e})},get(e){const t=b(e),{serverUrl:r}=this.properties;return this.loadData({url:r+t})},put(e,t){const r=b(e),s={"Content-Type":"text/plain"},n=this.config.get("lock");n&&(s.If=`(<${n}>)`);const{serverUrl:o}=this.properties;return this.loadData({method:"PUT",url:o+r,body:t,headers:s})},remove(e){const t=b(e),r={},s=this.config.get("lock");s&&(r.If=`(<${s}>)`);const{serverUrl:n}=this.properties;return this.loadData({method:"DELETE",url:n+t,headers:r})}})),Object.assign(c.a,{SyncAuthorize:()=>{const e=I();e&&e.authorize()},SyncRevoke:()=>{const e=I();e&&e.revoke()},SyncStart:$,SyncSetConfig:e=>{const t=I();if(t)return t.setUserConfig(e),t.checkSync()}}),browser.tabs.onUpdated.addListener((e,t)=>{var r;t.url&&(r=t.url,u.some(e=>{const t=h[e];return t.checkAuth&&t.checkAuth(r)}))&&browser.tabs.remove(e)})},,,,,(e,t,r)=>{"use strict";r.d(t,"a",()=>o),r.d(t,"b",()=>i);var s=r(17),n=r(9);const o="scriptTemplate",a=`${o}Edited`;function i(e={}){const t=Object(n.a)(o);let r=e[o];r||(r=t,e[o]=r,Object(n.d)(o,r));const s=r!==t;s!==e[a]&&(e[a]=s,Object(n.d)(a,s))}s.c.push(()=>{let e=Object(n.b)(a);if(e)return;const t=Object(n.b)(o);null==e?(e="// ==UserScript==\n// @name New Script\n// @namespace Violentmonkey Scripts\n// @match {{url}}\n// @grant none\n// ==/UserScript==\n"!==t,e?Object(n.d)(a,!0):i()):t!==Object(n.a)(o)&&i()})},(e,t,r)=>{"use strict";r.d(t,"b",()=>u),r.d(t,"a",()=>d);var s=r(0),n=r(1),o=r(19),a=r(6);const i={};let c,l={};function u(e){n.c.call(i,([t,r])=>{e in r&&(delete r[e],Object(s.p)(r)&&delete i[t])})}function d(e,t,r){r.forEach(r=>{Object(n.k)(i,[r,e,t],1)})}async function h(e){const t=Object.keys(e),r=await Object(o.i)(t);t.forEach(t=>{var s;(s=e[t],n.c).call(s,([e,{last:s}])=>{Object(n.k)(r,[t,e],s||void 0)})}),await Promise.all([Object(o.b)(r),p(f(e),{partial:!0})])}async function p(e,{partial:t}={}){const r=[];for(const[n,o]of Object.entries(e))for(const[e,a]of Object.entries(o))Object(s.p)(a)||(t&&(a.partial=!0),r.push(Object(s.y)(+n,"UpdatedValues",a,{frameId:+e})),20===r.length&&await Promise.all(r.splice(0)));await Promise.all(r)}function f(e){const t={};return n.c.call(e,([e,r])=>{var s;const o=Object.entries(r);(s=i[e],n.c).call(s,([r,s])=>{n.d.call(s,s=>{o.forEach(([o,a])=>{var i;a.last!==(null==(i=a[r])?void 0:i[s])&&Object(n.k)(t,[r,s,e,o],a.last)})})})}),t}function m(e){const t={};return n.c.call(e,([e,r])=>{var s;(s=i[e],n.c).call(s,([s,o])=>{n.d.call(o,o=>{Object(n.k)(t,[s,o,e],r)})})}),t}Object.assign(a.a,{GetValueStore:async e=>(await Object(o.i)([e]))[e]||{},async SetValueStores(e){const t=e.reduce((e,{where:t,store:r})=>{var s;const n=t.id||(null==(s=Object(o.e)(t))?void 0:s.props.id);return n&&(e[n]=r),e},{});await Promise.all([Object(o.b)(t),p(m(t))])},UpdateValue({id:e,key:t,value:r=null},o){Object(n.k)(l,[e,t,"last"],r),Object(n.k)(l,[e,t,o.tab.id,o.frameId],r),(async()=>{for(;!c;){c=!0,await 0;const e=l;if(l={},await h(e),c=!1,Object(s.p)(l))break}})()}}),browser.tabs.onRemoved.addListener(u),browser.tabs.onReplaced.addListener((e,t)=>u(t))},,,,,,,,function(e,t,r){"use strict";(e=>{r.d(t,"a",()=>w);var s=r(0),n=r(8),o=r(3),a=r(1),i=r(15),c=r(17),l=r(6),u=r(9),d=r(33);Object.assign(l.a,{async GetImageData(e){const t=`GetImageData:${e}`;return i.a.get(t)||i.a.put(t,x(e,{base64:!0}).catch(s.t),1e3)}});const h=(()=>{const t=browser.browserAction,r=()=>e.chrome.runtime.lastError;return Object(a.i)(t,["setIcon","setBadgeText","setBadgeBackgroundColor","setTitle"],e=>e?(e=>(...s)=>{try{e.call(t,...s,r)}catch(r){e.call(t,...s)}})(e):s.t)})(),p={};let f,m,b,g;const v=n.a.isChrome&&{};function w(e,{tab:t,frameId:r}){const s=t.id,n=p[s]||{};n.idMap&&0!==r||(n.total=0,n.unique=0,n.idMap={},p[s]=n),n.total+=e.length,e&&(e.forEach(e=>{n.idMap[e]=1}),n.unique=Object.keys(n.idMap).length),h.setBadgeBackgroundColor({color:n.blocked?"#888":"#808",tabId:s}),y(t,n)}function y(e,t=p[e.id]){t&&h.setBadgeText({text:`${t[m]||""}`,tabId:e.id})}function j(e,t=e.pendingUrl||e.url){const r=e.id,s=o.c.test(t),n=(s?Object(d.a)(t):void 0)&&b||!s&&g||"";if(n||(p[r]||{}).blocked){h.setTitle({title:n,tabId:r});const t=n?{blocked:!0}:{};p[r]=t,O(e,t),y(e,t)}}async function O(e={},t={}){const r=(t.blocked?"b":!f&&"w")||"",s={};for(const e of[16,19,32,38]){const t=`/public/images/icon${e}${r}.png`;let n=v?v[t]:t;n||(n=await x(t),v[t]=n),s[e]=n}h.setIcon({tabId:e.id,[v?"imageData":"path"]:s})}function x(e,{base64:t}={}){return new Promise((r,s)=>{const n=new Image;n.src=e,n.onload=()=>{const{width:s,height:o}=n;if(!s)return void r(e);const a=document.createElement("canvas"),i=a.getContext("2d");a.width=s,a.height=o,i.drawImage(n,0,0,s,o),r(t?a.toDataURL():i.getImageData(0,0,s,o))},n.onerror=s})}Object(u.c)(e=>{"isApplied"in e&&(f=e.isApplied,O(),Object(l.b)(O)),"showBadge"in e&&(m=e.showBadge,Object(l.b)(y)),"blacklist"in e&&Object(l.b)(j)}),c.c.push(()=>{f=Object(u.b)("isApplied"),m=Object(u.b)("showBadge"),b=Object(s.n)("failureReasonBlacklisted"),g=Object(s.n)("failureReasonNoninjectable"),Object(l.b)(j),f||O()}),browser.tabs.onRemoved.addListener(e=>{delete p[e]}),browser.tabs.onUpdated.addListener((e,t,r)=>{const{url:s}=t;if(s&&n.a.isFirefox&&f){const t=i.a.pop(`badge:${e}${s}`);t&&w(...t)}("loading"===t.status||t.favIconUrl&&r.url.startsWith("about:"))&&j(r,s)})}).call(this,r(24))},(e,t,r)=>{"use strict";r.d(t,"a",()=>j);var s=r(4),n=r.n(s),o=r(0),a=r(1),i=r(8),c=r(15),l=r(23),u=r(17),d=r(6);const h={},p={},f={};Object.assign(d.a,{ConfirmInstall:v,GetRequestId(e=[],t){var r;const s=Object(o.m)(),n=null==(r=t.tab)?void 0:r.id;if(h[s]={id:s,tabId:n,eventsToNotify:e,xhr:new XMLHttpRequest},n){let e=f[n];e||(e=new Set,f[n]=e),e.add(s)}return s},HttpRequest(e,t){const{tab:r,frameId:s}=t;(async(e,t,r)=>{var s;const{id:l,chunkType:u,overrideMimeType:p,url:f}=e,v=h[l];if(!v||v.cb)return;v.cb=r,v.anonymous=e.anonymous,v.chunkType=u&&(t.tab.incognito||i.a.isFirefox)?"arraybuffer":u;const{xhr:w}=v,y=[];let j=i.a.isFirefox&&!e.anonymous;if(w.open(e.method||"GET",f,!0,e.user||"",e.password||""),w.setRequestHeader("VM-Verify",l),(s=e.headers,a.c).call(s,([e,t])=>{const r=e.toLowerCase();var s;s=r,m.includes(s)||s.startsWith("proxy-")||s.startsWith("sec-")?y.push({name:e,value:t}):r.startsWith("vm-")||w.setRequestHeader(e,t),"cookie"===r&&(j=!1)}),w.responseType=v.chunkType||"text",w.timeout=Math.max(0,Math.min(2147483647,e.timeout))||0,p&&w.overrideMimeType(p),j){const e=Date.now()/1e3,r=(await browser.cookies.getAll(n()({url:f,storeId:t.tab.cookieStoreId},i.a.isFirefox>=59&&{firstPartyDomain:null}))).filter(t=>t.session||t.expirationDate>e);r.length&&(v.noNativeCookie=!0,y.push({name:"cookie",value:r.map(e=>`${e.name}=${e.value};`).join(" ")}))}b.add(l,y);const O=(e=>{let t,r,s,i,l,u=Promise.resolve(),h=!1;const{id:p,chunkType:f,xhr:m}=e,b="blob"===f,v=b?()=>{const e=URL.createObjectURL(s);return c.a.put(`xhrBlob:${e}`,setTimeout(d.a.RevokeBlob,6e4,e),61e3),e}:e=>Object(o.a)(s,16e6*e,16e6),w=()=>{const t=e.responseHeaders||m.getAllResponseHeaders();if(l!==t)return l=t,{responseHeaders:l}},y=t=>{u=u.then(()=>e.cb(t))};return o=>{const c=o.type;if("loadend"===c&&g(e),!e.cb)return;if(t||(t=m.getResponseHeader("Content-Type")||"application/octet-stream"),m.response!==s){s=m.response;try{i=m.responseText,i===s&&(i=["same"])}catch(e){}f&&s&&(r=!b&&Math.ceil(s.byteLength/16e6)||1)}const l=e.eventsToNotify.includes(c),u=4===m.readyState&&l&&!h;if(y({contentType:t,id:p,chunkType:f,numChunks:r,type:c,data:l&&n()({finalUrl:m.responseURL},w(),{},Object(a.i)(m,["readyState","status","statusText"]),{},u&&{response:r?v(0):s,responseText:i},{},"loaded"in o&&Object(a.i)(o,["lengthComputable","loaded","total"]))}),u){h=!0;for(let e=1;e<r;e+=1)y({id:p,chunkIndex:e,chunk:v(e)})}}})(v);v.eventsToNotify.forEach(e=>{w[`on${e}`]=O}),w.onloadend=O,w.send(e.data?function e(t){const{cls:r,value:s}=t;if("formdata"===r){const t=new FormData;return s&&a.c.call(s,([r,s])=>{s.forEach(s=>{t.append(r,e(s))})}),t}if(["blob","file"].includes(r)){const{type:e,name:n,lastModified:o}=t,a=new Uint8Array(s.length);for(let e=0;e<s.length;e+=1)a[e]=s.charCodeAt(e);const i=[a.buffer];return"file"===r?new File(i,n,{type:e,lastModified:o}):new Blob(i,{type:e})}if(s)return JSON.parse(s)}(e.data):null)})(e,t,e=>Object(o.y)(r.id,"HttpRequested",e,{frameId:s}))},AbortRequest(e){const t=h[e];t&&(t.xhr.abort(),g(t))},RevokeBlob(e){const t=c.a.pop(`xhrBlob:${e}`);t&&(clearTimeout(t),URL.revokeObjectURL(e))}});const m=["user-agent","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],b=(()=>{const e={urls:["<all_urls>"],types:["xmlhttprequest"]},t=[browser.webRequest.OnBeforeSendHeadersOptions.EXTRA_HEADERS].filter(Boolean),r={},s=e=>"VM-Verify"===e.name,n=e=>!/^cookie2?$/i.test(e.name),c=e=>!/^set-cookie2?$/i.test(e.name),l=e=>"VM-Verify"!==e.name,u=e=>l(e)&&n(e),d={onBeforeSendHeaders:{options:["requestHeaders","blocking",...t],listener({requestHeaders:e,requestId:t}){var o;const a=(null==(o=e.find(s))?void 0:o.value)||p[t],i=a&&h[a];return a&&i&&(p[t]=a,i.coreId=t,e=(i.noNativeCookie?e.filter(n):e).concat(r[a]||[]).filter(i.anonymous?u:l)),{requestHeaders:e}}},onHeadersReceived:{options:["responseHeaders","blocking",...t],listener({responseHeaders:e,requestId:t}){const r=h[p[t]];if(r){const t=e.length;if(r.anonymous&&(e=e.filter(c)),r.responseHeaders=e.map(({name:e,value:t})=>`${e}: ${t}\r\n`).sort().join(""),e.length<t)return{responseHeaders:e}}}}};return i.a.isChrome&&TextEncoder.prototype.encodeInto&&browser.webRequest.onBeforeSendHeaders.addListener(o.t,e,["extraHeaders"]),{add(t,s){r[t]=s,a.c.call(d,([t,{listener:r,options:s}])=>{browser.webRequest[t].addListener(r,e,s)})},del(e){e in r&&(delete r[e],Object(o.p)(r)&&a.c.call(d,([e,{listener:t}])=>{browser.webRequest[e].removeListener(t)}))}}})();function g(e){var t;e.coreId&&delete p[e.coreId],delete h[e.id],b.del(e.id),null==(t=f[e.tabId])||t.delete(e.id)}async function v({code:e,from:t,url:r},{tab:s={}}){if(e||(e=(await Object(o.v)(r)).data),!Object(l.c)(e))throw Object(o.n)("msgInvalidScript");c.a.put(r,e,3e3);const a=Object(o.m)(),{id:u,incognito:d}=s;c.a.put(`confirm-${a}`,{incognito:d,url:r,from:t,tabId:u});const{windowId:h}=await browser.tabs.create(n()({url:`/confirm/index.html#${a}`,index:s.index+1||void 0,active:!!s.active},u>=0&&i.a.openerTabIdSupported&&!d&&{openerTabId:u}));h!==s.windowId&&await browser.windows.update(h,{focused:!0})}const w=new RegExp(`^https://(${["greasyfork\\.org/scripts/%/code/","openuserjs\\.org/install/%/","github\\.com/%/%/raw/%/","github\\.com/%/%/releases/%/download/","raw\\.githubusercontent\\.com(/%){3}/","gist\\.github\\.com/.*?/"].join("|")})%?\\.user\\.js([?#]|$)`.replace(/%/g,"[^/]*")),y=new RegExp(`^https://(${["(gist\\.)?github\\.com","greasyfork\\.org","openuserjs\\.org"].join("|")})/`);function j(e){const t=f[e];if(t){delete f[e];for(const e of t)d.a.AbortRequest(e)}}browser.tabs.onCreated.addListener(e=>{!/\.user\.js([?#]|$)/.test(e.pendingUrl||e.url)||i.a.isFirefox>=68&&e.url.startsWith("file:")||c.a.put(`autoclose:${e.id}`,!0,1e4)}),browser.webRequest.onBeforeRequest.addListener(e=>{const{method:t,tabId:r,url:s}=e;if("GET"===t){if(s.startsWith(u.a)){const e=+s.split("#").pop();return{redirectUrl:`${u.a}options/index.html#scripts/${e}`}}return c.a.has(`bypass:${s}`)||y.test(s)&&!w.test(s)?void 0:((async(e,t)=>{const{data:r}=await Object(o.v)(t).catch(o.t)||{};if(r&&Object(l.e)(r).name){const s=e>=0&&await browser.tabs.get(e)||{};v({code:r,url:t,from:s.url},{tab:s}),(c.a.has(`autoclose:${e}`)||s.pendingUrl&&"chrome://newtab/"===s.url)&&browser.tabs.remove(e)}else c.a.put(`bypass:${t}`,!0,1e4),e>=0&&browser.tabs.update(e,{url:t})})(r,s),{redirectUrl:"javascript:void 0"})}},{urls:["*://*/*.user.js","*://*/*.user.js?*","file://*/*.user.js","file://*/*.user.js?*",`${u.a}*.user.js`],types:["main_frame"]},["blocking"]),browser.tabs.onRemoved.addListener(e=>{j(e)})},,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",()=>S);var s=r(4),n=r.n(s),o=r(0),a=r(3),i=r(32),c=r(2),l=r(8),u=r(19),d=r(17),h=r(6),p=r(9),f=r(15);const m={};function b(e){const t=+e.name;m[t]=1,Object(o.y)(t,"PopupShown",!0),e.onDisconnect.addListener(g),delete h.a.SetPopup}function g({name:e}){delete m[e],Object(o.y)(+e,"PopupShown",!1)}async function v(){const e=(await Object(o.i)()).id;Object(o.y)(e,"PopupShown",!0),h.a.SetPopup=async(e,t)=>{Object.assign(e,await Object(u.d)(e.ids)),f.a.put("SetPopup",Object.assign({[t.frameId]:[e,t]},f.a.get("SetPopup")))}}d.c.push(()=>{browser.runtime.onConnect.addListener(b),browser.webRequest.onBeforeRequest.addListener(v,{urls:[browser.runtime.getURL(browser.runtime.getManifest().browser_action.default_popup)],types:["main_frame"]})});const w={urls:["*://*/*"],types:["main_frame","sub_frame"]},y=Object(i.a)({lifetime:6e4}),j=Object(i.a)({lifetime:6e4,async onDispose(e){const t=await e;null==t.unregister||t.unregister()}});let O;Object(p.c)(e=>{var t;O=null!=(t=e.defaultInjectInto)?t:O,"isApplied"in e&&I(e.isApplied)}),d.c.push(()=>{O=Object(p.b)("defaultInjectInto"),I(Object(p.b)("isApplied"))}),Object.assign(h.a,{InjectionFeedback(e,{tab:t,frameId:r}){e.forEach(([e,s])=>{const n=y.pop(e);s&&n&&browser.tabs.executeScript(t.id,{code:n,frameId:r,runAt:"document_start"})})}});const x={[c.a.cache.prefix]:"cacheKeys",[c.a.code.prefix]:!0,[c.a.require.prefix]:"reqKeys",[c.a.script.prefix]:!0,[c.a.value.prefix]:"withValueIds"};function k(){y.destroy(),j.destroy()}function S(e,t,r){return j.pop(C(e,!r))||R(e,t,r,!0)}function C(e,t){return t?e:`-${e}`}function I(e){const t=`${e?"add":"remove"}Listener`,r=e?w:void 0;browser.webRequest.onSendHeaders[t](U,r),browser.webRequest.onHeadersReceived[t]($,r),k()}function U({url:e,tabId:t,frameId:r}){if(!a.c.test(e))return;const s=C(e,!r);j.has(s)||j.put(s,R(e,t,r),1e4)}function $({url:e,frameId:t}){j.hit(C(e,!t),1e3)}async function R(e,t,r,s){const n=await Object(u.h)(e,!r),{inject:o}=n;return o.scripts.forEach(T,n),o.injectInto=O,o.ua=l.a,o.isFirefox=l.a.isFirefox,o.isPopupShown=m[t],!s&&browser.contentScripts&&((e,t,r)=>{const s=browser.contentScripts.register({allFrames:r,js:[{code:`${P}(${JSON.stringify(e.inject)})`}],matches:t.split("#",1),runAt:"document_start"});e.unregister=async()=>{e.unregister=null,(await s).unregister()}})(n,e,!!r),n}function T(e,t,r){var s;const{custom:i,meta:c,props:u}=e,{id:h}=u,{require:p,values:f}=this,m=this.code[h],b=Object(o.m)("VMin"),g=Object(o.l)(e),v=encodeURIComponent(g.replace(/[#&',/:;?@=]/g,M)),w=(i.injectInto||c.injectInto||O)===a.e,j=i.pathMap||{},x=null==(s=c.require)?void 0:s.map(e=>p[j[e]||e]).filter(Boolean),k=x?[].concat(...x.map(e=>[e,"\n;"])):[],S=k.length,C=[`window.${b}=function(${b}){try{with(this)((define,module,exports)=>{`,...k,S?"(()=>{":"",m,m.endsWith("\n")?"":"\n",S?"})()":"",`})()}catch(e){${b}(e)}};0`,`\n//# sourceURL=${d.a}${l.a.isFirefox?"%20":""}${v}.user.js#${h}`].join("");y.put(b,C,6e4),r[t]=n()({},e,{dataKey:b,displayName:g,code:w?"":C,metaStr:m.match(a.g)[1]||"",values:f[h]})}function M(e){return String.fromCharCode(e.charCodeAt(0)-32+65280)}browser.storage.onChanged.addListener(async e=>{const t=Object.keys(e);(await Promise.all(j.getValues())).some(e=>e.inject&&t.some(t=>{var r;const s=t.slice(0,t.indexOf(":")+1),n=x[s];return t=t.slice(s.length),!0===n||(null==(r=e[n])?void 0:r.includes(s===c.a.value.prefix?+t:t))}))&&k()});const P=`(${e=>{const{vmResolve:t}=window;t?t(e):window.vmData=e}})`},,function(e,t,r){"use strict";r.r(t),(e=>{var t=r(0),s=r(3),n=r(1),o=r(31),a=r(8),i=r(64),c=r(18),l=r(15),u=r(19),d=r(78),h=r(17),p=r(9),f=r(94),m=r(69),b=r(70),g=r(79);let v;r(112),r(113),r(114),r(23),r(115),r(33),r(116);const w={},y={autoUpdate:k,expose(e){n.c.call(e,([e,t])=>{w[decodeURIComponent(e)]=t})},isApplied(e){v=e},[m.a](e,t){Object(m.b)(t)}};Object(p.c)(e=>{n.c.call(e,(function t([r,s]){const o=y[r];if(o)o(s,e);else if(r.includes(".")){var a;(a=Object(n.k)({},r,s),n.c).call(a,t)}})),Object(t.w)("UpdateOptions",e)}),Object.assign(c.a,{async GetData(e){const t=await Object(u.d)(e);return t.sync=i.a(),t},async GetInjected(e,t){const{frameId:r,tab:s,url:n}=t;r||(Object(b.b)(s.id),Object(g.a)(s.id));const o={expose:!r&&n.startsWith("https://")&&w[n.split("/",3)[2]]};if(v){const e=await Object(f.a)(n,s.id,r);Object(b.a)(s.id,r,e.withValueIds);const i=[e.enabledIds,t];Object(d.a)(...i),a.a.isFirefox&&l.a.put(`badge:${s.id}${n}`,i),Object.assign(o,e.inject);const u=o.scripts.map(e=>!e.code&&[e.dataKey,!0]).filter(Boolean);u.length&&Promise.resolve().then(()=>c.a.InjectionFeedback(u,t))}return o},async GetTabDomain(){const e=await Object(t.i)()||{},r=(e.pendingUrl||e.url||"").match(/^https?:\/\/([^/]+)|$/)[1];return{tab:e,domain:r&&o.a(r)||r}},SetTimeout:e=>e>0&&Object(t.s)(e)});const j=["MarkRemoved","Move","ParseScript","RemoveScript","UpdateScriptInfo"],O=["CheckRemove","CheckUpdate","CheckUpdateAll"];async function x(e,t){var r;const{cmd:s}=e,n=await(null==(r=c.a[s])?void 0:r.call(c.a,e.data,t));return(j.includes(s)||n&&O.includes(s))&&i.c(),null!=n?n:null}function k(){const e=(+Object(p.b)("autoUpdate")||0)*s.h;if(!e)return;let t=Date.now()-Object(p.b)("lastUpdate");t>=e&&(x({cmd:"CheckUpdateAll"}),t=0),clearTimeout(k.timer),k.timer=setTimeout(k,Math.min(s.j,e-t))}Object(h.b)(()=>{if(e.handleCommandMessage=x,e.deepCopy=n.a,browser.runtime.onMessage.addListener(a.a.isFirefox?(...e)=>x(...e).catch(e=>{throw e instanceof Error?e:new Error(e)}):x),["expose","isApplied"].forEach(e=>y[e](Object(p.b)(e))),setTimeout(k,2e4),i.b(),Object(u.a)(),setInterval(u.a,s.h),a.a.isChrome){const t=e.chrome.declarativeContent;t.onPageChanged.getRules(["inject"],e=>{e.length||t.onPageChanged.addRules([{id:"inject",conditions:[new t.PageStateMatcher({pageUrl:{urlContains:"://"}})],actions:[new t.RequestContentScript({js:browser.runtime.getManifest().content_scripts[0].js})]}])})}})}).call(this,r(24))},,,,function(e,t,r){"use strict";var s=r(101),n=r(103);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=w,t.resolve=(e,t)=>w(e,!1,!0).resolve(t),t.resolveObject=(e,t)=>e?w(e,!1,!0).resolveObject(t):t,t.format=e=>(n.isString(e)&&(e=w(e)),e instanceof o?e.format():o.prototype.format.call(e)),t.Url=o;var a=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),d=["%","/","?",";","#"].concat(u),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(104);function w(e,t,r){if(e&&n.isObject(e)&&e instanceof o)return e;var s=new o;return s.parse(e,t,r),s}o.prototype.parse=function(e,t,r){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),i=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(i);l[0]=l[0].replace(/\\/g,"/");var w=e=l.join(i);if(w=w.trim(),!r&&1===e.split("#").length){var y=c.exec(w);if(y)return this.path=w,this.href=w,this.pathname=y[1],y[2]?(this.search=y[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var j=a.exec(w);if(j){var O=(j=j[0]).toLowerCase();this.protocol=O,w=w.substr(j.length)}if(r||j||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===w.substr(0,2);!x||j&&b[j]||(w=w.substr(2),this.slashes=!0)}if(!b[j]&&(x||j&&!g[j])){for(var k,S,C=-1,I=0;I<h.length;I++)-1!==(U=w.indexOf(h[I]))&&(-1===C||U<C)&&(C=U);for(-1!==(S=-1===C?w.lastIndexOf("@"):w.lastIndexOf("@",C))&&(k=w.slice(0,S),w=w.slice(S+1),this.auth=decodeURIComponent(k)),C=-1,I=0;I<d.length;I++){var U;-1!==(U=w.indexOf(d[I]))&&(-1===C||U<C)&&(C=U)}-1===C&&(C=w.length),this.host=w.slice(0,C),w=w.slice(C),this.parseHost(),this.hostname=this.hostname||"";var $="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!$)for(var R=this.hostname.split(/\./),T=(I=0,R.length);I<T;I++){var M=R[I];if(M&&!M.match(p)){for(var P="",_=0,D=M.length;_<D;_++)M.charCodeAt(_)>127?P+="x":P+=M[_];if(!P.match(p)){var E=R.slice(0,I),A=R.slice(I+1),q=M.match(f);q&&(E.push(q[1]),A.unshift(q[2])),A.length&&(w="/"+A.join(".")+w),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),$||(this.hostname=s.toASCII(this.hostname));var L=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+L,this.href+=this.host,$&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==w[0]&&(w="/"+w))}if(!m[O])for(I=0,T=u.length;I<T;I++){var z=u[I];if(-1!==w.indexOf(z)){var F=encodeURIComponent(z);F===z&&(F=escape(z)),w=w.split(z).join(F)}}var V=w.indexOf("#");-1!==V&&(this.hash=w.substr(V),w=w.slice(0,V));var H=w.indexOf("?");if(-1!==H?(this.search=w.substr(H),this.query=w.substr(H+1),t&&(this.query=v.parse(this.query)),w=w.slice(0,H)):t&&(this.search="",this.query={}),w&&(this.pathname=w),g[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"";var B=this.search||"";this.path=L+B}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",s=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var i=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),s&&"#"!==s.charAt(0)&&(s="#"+s),i&&"?"!==i.charAt(0)&&(i="?"+i),t+o+(r=r.replace(/[?#]/g,e=>encodeURIComponent(e)))+(i=i.replace("#","%23"))+s},o.prototype.resolve=function(e){return this.resolveObject(w(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(n.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,s=Object.keys(this),a=0;a<s.length;a++){var i=s[a];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(r[u]=e[u])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var p=d[h];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||b[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var w=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),j=y||w||r.host&&e.pathname,O=j,x=r.pathname&&r.pathname.split("/")||[],k=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(k&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),j=j&&(""===f[0]||""===x[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,x=f;else if(f.length)x||(x=[]),x.pop(),x=x.concat(f),r.search=e.search,r.query=e.query;else if(!n.isNullOrUndefined(e.search))return k&&(r.hostname=r.host=x.shift(),($=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=$.shift(),r.host=r.hostname=$.shift())),r.search=e.search,r.query=e.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=x.slice(-1)[0],C=(r.host||e.host||x.length>1)&&("."===S||".."===S)||""===S,I=0,U=x.length;U>=0;U--)"."===(S=x[U])?x.splice(U,1):".."===S?(x.splice(U,1),I++):I&&(x.splice(U,1),I--);if(!j&&!O)for(;I--;I)x.unshift("..");!j||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),C&&"/"!==x.join("/").substr(-1)&&x.push("");var $,R=""===x[0]||x[0]&&"/"===x[0].charAt(0);return k&&(r.hostname=r.host=R?"":x.length?x.shift():"",($=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=$.shift(),r.host=r.hostname=$.shift())),(j=j||r.host&&x.length)&&!R&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){((e,s)=>{var n;(o=>{t&&t.nodeType,e&&e.nodeType;var a="object"==typeof s&&s;a.global!==a&&a.window!==a&&a.self;var i,c=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(e){throw new RangeError(h[e])}function b(e,t){for(var r=e.length,s=[];r--;)s[r]=t(e[r]);return s}function g(e,t){var r=e.split("@"),s="";return r.length>1&&(s=r[0]+"@",e=r[1]),s+b((e=e.replace(d,".")).split("."),t).join(".")}function v(e){for(var t,r,s=[],n=0,o=e.length;n<o;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<o?56320==(64512&(r=e.charCodeAt(n++)))?s.push(((1023&t)<<10)+(1023&r)+65536):(s.push(t),n--):s.push(t);return s}function w(e){return b(e,e=>{var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+f(e)}).join("")}function y(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function j(e,t,r){var s=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;s+=36)e=p(e/35);return p(s+36*e/(e+38))}function O(e){var t,r,s,n,o,a,i,l,u,d,h,f=[],b=e.length,g=0,v=128,y=72;for((r=e.lastIndexOf("-"))<0&&(r=0),s=0;s<r;++s)e.charCodeAt(s)>=128&&m("not-basic"),f.push(e.charCodeAt(s));for(n=r>0?r+1:0;n<b;){for(o=g,a=1,i=36;n>=b&&m("invalid-input"),((l=(h=e.charCodeAt(n++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||l>p((c-g)/a))&&m("overflow"),g+=l*a,!(l<(u=i<=y?1:i>=y+26?26:i-y));i+=36)a>p(c/(d=36-u))&&m("overflow"),a*=d;y=j(g-o,t=f.length+1,0==o),p(g/t)>c-v&&m("overflow"),v+=p(g/t),g%=t,f.splice(g++,0,v)}return w(f)}function x(e){var t,r,s,n,o,a,i,l,u,d,h,b,g,w,O,x=[];for(b=(e=v(e)).length,t=128,r=0,o=72,a=0;a<b;++a)(h=e[a])<128&&x.push(f(h));for(s=n=x.length,n&&x.push("-");s<b;){for(i=c,a=0;a<b;++a)(h=e[a])>=t&&h<i&&(i=h);for(i-t>p((c-r)/(g=s+1))&&m("overflow"),r+=(i-t)*g,t=i,a=0;a<b;++a)if((h=e[a])<t&&++r>c&&m("overflow"),h==t){for(l=r,u=36;!(l<(d=u<=o?1:u>=o+26?26:u-o));u+=36)O=l-d,w=36-d,x.push(f(y(d+O%w,0))),l=p(O/w);x.push(f(y(l,0))),o=j(r,g,s==n),r=0,++s}++r,++t}return x.join("")}i={version:"1.4.1",ucs2:{decode:v,encode:w},decode:O,encode:x,toASCII:e=>g(e,e=>u.test(e)?"xn--"+x(e):e),toUnicode:e=>g(e,e=>l.test(e)?O(e.slice(4).toLowerCase()):e)},void 0===(n=(()=>i).call(t,r,t,e))||(e.exports=n)})()}).call(this,r(102)(e),r(24))},(e,t)=>{e.exports=e=>(e.webpackPolyfill||(e.deprecate=()=>{},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:()=>e.l}),Object.defineProperty(e,"id",{enumerable:!0,get:()=>e.i}),e.webpackPolyfill=1),e)},(e,t,r)=>{"use strict";e.exports={isString:e=>"string"==typeof e,isObject:e=>"object"==typeof e&&null!==e,isNull:e=>null===e,isNullOrUndefined:e=>null==e}},(e,t,r)=>{"use strict";t.decode=t.parse=r(105),t.encode=t.stringify=r(106)},(e,t,r)=>{"use strict";function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=(e,t,r,o)=>{t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var i=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,h,p,f,m=e[u].replace(i,"%20"),b=m.indexOf(r);b>=0?(d=m.substr(0,b),h=m.substr(b+1)):(d=m,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),s(a,p)?n(a[p])?a[p].push(f):a[p]=[a[p],f]:a[p]=f}return a};var n=Array.isArray||(e=>"[object Array]"===Object.prototype.toString.call(e))},(e,t,r)=>{"use strict";var s=e=>{switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=(e,t,r,i)=>(t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),a=>{var i=encodeURIComponent(s(a))+r;return n(e[a])?o(e[a],e=>i+encodeURIComponent(s(e))).join(t):i+encodeURIComponent(s(e[a]))}).join(t):i?encodeURIComponent(s(i))+r+encodeURIComponent(s(e)):"");var n=Array.isArray||(e=>"[object Array]"===Object.prototype.toString.call(e));function o(e,t){if(e.map)return e.map(t);for(var r=[],s=0;s<e.length;s++)r.push(t(e[s],s));return r}var a=Object.keys||(e=>{var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t})},,,,,,(e,t,r)=>{"use strict";var s=r(6);const n=document.createElement("textarea");let o;Object.assign(s.a,{SetClipboard(e){o=e,n.focus(),document.execCommand("copy",!1,null)}}),document.body.appendChild(n),document.addEventListener("copy",e=>{e.preventDefault();const{type:t,data:r}=o;e.clipboardData.setData(t||"text/plain",r)})},(e,t,r)=>{"use strict";var s=r(17),n=r(6);s.c.push(()=>{browser.commands.onCommand.addListener(e=>{if("newScript"===e)n.a.OpenEditor();else{const t="settings"===e?`#${e}`:"";n.a.TabOpen({url:`/options/index.html${t}`})}})})},(e,t,r)=>{"use strict";var s=r(0),n=r(8),o=r(6);const a={};Object.assign(o.a,{async Notification(e,t,r){const o=await browser.notifications.create({type:"basic",title:e.title||(n.a.isFirefox?Object(s.n)("extName"):""),message:e.text,iconUrl:e.image||s.d});return a[o]=(null==r?void 0:r.onClick)||t.tab.id,o},RemoveNotification:e=>browser.notifications.clear(e)}),browser.notifications.onClicked.addListener(e=>{const t=a[e];t>=0&&Object(s.y)(t,"NotificationClick",e),"function"==typeof t&&t()}),browser.notifications.onClosed.addListener(e=>{const t=a[e];delete a[e],t>=0&&Object(s.y)(t,"NotificationClose",e)})},(e,t,r)=>{"use strict";var s=r(4),n=r.n(s),o=r(0),a=r(8),i=r(17),c=r(6),l=r(9);const u={};Object.assign(c.a,{async OpenEditor(e){if(!e){const{tab:t,domain:r}=await c.a.GetTabDomain(),s=r&&c.a.CacheNewScript({url:(t.pendingUrl||t.url).split(/[#?]/)[0],name:`- ${r}`});e=`_new${s?`/${s}`:""}`}return c.a.TabOpen({url:`/options/index.html#scripts/${e}`,maybeInWindow:!0})},async TabOpen({url:e,active:t=!0,container:r,insert:s=!0,maybeInWindow:c=!1,pinned:d},h={}){const p=h.tab||await Object(o.i)()||{},f=h.url,m=!f||f.startsWith(i.a),{incognito:b,windowId:g}=p;let v=p.cookieStoreId;var w;v&&!b&&(v=(0===(w=m?0:r)?"firefox-default":w>0&&`firefox-container-${w}`)||v),v&&(v={cookieStoreId:v}),e.startsWith("blob:")||(m?/^\w+:/.test(e)||(e=browser.runtime.getURL(e)):e=Object(o.j)(e,f));const y=!b||a.a.isFirefox||!/^(chrome[-\w]*):/.test(e);let j;if(c&&browser.windows&&Object(l.b)("editorWindow")){const r=n()({url:e,incognito:y&&b},Object(l.b)("editorWindowSimple")&&{type:"popup"},{},a.a.isChrome&&{focused:!!t},{},v),s=Object(l.b)("editorWindowPos"),i=s&&"top"in s;j=(await browser.windows.create(n()({},r,{},s)).catch(i&&o.t)||i&&await browser.windows.create(r)).tabs[0]}const{id:O,windowId:x}=j||await browser.tabs.create(n()({url:e,active:!!t,pinned:!!d},v,{},y&&n()({windowId:g},s&&{index:p.index+1},{},a.a.openerTabIdSupported&&{openerTabId:p.id})));return t&&x!==g&&await browser.windows.update(x,{focused:!0}),u[O]=p.id,{id:O}},TabClose({id:e}={},t){var r;const s=e||(null==t||null==(r=t.tab)?void 0:r.id);s>=0&&browser.tabs.remove(s)},TabFocus(e,t){browser.tabs.update(t.tab.id,{active:!0}).catch(o.t)}}),a.a.ready.then(()=>{Object.defineProperties(a.a,{openerTabIdSupported:{value:a.a.isChrome||a.a.isFirefox>=57&&"android"!==a.a.os}})}),browser.tabs.onRemoved.addListener(e=>{const t=u[e];t>=0&&(Object(o.y)(t,"TabClosed",e),delete u[e])})},(e,t,r)=>{"use strict";var s=r(4),n=r.n(s),o=r(0),a=r(3),i=r(8),c=r(19),l=r(23),u=r(9),d=r(6);async function h(e){const t=[],r=await Promise.all(e.map(e=>((e,t)=>{const{id:r}=e.props;return p[r]||(p[r]=(async(e,t)=>{const{id:r}=e.props;let s,n,a;try{const{update:l}=await Object(c.j)({id:r,code:await m(e),update:{checking:!1}});return s=Object(o.n)("msgScriptUpdated",[Object(o.l)(l)]),a={headers:f},!0}catch(e){n=e.error,a=!e.error&&!e.checking&&{}}finally{var i;a&&(n=await Object(c.c)(e,null,a)),(e=>{var t;const r=Object(u.b)("notifyUpdates");return Object(u.b)("notifyUpdatesGlobal")?r:null!=(t=e.config.notifyUpdates)?t:r})(e)&&(s||n)&&t.push({script:e,text:(i=[s,n],o.z).call(i,"\n")}),delete p[r]}})(e,t))})(e,t)));return 1===t.length?b(t[0]):t.length&&b({text:t.map(e=>e.text).join("\n"),onClick:browser.runtime.openOptionsPage}),r}Object.assign(d.a,{async CheckUpdate(e){const t=Object(c.f)(e);return(await h([t]))[0]},async CheckUpdateAll(){Object(u.d)("lastUpdate",Date.now());const e=Object(c.g)().filter(e=>e.config.shouldUpdate);return(await h(e)).includes(!0)}});const p={},f={"Cache-Control":"no-cache, no-store, must-revalidate"};async function m({props:{id:e},meta:t,custom:r}){const s=r.downloadURL||t.downloadURL||r.lastInstallURL,i=r.updateURL||t.updateURL||s;if(!i)throw!1;let c;const u={},d={update:u,where:{id:e}};h(Object(o.n)("msgCheckingForUpdate"));try{const{data:e}=await Object(o.v)(i,{headers:n()({},f,{Accept:"text/x-userscript-meta,*/*"})}),{version:r}=Object(l.e)(e);if(Object(o.b)(t.version,r)>=0)h(Object(o.n)("msgNoUpdate"),{checking:!1});else{if(s)return h(Object(o.n)("msgUpdating")),c=Object(o.n)("msgErrorFetchingScript"),(await Object(o.v)(s,{headers:f})).data;h(Object(o.n)("msgNewVersion"),{checking:!1})}}catch(e){h(c||Object(o.n)("msgErrorFetchingUpdateInfo"),{error:e})}throw u;function h(e,{error:t,checking:r=!t}={}){Object.assign(u,{message:e,checking:r,error:t?`${Object(o.n)("genericError")} ${t.status}, ${t.url}`:null}),Object(o.w)(a.b,d)}}function b({script:e,text:t,onClick:r=(()=>d.a.OpenEditor(e.props.id))}){d.a.Notification({text:t,title:i.a.isFirefox?`${Object(o.n)("titleScriptUpdated")} - ${Object(o.n)("extName")}`:""},void 0,{onClick:r})}}]);