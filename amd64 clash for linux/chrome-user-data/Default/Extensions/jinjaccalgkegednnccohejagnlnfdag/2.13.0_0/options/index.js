(t=>{function e(e){for(var a,i,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);for(d&&d(e);p.length;)p.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},n={6:0},o=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=(t,e,s)=>{i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=(t,e)=>{if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,(e=>t[e]).bind(null,a));return s},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,"a",e),e},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.p="/";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([68,1,2,0]),s()})([,,,,,,,,,,,(t,e,s)=>{"use strict";s.d(e,"a",()=>o);var a=s(25),n=s(67);const o={route:a.c,HiDPI:n.a}},,,,,,,,,,,,,,,,,,,function(t,e,s){"use strict";var a=s(25),n=s(1),o=s(7),i=s(29),r=s(26),l={props:{name:String,json:Boolean,disabled:Boolean,hasSave:{type:Boolean,default:!0},hasReset:Boolean},data:()=>({value:null,savedValue:null}),computed:{parsedData(){let t,e;if(this.json)try{t=JSON.parse(this.value)}catch(t){e=t.message||t}else t=this.value;return{value:t,error:e}},isDirty(){return!Object(n.b)(this.parsedData.value,this.savedValue||"")},canSave(){return!this.parsedData.error&&this.isDirty},canReset(){return!Object(n.b)(this.parsedData.value,this.defaultValue||"")}},watch:{isDirty(t){this.toggleUnloadSentry(t)}},created(){const t=this.json?t=>JSON.stringify(t,null,"  "):t=>Array.isArray(t)?t.join("\n"):t||"";this.revoke=Object(r.a)(this.name,e=>{this.savedValue=e,this.value=t(e)}),this.defaultValue=Object(n.h)(i.a,this.name),this.toggleUnloadSentry=Object(a.a)(()=>{this.value=t(this.savedValue)})},beforeDestroy(){this.revoke(),this.toggleUnloadSentry(!1)},methods:{onChange(){!this.hasSave&&this.canSave&&this.onSave()},onSave(){o.a.set(this.name,this.parsedData.value),this.$emit("save")},onReset(){o.a.set(this.name,this.defaultValue)}}},c=s(5),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"monospace-font",class:{"has-error":t.parsedData.error},attrs:{spellcheck:"false",disabled:t.disabled,title:t.parsedData.error},domProps:{value:t.value},on:{change:t.onChange,input:e=>{e.target.composing||(t.value=e.target.value)}}}),t._v(" "),t.hasSave?s("button",{attrs:{disabled:t.disabled||!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.onSave}}):t._e(),t.hasReset?s("button",{attrs:{disabled:t.disabled||!t.canReset},domProps:{textContent:t._s(t.i18n("buttonReset"))},on:{click:t.onReset}}):t._e(),t._t("default")],2)}),[],!1,null,null,null);e.a=d.exports},,,,,,(t,e,s)=>{"use strict";var a=s(22);const n=Object(a.j)(async()=>{await("/public/lib/zip-no-worker.min.js",new Promise((t,e)=>{const s=document.createElement("script");s.src="/public/lib/zip-no-worker.min.js",s.onload=t,s.onerror=e,document.body.append(s)}));const{zip:t}=window,e=["/public/lib/z-worker.js"];return t.configure({workerScripts:{deflate:e,inflate:e}}),t});e.a=n},,,function(t,e,s){"use strict";(function(t){var a=s(80),n=s.n(a),o=s(20),i=s.n(o),r=s(0),l=s(7),c=s(16),d=s(27),u=s(26),p=s(21),h=s(62),m=s(1),v=s(25),g=s(2),b=s(10),f=s(8),y=s(68),x=s(81),C=s(93),w=s(11);const S={sort:{exec:{title:Object(r.n)("filterExecutionOrder")},alpha:{title:Object(r.n)("filterAlphabeticalOrder"),compare:({$cache:{lowerName:t}},{$cache:{lowerName:e}})=>t<e?-1:t>e},update:{title:Object(r.n)("filterLastUpdateOrder"),compare:({props:{lastUpdated:t}},{props:{lastUpdated:e}})=>(+e||0)-(+t||0)}}},k={value:null,title:null},_={searchScope:null,showEnabledFirst:null,viewSingleColumn:null,viewTable:null,get sort(){return k},set sort(t){const e=S.sort[t];e?(k.value=t,k.title=e.title):_.sort=Object.keys(S.sort)[0]}};m.d.call(_,t=>{Object(u.a)(`filters.${t}`,e=>{_[t]=e})});let j=0,O=[],P=[];const $="tabScripts && !inputFocus",U=`${$} && selectedScript && !showRecycle`,R=`${$} && selectedScript && showRecycle`,E=`${$} && selectedScript && showHotkeys`,A={edit:"e",toggle:"space",update:"r",restore:"r",remove:"x"},I=(t,e)=>e.map(([e,s,a])=>b.c.register(e,t,{condition:s,caseSensitive:a}));e.a={components:{ScriptItem:x.a,Edit:C.a,Tooltip:i(),SettingCheck:d.a,LocaleGroup:h.a,Dropdown:n(),Icon:p.a},data:()=>({scriptHotkeys:A,store:w.a,filterOptions:S,filters:_,filteredScripts:[],focusedIndex:-1,script:null,search:null,searchError:null,modal:null,menuNewActive:!1,showRecycle:!1,sortedScripts:[],removing:!1,showHotkeys:!1,canRenderScripts:!w.a.route.paths[1],batchRender:{limit:j},numColumns:null}),watch:{search:"scheduleSearch","filters.sort.value":"updateLater","filters.showEnabledFirst":"updateLater","filters.viewSingleColumn":"adjustScriptWidth","filters.viewTable":"adjustScriptWidth",showRecycle(t){b.c.setContext("showRecycle",t),this.focusedIndex=-1,this.onUpdate()},scripts:"refreshUI","store.route.paths.1":"onHashChange",selectedScript(t){b.c.setContext("selectedScript",t)},showHotkeys(t){b.c.setContext("showHotkeys",t)}},computed:{currentSortCompare(){var t;return null==(t=S.sort[_.sort.value])?void 0:t.compare},selectedScript(){return this.filteredScripts[this.focusedIndex]},message(){if(this.store.loading)return null;const t=this.sortedScripts;return(this.search?t.find(t=>!1!==t.$cache.show):t.length)?null:Object(r.n)("labelNoSearchScripts")},scripts(){return this.store.scripts.filter(t=>!t.config.removed)},searchNeedsCodeIds(){return this.search&&["code","all"].includes(_.searchScope)&&this.store.scripts.filter(t=>null==t.$cache.code).map(t=>t.props.id)},trash(){return this.store.scripts.filter(t=>t.config.removed)}},methods:{async refreshUI(){const t=this.searchNeedsCodeIds;(null==t?void 0:t.length)&&await this.getCodeFromStorage(t),this.onUpdate(),this.onHashChange()},onUpdate(){const t=[...this.showRecycle?this.trash:this.scripts],e=this.search?this.performSearch(t):t.length,s=this.currentSortCompare;var a;s&&t.sort((a=s,_.showEnabledFirst?(t,e)=>e.config.enabled-t.config.enabled||a(t,e):a)),this.sortedScripts=t,this.filteredScripts=this.search?t.filter(({$cache:t})=>t.show):t,this.selectScript(this.focusedIndex),!j||e<j?this.renderScripts():this.debouncedRender()},updateLater(){this.debouncedUpdate()},updateAll(){Object(r.w)("CheckUpdateAll")},async installFromURL(){try{var t;let e=await Object(c.b)(Object(r.n)("hintInputURL"),{input:"",ok:{type:"submit"}});e=null==(t=e)?void 0:t.trim(),e&&(e.includes("://")||(e=`https://${e}`),new URL(e)&&await Object(r.w)("ConfirmInstall",{url:e}))}catch(t){t&&Object(c.c)({text:t})}},moveScript(t){t.from!==t.to&&Object(r.w)("Move",{id:this.scripts[t.from].props.id,offset:t.to-t.from}).then(()=>{const{scripts:e}=this,s=Math.min(t.from,t.to),a=Math.max(t.from,t.to),n=[e.slice(0,s),e.slice(s,a+1),e.slice(a+1)];s===t.to?n[1].unshift(n[1].pop()):n[1].push(n[1].shift()),this.store.scripts=[...n.flat(),...this.trash]})},onOrderChange(t){l.a.set("filters.sort",t.target.value)},onScopeChange(t){this.search&&this.scheduleSearch(),l.a.set("filters.searchScope",t.target.value)},onStateChange(t){this.menuNewActive=t},editScript(t){const e=["scripts",t].filter(Boolean).join("/");t||e!==Object(v.b)().pathname?Object(v.d)(e):window.history.back()},onHashChange(){const[t,e]=this.store.route.paths;if("_new"===e)this.script={};else{const s=e&&+e||null;this.script=s&&this.scripts.find(t=>t.props.id===s),this.script||(this.canRenderScripts||(Object(y.loadData)(),this.canRenderScripts=!0),this.debouncedRender(),e&&Object(v.d)(t,!0))}},async renderScripts(){if(!this.canRenderScripts)return;const{length:t}=this.sortedScripts;let e=9;const s={limit:e};this.batchRender=s;const a=performance.now();for(;e<t&&s===this.batchRender;){if(j&&this.search)for(let s=0;s<j&&e<t;e+=1)s+=this.sortedScripts[e].$cache.show?1:0;else e+=j||1;s.limit=e,await new Promise(t=>this.$nextTick(t)),!j&&performance.now()-a>=100&&(j=2*e),j&&e<t&&await Object(r.s)()}},performSearch(t){let e,s=0;const[,a=this.search.replace(/[.+^*$?|\\()[\]{}]/g,"\\$&"),n="i"]=this.search.match(/^\/(.+?)\/(\w*)$|$/),o=_.searchScope,i="name"===o||"all"===o,r="code"===o||"all"===o;try{e=a&&new RegExp(a,n),t.forEach(({$cache:t})=>{t.show=!a||i&&e.test(t.search)||r&&e.test(t.code),s+=t.show}),this.searchError=null}catch(t){this.searchError=t.message}return s},async scheduleSearch(){const t=this.searchNeedsCodeIds;(null==t?void 0:t.length)&&await this.getCodeFromStorage(t),this.debouncedUpdate()},async getCodeFromStorage(t){const e=await g.a.code.getMulti(t);this.store.scripts.forEach(({$cache:t,props:{id:s}})=>{s in e&&(t.code=e[s])})},async emptyRecycleBin(){try{await Object(c.b)(Object(r.n)("buttonEmptyRecycleBin")),Object(r.w)("CheckRemove",{force:!0}),w.a.scripts=w.a.scripts.filter(t=>!t.config.removed)}catch(t){}},adjustScriptWidth(){const t=_.viewTable?O:P;this.numColumns=_.viewSingleColumn?1:t.findIndex(t=>window.innerWidth<t)+1||t.length+1},selectScript(t){t=Math.min(t,this.filteredScripts.length-1),(t=Math.max(t,-1))!==this.focusedIndex&&(this.focusedIndex=t)},markRemove(t,e){Object(r.w)("MarkRemoved",{id:t.props.id,removed:e})},handleActionEdit(t){this.editScript(t.props.id)},handleActionRemove(t){this.markRemove(t,1),this.removing=!0,setTimeout(()=>{this.removing=!1},1e3)},handleActionRestore(t){this.markRemove(t,0)},handleActionToggle(t){Object(r.w)("UpdateScriptInfo",{id:t.props.id,config:{enabled:t.config.enabled?0:1}})},handleActionUpdate(t){Object(r.w)("CheckUpdate",t.props.id)},handleSmoothScroll(t){if(!t)return;const e=this.$refs.scriptList;e.scroll({top:e.scrollTop+t,behavior:"smooth"})}},created(){this.debouncedUpdate=Object(r.c)(this.onUpdate,100),this.debouncedRender=Object(r.c)(this.renderScripts)},mounted(){if(w.a.loading||this.refreshUI(),!P.length){const e=getComputedStyle(document.documentElement);[P,O]=["cards","table"].map(t=>{var s;return(null==(s=e.getPropertyValue(`--columns-${t}`))?void 0:s.split(",").map(Number).filter(Boolean))||[]}),t.addEventListener("resize",this.adjustScriptWidth)}this.adjustScriptWidth(),this.disposeList=[...f.a.isFirefox?[b.c.register("tab",()=>{Object(b.a)(1)}),b.c.register("s-tab",()=>{Object(b.a)(-1)})]:[],...I(()=>{var t;null==(t=this.$refs.search)||t.focus()},[["ctrlcmd-f","tabScripts"],["/",$,!0]]),...I(()=>{var t;null==(t=this.$refs.search)||t.blur()},[["enter","tabScripts && inputFocus"]]),...I(()=>{this.selectedScript&&(this.showHotkeys=!this.showHotkeys)},[["enter","tabScripts && scriptFocus"]]),...I(()=>{this.showHotkeys=!1},[["escape",E],["q",E,!0]]),...I(()=>{let t=this.focusedIndex;t<0?t=0:t+=this.numColumns,t<this.filteredScripts.length&&this.selectScript(t)},[["ctrlcmd-down","tabScripts"],["down","tabScripts"],["j",$,!0]]),...I(()=>{const t=this.focusedIndex-this.numColumns;t>=0&&this.selectScript(t)},[["ctrlcmd-up","tabScripts"],["up","tabScripts"],["k",$,!0]]),...I(()=>{this.selectScript(this.focusedIndex-1)},[["ctrlcmd-left","tabScripts"],["left",$],["h",$,!0]]),...I(()=>{this.selectScript(this.focusedIndex+1)},[["ctrlcmd-right","tabScripts"],["right",$],["l",$,!0]]),...I(()=>{this.selectScript(0)},[["ctrlcmd-home","tabScripts"],["g g",$,!0]]),...I(()=>{this.selectScript(this.filteredScripts.length-1)},[["ctrlcmd-end","tabScripts"],["G",$,!0]]),...I(()=>{this.handleActionEdit(this.selectedScript)},[[A.edit,U,!0]]),...I(()=>{this.handleActionRemove(this.selectedScript)},[["delete",U],[A.remove,U,!0]]),...I(()=>{this.handleActionUpdate(this.selectedScript)},[[A.update,U,!0]]),...I(()=>{this.handleActionToggle(this.selectedScript)},[[A.toggle,U,!0]]),...I(()=>{this.handleActionRestore(this.selectedScript)},[[A.restore,R,!0]])]},beforeDestroy(){var t;null==(t=this.disposeList)||t.forEach(t=>{t()})}}}).call(this,s(24))},,(t,e,s)=>{},function(t,e,s){"use strict";(function(t){var a=s(4),n=s.n(a),o=s(0),i=s(1),r=s(16),l=s(10),c=s(37),d=s(7),u=s(25),p=s(11),h=s(89),m=s(90),v=s(91),g=s(92);const b={name:"",runAt:"",homepageURL:"",updateURL:"",downloadURL:"",origInclude:!0,origExclude:!0,origMatch:!0,origExcludeMatch:!0},f=["include","match","exclude","excludeMatch"],y=t=>(null==t?void 0:t.join("\n"))||"",x=t=>t.split("\n").map(t=>t.trim()).filter(Boolean);let C,w;const S=()=>{d.a.get("editorWindow")&&d.a.set("editorWindowPos",{left:window.screenX,top:window.screenY,width:window.outerWidth,height:window.outerHeight})},k=({id:e,tabs:s})=>{if(1===s.length){const{onBoundsChanged:s}=t.chrome.windows;s?s.addListener(t=>{t.id===e&&S()}):(window.addEventListener("resize",Object(o.c)(S,100)),w=!0)}};let _;const j=(t,e)=>t<e?-1:t>e;e.a={props:["initial"],components:{VmCode:c.default,VmSettings:h.a,VmValues:m.a,VmExternals:v.a,VmHelp:g.a},data(){return{nav:"code",canSave:!1,script:null,code:"",codeDirty:!1,settings:{},commands:{save:this.save,close:this.close,showHelp:()=>{this.nav="help"}},hotkeys:null}},computed:{navItems(){var t;const{meta:e,props:s}=this.script||{},a=(null==e?void 0:e.require.length)&&"@require",i=!Object(o.p)(null==e?void 0:e.resources)&&"@resource";return n()({code:Object(o.n)("editNavCode"),settings:Object(o.n)("editNavSettings")},(null==s?void 0:s.id)&&{values:Object(o.n)("editNavValues")},{},(a||i)&&{externals:(t=[a,i],o.z).call(t,"/")},{help:"?"})},scriptName(){const{script:t}=this,e=(null==t?void 0:t.meta)&&Object(o.l)(t);return p.a.title=e,e}},watch:{nav(t){l.c.setContext("tabCode","code"===t)},canSave(t){this.toggleUnloadSentry(t),l.c.setContext("canSave",t)},"initial.error"(t){t&&Object(r.c)({text:`${this.initial.message}\n\n${t}`})}},created(){var e;this.script=this.initial,this.toggleUnloadSentry=Object(u.a)(null,()=>{this.$refs.code.cm.focus()}),d.a.get("editorWindow")&&1===t.history.length&&(null==(e=browser.windows)||e.getCurrent({populate:!0}).then(k))},async mounted(){var t,e,s;this.nav="code";const a=null==(t=this.script)||null==(e=t.props)?void 0:e.id;if(a)this.code=await Object(o.w)("GetScriptCode",a);else{const{script:t,code:e}=await Object(o.w)("NewScript",u.c.paths[2]);this.script=t,this.code=e}const{custom:r,config:c}=this.script;this.settings={config:{notifyUpdates:`${null!=(s=c.notifyUpdates)?s:""}`,shouldUpdate:Boolean(c.shouldUpdate)},custom:n()({},b,{},Object(i.i)(r,Object.keys(b)),{},Object(i.i)(r,f,y),{runAt:r.runAt||""})},C=Object(i.a)(this.settings),this.$watch("codeDirty",this.onChange),this.$watch("settings",this.onChange,{deep:!0});{var d;const t=Object.values(this.navItems),e=[["Alt-PageUp",` ${t.join(" < ")}`],["Alt-PageDown",` ${t.join(" > ")}`],...Object.entries(this.$refs.code.expandKeyMap()).sort((t,e)=>j(t[1],e[1])||j(t[0],e[0]))];_=null==(d=e.find(([,t])=>"save"===t))?void 0:d[0],_||(_="Ctrl-S",e.unshift([_,"save"])),this.hotkeys=e}this.disposeList=[l.c.register("a-pageup",this.switchPrevPanel),l.c.register("a-pagedown",this.switchNextPanel),l.c.register("ctrlcmd-s",this.save,{condition:"canSave"}),l.c.register("escape",()=>{this.nav="code"},{condition:"!tabCode"})]},methods:{async save(){w&&S();const{settings:t}=this,{config:e,custom:s}=t,{notifyUpdates:a}=e;try{var l,c,d;const r=this.$refs.code,u=null==(l=this.script)||null==(c=l.props)?void 0:c.id,p=await Object(o.w)("ParseScript",{id:u,code:r.getRealContent(),config:n()({},e,{notifyUpdates:a?+a:null}),custom:n()({},Object(i.i)(s,Object.keys(b)),{},Object(i.i)(s,f,x)),isNew:!u,message:""});C=Object(i.a)(t),r.cm.markClean(),this.codeDirty=!1,this.canSave=!1,(null==p||null==(d=p.where)?void 0:d.id)&&(this.script=p.update)}catch(t){Object(r.c)({text:t})}},close(t){t&&"code"!==this.nav?this.nav="code":this.$emit("close")},saveClose(){this.save().then(this.close)},switchPanel(t){const e=Object.keys(this.navItems);this.nav=e[(e.indexOf(this.nav)+t+e.length)%e.length]},switchPrevPanel(){this.switchPanel(-1)},switchNextPanel(){this.switchPanel(1)},onChange(){this.canSave=this.codeDirty||!Object(i.b)(this.settings,C)}},beforeDestroy(){var t;p.a.title=null,this.toggleUnloadSentry(!1),null==(t=this.disposeList)||t.forEach(t=>{t()})}}}).call(this,s(24))},,,(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},function(t,e,s){"use strict";(function(t){var a=s(20),n=s.n(a),o=s(0),i=s(3),r=s(27),l=s(7),c=s(26),d=s(21),u=s(62),p=s(36),h=s(83),m=s(82),v=s(84),g=s(85),b=s(86),f=s(87),y=s(88);const x=[i.d,i.f,i.e],C=[{name:"showBadge",normalize:t=>t?"total"===t?"total":"unique":""},{name:"autoUpdate",normalize:t=>Math.max(0,Math.min(365,+t||0))},{name:"defaultInjectInto",normalize:t=>x.includes(t)?t:"auto"},{name:"filtersPopup.sort",normalize:t=>"exec"===t&&t||"alpha"}],w={};C.forEach(({name:t})=>{w[t]=null}),e.a={components:{Icon:d.a,VmImport:h.a,VmExport:m.a,VmSync:v.a,VmEditor:g.a,VmTemplate:b.a,VmBlacklist:f.a,VmCss:y.a,SettingCheck:r.a,LocaleGroup:u.a,Tooltip:n()},data:()=>({showAdvanced:!1,expose:null,settings:w,injectIntoOptions:x}),computed:{editorWindowHint(){var e;return(null==(e=t.chrome.windows)?void 0:e.onBoundsChanged)?null:this.i18n("optionEditorWindowHint")}},methods:{getUpdater:({name:t,normalize:e})=>(s,a)=>{(s=e(s))!==(a=e(a))&&l.a.set(t,s)}},created(){this.revokers=[],C.forEach(t=>{const{name:e,normalize:s}=t;this.revokers.push(Object(c.a)(e,t=>{w[e]=s(t)})),this.$watch(()=>w[e],Object(o.c)(this.getUpdater(t),300))}),this.expose=Object.keys(l.a.get("expose")).map(t=>[t,decodeURIComponent(t)]),Object(p.a)()},beforeDestroy(){this.revokers.forEach(t=>{t()})}}}).call(this,s(24))},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},(t,e,s)=>{},,,,function(t,e,s){"use strict";var a=s(0),n={props:["i18nKey"],computed:{parts(){return Object(a.n)(this.i18nKey,["\x02"]).split("\x02")}}},o=s(5),i=Object(o.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v(" "+this._s(this.parts[0])+" "),this._t("default"),this._v(" "+this._s(this.parts[1])+" ")],2)}),[],!1,null,null,null);e.a=i.exports},,,,,,function(t,e,s){"use strict";s.r(e),s.d(e,"loadData",()=>S);var a=s(28),n=s(0),o=s(34),i=s(35),r=s(7),l=(s(65),s(11)),c=s(21),d=s(10),u=s(39).a,p=(s(178),s(5)),h=Object(p.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-installed flex flex-col"},[t.canRenderScripts?s("div",{staticClass:"flex flex-col flex-auto"},[s("header",{staticClass:"flex"},[t.showRecycle?s("div",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("headerRecycleBin")+(t.trash.length?" ("+t.trash.length+")":""))}}):s("div",{staticClass:"flex-auto"},[s("dropdown",{class:{active:t.menuNewActive},attrs:{closeAfterClick:!0},on:{stateChange:t.onStateChange}},[s("tooltip",{attrs:{slot:"toggle",content:t.i18n("buttonNew"),placement:"bottom",align:"start"},slot:"toggle"},[s("a",{staticClass:"btn-ghost",attrs:{tabindex:"0"}},[s("icon",{attrs:{name:"plus"}})],1)]),s("a",{staticClass:"dropdown-menu-item",attrs:{tabindex:"0"},domProps:{textContent:t._s(t.i18n("buttonNew"))},on:{click:e=>(e.preventDefault(),t.editScript("_new"))}}),s("a",{staticClass:"dropdown-menu-item",attrs:{href:"https://openuserjs.org/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("installFrom","OpenUserJS"))}}),s("a",{staticClass:"dropdown-menu-item",attrs:{href:"https://greasyfork.org/scripts",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("installFrom","GreasyFork"))}}),s("a",{staticClass:"dropdown-menu-item",attrs:{tabindex:"0"},domProps:{textContent:t._s(t.i18n("buttonInstallFromURL"))},on:{click:e=>(e.preventDefault(),t.installFromURL(e))}})],1),s("tooltip",{attrs:{content:t.i18n("buttonUpdateAll"),placement:"bottom",align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{tabindex:"0"},on:{click:t.updateAll}},[s("icon",{attrs:{name:"refresh"}})],1)])],1),s("tooltip",{attrs:{content:t.i18n("buttonRecycleBin"),placement:"bottom"}},[s("a",{staticClass:"btn-ghost trash-button",class:{active:t.showRecycle,filled:t.trash.length},attrs:{tabindex:"0"},on:{click:e=>{t.showRecycle=!t.showRecycle}}},[s("icon",{class:{"trash-animate":t.removing},attrs:{name:"trash"}}),t.trash.length?s("b",{domProps:{textContent:t._s(t.trash.length)}}):t._e()],1)]),s("dropdown",{staticClass:"filter-sort",attrs:{align:"right"}},[s("tooltip",{attrs:{slot:"toggle",content:t.i18n("labelSettings"),placement:"bottom"},slot:"toggle"},[s("a",{staticClass:"btn-ghost",attrs:{tabindex:"0"}},[s("icon",{attrs:{name:"cog"}})],1)]),s("div",[s("locale-group",{attrs:{"i18n-key":"labelFilterSort"}},[s("select",{domProps:{value:t.filters.sort.value},on:{change:t.onOrderChange}},t._l(t.filterOptions.sort,(e,a)=>s("option",{key:a,domProps:{value:a,textContent:t._s(e.title)}})),0)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentSortCompare,expression:"currentSortCompare"}]},[s("setting-check",{attrs:{name:"filters.showEnabledFirst",label:t.i18n("optionShowEnabledFirst")}})],1),s("div",{staticClass:"mr-2c"},[s("setting-check",{attrs:{name:"filters.viewTable",label:t.i18n("labelViewTable")}}),s("setting-check",{attrs:{name:"filters.viewSingleColumn",label:t.i18n("labelViewSingleColumn")}})],1)],1),s("form",{staticClass:"filter-search hidden-xs flex",on:{submit:t=>{t.preventDefault()}}},[s("tooltip",{attrs:{placement:"bottom"}},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"search",class:{"has-error":t.searchError},attrs:{type:"search",placeholder:t.i18n("labelSearchScript"),id:"installed-search"},domProps:{value:t.search},on:{input:e=>{e.target.composing||(t.search=e.target.value)}}}),s("icon",{attrs:{name:"search"}})],1),s("pre",{staticClass:"filter-search-tooltip",attrs:{slot:"content"},domProps:{textContent:t._s(t.searchError||t.i18n("titleSearchHint"))},slot:"content"},[t._v("          ")])]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.searchScope,expression:"filters.searchScope"}],on:{change:[e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.filters,"searchScope",e.target.multiple?s:s[0])},t.onScopeChange]}},[s("option",{attrs:{value:"name"},domProps:{textContent:t._s(t.i18n("filterScopeName"))}}),s("option",{attrs:{value:"code"},domProps:{textContent:t._s(t.i18n("filterScopeCode"))}}),s("option",{attrs:{value:"all"},domProps:{textContent:t._s(t.i18n("filterScopeAll"))}})])],1)],1),t.showRecycle?s("div",{staticClass:"trash-hint mx-1 my-1 flex flex-col"},[s("span",{domProps:{textContent:t._s(t.i18n("hintRecycleBin"))}}),t.trash.length?s("a",{attrs:{href:"#"},domProps:{textContent:t._s(t.i18n("buttonEmptyRecycleBin"))},on:{click:e=>(e.preventDefault(),t.emptyRecycleBin(e))}}):t._e()]):t._e(),s("div",{staticClass:"flex-auto pos-rel"},[s("div",{ref:"scriptList",staticClass:"scripts abs-full",style:"--num-columns:"+t.numColumns,attrs:{"data-columns":t.numColumns,"data-table":t.filters.viewTable}},t._l(t.sortedScripts,(e,a)=>s("script-item",{directives:[{name:"show",rawName:"v-show",value:!t.search||!1!==e.$cache.show,expression:"!search || script.$cache.show !== false"}],key:e.props.id,attrs:{focused:t.selectedScript===e,showHotkeys:t.showHotkeys,script:e,draggable:"exec"===t.filters.sort.value&&!e.config.removed,visible:a<t.batchRender.limit,nameClickable:t.filters.viewTable,hotkeys:t.scriptHotkeys},on:{edit:t.handleActionEdit,remove:t.handleActionRemove,restore:t.handleActionRestore,toggle:t.handleActionToggle,update:t.handleActionUpdate,move:t.moveScript,scrollDelta:t.handleSmoothScroll},nativeOn:{tiptoggle:e=>{t.showHotkeys=!t.showHotkeys}}})),1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"backdrop abs-full",class:{mask:t.store.loading}},[s("div",{domProps:{innerHTML:t._s(t.message)}})])])]):t._e(),t.script?s("edit",{attrs:{initial:t.script},on:{close:e=>t.editScript()}}):t._e()],1)}),[],!1,null,null,null).exports,m=s(51).a,v=(s(183),Object(p.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-settings mb-1c"},[s("h1",{staticClass:"mt-0",domProps:{textContent:t._s(t.i18n("labelSettings"))}}),s("section",{staticClass:"mb-1c"},[s("h3",{domProps:{textContent:t._s(t.i18n("labelGeneral"))}}),s("div",[s("setting-check",{attrs:{name:"autoReload",label:t.i18n("labelAutoReloadCurrentTab")}})],1),s("div",[s("setting-check",{staticClass:"mr-2",attrs:{name:"editorWindow"}},[s("tooltip",{attrs:{content:t.editorWindowHint,disabled:!t.editorWindowHint}},[s("span",{domProps:{textContent:t._s(t.i18n("optionEditorWindow"))}})])],1),s("setting-check",{attrs:{name:"editorWindowSimple",label:t.i18n("optionEditorWindowSimple")}})],1),s("div",{staticClass:"ml-2c"},[s("label",[s("locale-group",{attrs:{"i18n-key":"labelPopupSort"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings["filtersPopup.sort"],expression:"settings['filtersPopup.sort']"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"filtersPopup.sort",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"exec"},domProps:{textContent:t._s(t.i18n("filterExecutionOrder"))}}),s("option",{attrs:{value:"alpha"},domProps:{textContent:t._s(t.i18n("filterAlphabeticalOrder"))}})])])],1),s("setting-check",{attrs:{name:"filtersPopup.enabledFirst",label:t.i18n("optionPopupEnabledFirst")}}),s("setting-check",{attrs:{name:"filtersPopup.hideDisabled",label:t.i18n("optionPopupHideDisabled")}})],1),s("div",[s("label",[s("span",{domProps:{textContent:t._s(t.i18n("labelBadge"))}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.showBadge,expression:"settings.showBadge"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"showBadge",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelBadgeNone"))}}),s("option",{attrs:{value:"unique"},domProps:{textContent:t._s(t.i18n("labelBadgeUnique"))}}),s("option",{attrs:{value:"total"},domProps:{textContent:t._s(t.i18n("labelBadgeTotal"))}})])])])]),s("section",{staticClass:"mb-1c"},[s("h3",{domProps:{textContent:t._s(t.i18n("titleScriptUpdated"))}}),s("div",[s("label",[s("locale-group",{attrs:{"i18n-key":"labelAutoUpdate"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.autoUpdate,expression:"settings.autoUpdate"}],attrs:{type:"number",min:"0",max:"365",step:"1/"},domProps:{value:t.settings.autoUpdate},on:{input:e=>{e.target.composing||t.$set(t.settings,"autoUpdate",e.target.value)}}})])],1)]),s("div",[s("setting-check",{attrs:{name:"notifyUpdates",label:t.i18n("labelNotifyUpdates")}}),s("setting-check",{staticClass:"ml-2",attrs:{name:"notifyUpdatesGlobal",label:t.i18n("labelNotifyUpdatesGlobal")}})],1)]),s("vm-import"),s("vm-export"),s("vm-sync"),s("div",{staticClass:"show-advanced"},[s("button",{on:{click:e=>{t.showAdvanced=!t.showAdvanced}}},[s("span",{domProps:{textContent:t._s(t.i18n("labelAdvanced"))}}),s("icon",{class:{rotate:t.showAdvanced},attrs:{name:"arrow"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[s("section",{staticClass:"mb-1c"},[s("h3",{domProps:{textContent:t._s(t.i18n("labelGeneral"))}}),s("div",[s("label",[s("span",{domProps:{textContent:t._s(t.i18n("labelInjectionMode"))}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.defaultInjectInto,expression:"settings.defaultInjectInto"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"defaultInjectInto",e.target.multiple?s:s[0])}}},t._l(t.injectIntoOptions,e=>s("option",{key:e,domProps:{value:e,textContent:t._s(e)}})),0),s("a",{staticClass:"ml-1",attrs:{href:"https://violentmonkey.github.io/posts/inject-into-context/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("learnInjectionMode"))}})])]),s("div",[s("locale-group",{staticClass:"mr-1c",attrs:{"i18n-key":"labelExposeStatus"}},t._l(t.expose,e=>{var a=e[0],n=e[1];return s("setting-check",{key:n,staticClass:"mr-1c valign-tb",attrs:{name:"expose."+a}},[s("span",{domProps:{textContent:t._s(n)}}),s("a",{attrs:{href:"https://"+n,target:"_blank",rel:"noopener noreferrer"}},[t._v("\u2197")])])}),1)],1)]),s("vm-editor"),s("vm-template"),s("vm-blacklist"),s("vm-css")],1)],1)}),[],!1,null,null,null).exports),g={data(){const t=browser.runtime.getManifest();return{name:t.name,version:t.version,language:browser.i18n.getUILanguage()}}},b=(s(184),Object(p.a)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-about mb-2c"},[s("h1",{staticClass:"mt-0 mr-1c"},[s("span",{domProps:{textContent:t._s(t.name)}}),s("small",{domProps:{textContent:t._s("v"+t.version)}})]),s("p",{domProps:{textContent:t._s(t.i18n("extDescription"))}}),s("div",[s("a",{attrs:{href:"https://violentmonkey.github.io/donate/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelDonate"))}}),s("span",{staticClass:"text-red"},[t._v(" \u2665")])]),s("div",[s("label",{domProps:{textContent:t._s(t.i18n("labelRelated"))}}),s("ul",[s("li",[s("a",{attrs:{href:"https://violentmonkey.github.io",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelHomepage"))}})]),s("li",[s("a",{attrs:{href:"https://github.com/violentmonkey/violentmonkey/issues",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelFeedback"))}})]),s("li",[s("a",{attrs:{href:"https://github.com/violentmonkey/violentmonkey/graphs/contributors",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelContributors"))}})]),s("li",[s("a",{attrs:{href:"https://violentmonkey.github.io/privacy/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelPrivacyPolicy"))}})])])]),s("div",[s("label",{domProps:{textContent:t._s(t.i18n("labelCurrentLang"))}}),s("span",{staticClass:"current",domProps:{textContent:t._s(t.language)}}),t._v(" | "),s("a",{attrs:{href:"https://violentmonkey.github.io/localization/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelHelpTranslate"))}})])])}),[],!1,null,null,null).exports);const f=[{name:"scripts",comp:h,label:Object(n.n)("sideMenuInstalled")},{name:"settings",comp:v,label:Object(n.n)("sideMenuSettings")},{name:"about",comp:b,label:Object(n.n)("sideMenuAbout")}],y=Object(n.n)("extName");var x={components:{Icon:c.a},data(){const[t,e]=l.a.route.paths;return{tabs:f,aside:!1,canRenderAside:"scripts"!==t||"_new"!==e&&!Number(e),store:l.a}},computed:{current(){const t=this.store.route.paths[0];return f.find(e=>e.name===t)||f[0]},tabComponent(){return this.current.comp}},watch:{"store.title"(t){document.title=t?`${t} - ${y}`:y},"store.route.paths"(){this.canRenderAside=!0,this.updateContext()}},methods:{updateContext(){const t="scripts"===this.current.name,{paths:e}=this.store.route;d.c.setContext("editScript",t&&e[1]),d.c.setContext("tabScripts",t&&!e[1])},switchTab(t){const e=this.tabs.indexOf(this.current),s=this.tabs[(e+t+this.tabs.length)%this.tabs.length];window.location.hash=(null==s?void 0:s.name)||""}},mounted(){this.disposeList=[d.c.register("a-pageup",()=>this.switchTab(-1),{condition:"!editScript"}),d.c.register("a-pagedown",()=>this.switchTab(1),{condition:"!editScript"})],d.c.enable(),this.updateContext()},beforeDestroy(){var t;null==(t=this.disposeList)||t.forEach(t=>{t()}),d.c.disable()}},C=(s(185),Object(p.a)(x,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-options flex h-100"},[t.canRenderAside?s("aside",{class:{"show-aside":t.aside}},[s("div",{staticClass:"aside-content"},[s("img",{attrs:{src:"/public/images/icon128.png"}}),s("h1",{staticClass:"hidden-xs",domProps:{textContent:t._s(t.i18n("extName"))}}),s("div",{staticClass:"aside-menu"},t._l(t.tabs,e=>s("a",{key:e.name,class:{active:e===t.current},attrs:{href:"#"+e.name},domProps:{textContent:t._s(e.label)}})),0)])]):t._e(),s("keep-alive",[s(t.tabComponent,{tag:"component",staticClass:"tab flex-auto"})],1)],1)}),[],!1,null,null,null).exports);async function w(t){const e=t.meta||{},s=Object(n.k)(e,"name"),a=[e.name,s,e.description,Object(n.k)(e,"description"),t.custom.name,t.custom.description].filter(Boolean).join("\n"),o=t.custom.name||s,r=o.toLowerCase();t.$cache={search:a,name:o,lowerName:r},await Object(i.a)(t,l.a.cache)||(t.safeIcon=`/public/images/icon${l.a.HiDPI?128:t.config.removed?32:38}.png`)}async function S(){const t=l.a.route.paths[1],e=t?[+t].filter(Boolean):null,[{cache:s,scripts:a,sync:o}]=await Promise.all([Object(n.x)("GetData",e,{retry:!0}),r.a.ready]);l.a.cache=s,null==a||a.forEach(w),l.a.scripts=a,l.a.sync=o,l.a.loading=!1}a.default.prototype.i18n=n.n,Object.assign(l.a,{loading:!1,scripts:[],sync:[],title:null}),(()=>{l.a.loading=!0,S(),Object.assign(o.a,{ScriptsUpdated(){S()},UpdateSync(t){l.a.sync=t},AddScript({update:t}){t.message="",w(t),l.a.scripts.push(t)},UpdateScript(t){if(!t)return;const e=l.a.scripts.findIndex(e=>e.props.id===t.where.id);if(e>=0){const s=Object.assign({},l.a.scripts[e],t.update);s.error&&!t.update.error&&(s.error=null),a.default.set(l.a.scripts,e,s),w(s)}},RemoveScript(t){const e=l.a.scripts.findIndex(e=>e.props.id===t);e>=0&&l.a.scripts.splice(e,1)}});const t=new a.default({render:t=>t(C)}).$mount();document.body.append(t.$el)})()},,,,,,,,,,,,,function(t,e,s){"use strict";var a=s(20),n=s.n(a),o=s(0),i=s(21),r=s(10),l=s(8);const c="ontouchstart"in document,d=c?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"dragstart",move:"mousemove",end:"mouseup"},u=c&&Object.assign(document.createElement("div"),{className:"dragging-noscroll"}),p=["scroll","mouseenter","mouseleave"],{addEventListener:h,removeEventListener:m}=EventTarget.prototype;let v,g,b,f,y,x,C,w,S,k,_,j,O,P,$,U,R;function E(t){var e;k=this,x=t,C=setTimeout(A,500,"timer"),(e=document,h).call(e,d.move,A),(e=document,h).call(e,d.end,I)}function A(t){var e;I(),"timer"===t&&((e=k,L).call(e,x),l.a.isFirefox&&T()&&(_.scrollTop+=1,_.scrollTop-=1))}function I(){var t;clearTimeout(C),(t=document,m).call(t,d.move,A),(t=document,m).call(t,d.end,I)}function L(t){var e,s;k=this,t.cancelable&&t.preventDefault();const{clientX:a,clientY:n}=(null==(e=t.touches)?void 0:e[0])||t,o=k.getBoundingClientRect(),i=_.getBoundingClientRect();v=k.cloneNode(!0),g=[..._.children],f=g.indexOf(k),y=f,g.splice(f,1),b=o.height,w=a-o.left,S=n-o.top,j=i.top+50,O=i.bottom-50,R={},k.classList.add("dragging-placeholder"),v.classList.add("dragging"),v.style.transform=`translate(${o.left}px, ${o.top}px)`,v.style.width=`${o.width}px`,_.appendChild(v),c&&_.insertAdjacentElement("afterBegin",u),(s=document,h).call(s,d.move,D),(s=document,h).call(s,d.end,N)}function D(t){var e;const{clientX:s,clientY:a,target:n}=(null==(e=t.touches)?void 0:e[0])||t;let o;const i=c?((t,e)=>{var s;const a=`${t}:${e}`;return R[a]||(R[a]=null==(s=document.elementFromPoint(t,e))?void 0:s.closest(".script"))})(s,a):null==n.closest?void 0:n.closest(".script");if(i&&i!==k){const t=i.getBoundingClientRect(),e=a>t.top+t.height/2;o=k!==i[`${e?"next":"previous"}ElementSibling`],o&&(i.insertAdjacentElement(e?"afterEnd":"beforeBegin",k),(t=>{const e=y<t?b:-b,s=g.slice(...y<t?[y,t]:[t,y]);s.forEach(t=>{t.style.transition="none",t.style.transform=`translateY(${e}px)`}),setTimeout(()=>s.forEach(t=>t.removeAttribute("style"))),y=t})(g.indexOf(i)+e))}v.style.transform=`translate(${s-w}px, ${a-S}px)`,((t=>{const e=T()&&Math.min(1,Math.max(0,t-O,j-t)/50);return!e&&P&&M(),e&&!P&&(P=setInterval(V,16),p.forEach(t=>{var e;return(e=window,h).call(e,t,B,!0)})),$=e&&(t>O?1:-1)*(1+20*e|0),U=performance.now(),!!e})(a)||o)&&(R={})}function N(){var t;(t=document,m).call(t,d.move,D),(t=document,m).call(t,d.end,N),M(),v.remove(),c&&u.remove(),k.classList.remove("dragging-placeholder"),k.dispatchEvent(new Event("VM-drop-event-relay"))}function T(){return _.scrollHeight>_.clientHeight}function V(){const t=performance.now(),e=$*(t-U)/16;_.scrollTop+=e,U=t}function M(){p.forEach(t=>{var e;return(e=window,m).call(e,t,B,!0)}),P&&clearInterval(P),P=0}function B(t){t.stopPropagation()}var H={props:["script","draggable","visible","nameClickable","focused","hotkeys","showHotkeys"],components:{Icon:i.a,Tooltip:n.a},data(){return{canRender:this.visible}},computed:{canUpdate(){const{script:t}=this;return t.config.shouldUpdate&&(t.custom.updateURL||t.meta.updateURL||t.custom.downloadURL||t.meta.downloadURL||t.custom.lastInstallURL)},homepageURL(){const{script:t}=this;return t.custom.homepageURL||t.meta.homepageURL||t.meta.homepage},author(){const t=this.script.meta.author;if(!t)return;const e=t.match(/^(.*?)\s<(\S*?@\S*?)>$/);return{email:e&&e[2],name:e?e[1]:t}},labelEnable(){return this.script.config.enabled?this.i18n("buttonDisable"):this.i18n("buttonEnable")},description(){return this.script.custom.description||Object(o.k)(this.script.meta,"description")},updatedAt(){const{props:t,config:e}=this.script,s={};let a;if(e.removed?({lastModified:a}=t):a=t.lastUpdated||t.lastModified,a){const t=new Date(a);s.show=Object(o.h)(Date.now()-a),e.removed?s.title=this.i18n("labelRemovedAt",t.toLocaleString()):s.title=this.i18n("labelLastUpdatedAt",t.toLocaleString())}return s},tabIndex(){return this.focused?0:-1}},watch:{visible(t){t&&(this.canRender=!0)},focused(t,e){const{$el:s}=this;if(t&&!e&&s){const t=s.getBoundingClientRect(),e=s.parentNode.getBoundingClientRect();let a=0;t.bottom>e.bottom-8?a+=t.bottom-e.bottom+8:t.top<e.top+8&&(a-=e.top-t.top+8),Object(r.b)(document.activeElement)||s.focus({preventScroll:!0}),this.$emit("scrollDelta",a)}}},mounted(){((t,{onDrop:e})=>{_||(_=t.parentElement,c&&!matchMedia("(pointer: coarse)").matches&&_.classList.add("touch")),h.call(t,d.start,c?E:L),h.call(t,"VM-drop-event-relay",()=>e(f,y))})(this.$el,{onDrop:(t,e)=>this.$emit("move",{from:t,to:e})})},methods:{onEdit(){this.$emit("edit",this.script)},onRemove(){this.$emit("remove",this.script)},onRestore(){this.$emit("restore",this.script)},onToggle(){this.$emit("toggle",this.script)},onUpdate(){this.$emit("update",this.script)},onFocus(){r.c.setContext("scriptFocus",!0)},onBlur(){r.c.setContext("scriptFocus",!1)},toggleTip(t){Object(r.d)(t.target)}}},z=(s(151),s(5)),F=Object(z.a)(H,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"script",class:{disabled:!t.script.config.enabled,removed:t.script.config.removed,error:t.script.error,focused:t.focused,hotkeys:t.focused&&t.showHotkeys},attrs:{tabIndex:t.tabIndex,draggable:t.draggable},on:{focus:t.onFocus,blur:t.onBlur}},[s("div",{staticClass:"script-icon hidden-xs"},[s("a",{attrs:{"data-hotkey":t.hotkeys.edit,"data-hotkey-table":"",tabIndex:"-1"},on:{click:t.onEdit}},[s("img",{attrs:{src:t.script.safeIcon}})])]),s("div",{staticClass:"script-info flex ml-1c"},[s("span",{staticClass:"script-name ellipsis flex-auto",attrs:{tabIndex:t.nameClickable?t.tabIndex:-1},domProps:{textContent:t._s(t.script.$cache.name)},on:{click:e=>{if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;t.nameClickable&&t.onEdit()}}}),t.canRender?[t.author?s("tooltip",{staticClass:"script-author ml-1c hidden-sm",attrs:{content:t.i18n("labelAuthor")+t.script.meta.author,align:"end"}},[s("icon",{attrs:{name:"author"}}),t.author.email?s("a",{staticClass:"ellipsis",attrs:{href:"mailto:"+t.author.email,tabIndex:t.tabIndex},domProps:{textContent:t._s(t.author.name)}}):s("span",{staticClass:"ellipsis",domProps:{textContent:t._s(t.author.name)}})],1):t._e(),s("tooltip",{staticClass:"hidden-sm ml-1c",attrs:{content:t.updatedAt.title,align:"end"}},[s("span",{domProps:{textContent:t._s(t.script.meta.version?"v"+t.script.meta.version:"")}}),s("span",{domProps:{textContent:t._s(t.updatedAt.show)}})]),t.script.config.removed?s("div",[s("tooltip",{attrs:{content:t.i18n("buttonRestore"),placement:"left"}},[s("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.restore,tabIndex:t.tabIndex},on:{click:t.onRestore}},[s("icon",{attrs:{name:"undo"}})],1)])],1):t._e()]:t._e()],2),s("div",{staticClass:"script-buttons flex"},[t.canRender?[s("div",{staticClass:"flex-auto flex flex-wrap"},[s("tooltip",{attrs:{content:t.i18n("buttonEdit"),align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.edit,tabIndex:t.tabIndex},on:{click:t.onEdit}},[s("icon",{attrs:{name:"code"}})],1)]),s("tooltip",{attrs:{content:t.labelEnable,align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.toggle,tabIndex:t.tabIndex},on:{click:t.onToggle}},[s("icon",{attrs:{name:"toggle-"+(t.script.config.enabled?"on":"off")}})],1)]),s("tooltip",{attrs:{disabled:!t.canUpdate||t.script.checking,content:t.i18n("buttonUpdate"),align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.update,tabIndex:t.canUpdate?t.tabIndex:-1},on:{click:t.onUpdate}},[s("icon",{attrs:{name:"refresh"}})],1)]),s("span",{staticClass:"sep"}),s("tooltip",{attrs:{disabled:!t.homepageURL,content:t.i18n("buttonHome"),align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{target:"_blank",rel:"noopener noreferrer",href:t.homepageURL,tabIndex:t.homepageURL?t.tabIndex:-1}},[s("icon",{attrs:{name:"home"}})],1)]),s("tooltip",{attrs:{disabled:!t.description,content:t.description,align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{tabIndex:t.description?t.tabIndex:-1},on:{click:t.toggleTip}},[s("icon",{attrs:{name:"info"}})],1)]),s("tooltip",{attrs:{disabled:!t.script.meta.supportURL,content:t.i18n("buttonSupport"),align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{target:"_blank",rel:"noopener noreferrer",tabIndex:t.script.meta.supportURL?t.tabIndex:-1,href:t.script.meta.supportURL}},[s("icon",{attrs:{name:"question"}})],1)]),s("div",{staticClass:"script-message",attrs:{title:t.script.error},domProps:{textContent:t._s(t.script.message)}})],1),s("tooltip",{attrs:{content:t.i18n("buttonRemove"),align:"end"}},[s("a",{staticClass:"btn-ghost",attrs:{"data-hotkey":t.hotkeys.remove,tabIndex:t.tabIndex},on:{click:t.onRemove}},[s("icon",{attrs:{name:"trash"}})],1)])]:t._e()],2)])}),[],!1,null,null,null);e.a=F.exports},function(t,e,s){"use strict";var a=s(61),n=s.n(a),o=s(0),i=s(1),r=s(7),l=s(8),c=s(27),d=s(36),u=s(11);function p(t,e,s="0"){let a=`${t}`;for(;a.length<e;)a=s+a;return a}function h(){return`scripts_${(()=>{const t=new Date;return`${t.getFullYear()}-${p(t.getMonth()+1,2)}-${p(t.getDate(),2)}_${p(t.getHours(),2)}.${p(t.getMinutes(),2)}.${p(t.getSeconds(),2)}`})()}.zip`}l.a.isFirefox&&(u.a.ffDownload={});var m={components:{SettingCheck:c.a,Modal:n.a},data:()=>({store:u.a,exporting:!1}),methods:{async handleExport(){this.exporting=!0;try{(t=>{const e=l.a.isFirefox;if(e&&("win"===l.a.os?e<56:"mac"===l.a.os?e<61:e<63)){const e=new FileReader;e.onload=()=>{u.a.ffDownload={name:h(),url:e.result}},e.readAsDataURL(t)}else((t,e)=>{const s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e||"",a.dispatchEvent(new MouseEvent("click")),Object(o.s)(3e3).then(()=>URL.revokeObjectURL(s))})(t,h())})(await(async()=>{const t=r.a.get("exportValues"),e=await Object(o.w)("ExportZip",{values:t}),s={},a={scripts:{},settings:r.a.get()};delete a.settings.sync,t&&(a.values={});const n=(Object(i.h)(e,"items")||[]).map(({script:n,code:i})=>{let r=(t=>t.replace(/[\\/:*?"<>|]/g,"-"))(Object(o.l)(n));s[r]?(s[r]+=1,r=`${r}_${s[r]}`):s[r]=1;const{lastModified:l,lastUpdated:c}=n.props,d={custom:n.custom,config:n.config,position:n.props.position,lastModified:l,lastUpdated:c};if(t){const t=e.values[n.props.id];t&&(a.values[n.props.uri]=t)}return a.scripts[r]=d,{name:`${r}.user.js`,content:i,lastModDate:new Date(c||l)}});n.push({name:"violentmonkey",content:JSON.stringify(a)});const l=await Object(d.a)(),c=new l.BlobWriter("application/zip"),u=new l.ZipWriter(c,{bufferedWrite:!0,keepOrder:!1});return await Promise.all(n.map(t=>u.add(t.name,new l.TextReader(t.content),{lastModDate:t.lastModDate}))),await u.close()})())}catch(t){console.error(t)}this.exporting=!1}}},v=(s(180),s(5)),g=Object(v.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelDataExport"))}}),s("button",{attrs:{disabled:t.exporting},domProps:{textContent:t._s(t.i18n("buttonExportData"))},on:{click:t.handleExport}}),s("div",{staticClass:"mt-1"},[s("setting-check",{attrs:{name:"exportValues",label:t.i18n("labelExportScriptData")}})],1),t.store.ffDownload?s("modal",{attrs:{transition:"in-out",visible:!!t.store.ffDownload.url},on:{close:e=>{t.store.ffDownload={}}}},[s("div",{staticClass:"export-modal modal-content"},[s("a",{attrs:{download:t.store.ffDownload.name,href:t.store.ffDownload.url}},[t._v(" Right click and save as"),s("br"),s("strong",[t._v("scripts.zip")])])])]):t._e()],1)}),[],!1,null,null,null);e.a=g.exports},function(t,e,s){"use strict";var a=s(4),n=s.n(a),o=s(0),i=s(7),r=s(27),l=s(36),c=s(16);const d=[];async function u(t){if(!t)return;d.length=0;const e=await Object(l.a)(),s=new e.ZipReader(new e.BlobReader(t)),a=await s.getEntries().catch(g)||[];if(d.length)return;g("",t.name,"info");const r={},u=a.reduce((t,e)=>{var s;return t+(null==(s=e.filename)?void 0:s.endsWith(".user.js"))},0),p=a.find(t=>{var e;return"violentmonkey"===(null==(e=t.filename)?void 0:e.toLowerCase())}),h=p&&await v(p)||{};function m(t,e){return Promise.all(a.map(async s=>{const{filename:a}=s;if(null==a?void 0:a.endsWith(e)){const n=await v(s);return n&&t(s,n,a.slice(0,-e.length))}}))}async function v(t){const s=await t.getData(new e.TextWriter);return t.filename.endsWith(".js")?s:((t,e)=>{try{return JSON.parse(t)}catch(t){g(t,e.filename,null)}})(s,t)}function g(t,e,s="critical"){d.push({text:t,name:e,type:s})}function b(t=""){const e=Object.keys(r).length,s=Object(o.n)("msgImported",[e===u?e:`${e} / ${u}`]);return d[0].name=s,d[0].text=t,s}function f(t,e){return Object.entries(t||{}).map(e).filter(Boolean)}function y(t){return Object(o.g)(t).filter(t=>"string"==typeof t)}h.scripts||(h.scripts={}),h.values||(h.values={}),await m(async(t,e,s)=>{const{meta:a,settings:n={},options:o}=e;if(!a||!o)return;const i=o.override||{};d[0].text="Tampermonkey",h.scripts[s]={config:{enabled:!1!==n.enabled?1:0,shouldUpdate:o.check_for_updates?1:0},custom:{downloadURL:"string"==typeof a.file_url?a.file_url:void 0,noframes:!!i.noframes||null==i.noframes&&void 0,runAt:/^document-(start|body|end|idle)$/.test(o.run_at)?o.run_at:void 0,exclude:y(i.use_excludes),include:y(i.use_includes),match:y(i.use_matches),origExclude:!1!==i.merge_excludes,origInclude:!1!==i.merge_includes,origMatch:!1!==i.merge_matches},position:+n.position||void 0,props:{lastModified:+a.modified,lastUpdated:+a.modified}}},".options.json"),await m(async(t,e,s)=>{var a,i,l,c;const{filename:d}=t,u=h.scripts[s],p=n()({code:e},u&&{custom:u.custom,config:n()({enabled:null!=(a=u.enabled)?a:1,shouldUpdate:null!=(i=u.update)?i:1},u.config),position:u.position,props:{lastModified:u.lastModified||(null==(l=u.props)?void 0:l.lastModified)||+t.lastModDate,lastUpdated:u.lastUpdated||(null==(c=u.props)?void 0:c.lastUpdated)||+t.lastModDate}});try{r[s]=(await Object(o.w)("ParseScript",p)).update.props.uri,b(d)}catch(t){g(t,d,"script")}},".user.js"),i.a.get("importScriptData")&&(await m(async(t,e,s)=>{d[0].text="Tampermonkey",h.values[r[s]]=e.data},".storage.json"),Object(o.w)("SetValueStores",f(h.values,([t,e])=>e&&{where:{uri:t},store:e}))),i.a.get("importSettings")&&Object(o.w)("SetOptions",f(h.settings,([t,e])=>"sync"!==t&&{key:t,value:e})),Object(o.w)("CheckPosition"),Object(c.c)({text:b()}),await s.close()}var p={components:{SettingCheck:r.a},data(){return{reports:d,vacuuming:!1,labelVacuum:this.i18n("buttonVacuum")}},methods:{pickBackup(){const t=document.createElement("input");t.type="file",t.accept=".zip",t.onchange=()=>{var e;return u(null==(e=t.files)?void 0:e[0])},t.click()},async vacuum(){this.vacuuming=!0,this.labelVacuum=this.i18n("buttonVacuuming"),await Object(o.w)("Vacuum"),this.vacuuming=!1,this.labelVacuum=this.i18n("buttonVacuumed")}},mounted(){const t=(t=>{let e;const s=e=>t.classList.toggle("drop-allowed",e),a=()=>s(!1),n=()=>{clearTimeout(e),e=setTimeout(a,250)},i=t=>{clearTimeout(e);const a=t.dataTransfer.types.includes("Files");a&&t.preventDefault(),s(a)},r=async e=>{e.preventDefault(),s(!1);try{const s=e.dataTransfer.files[0];await Object(c.b)(Object(o.n)("buttonImportData")),t.disabled=!0,await u(s),t.disabled=!1}catch(t){}};return()=>{var t;const e="#settings"===window.location.hash,s=document[`${e?"add":"remove"}EventListener`];(t=document,s).call(t,"dragend",a),(t=document,s).call(t,"dragleave",n),(t=document,s).call(t,"dragover",i),(t=document,s).call(t,"drop",r)}})(this.$refs.buttonImport);window.addEventListener("hashchange",t),t()}},h=(s(179),s(5)),m=Object(h.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelDataImport"))}}),s("button",{ref:"buttonImport",domProps:{textContent:t._s(t.i18n("buttonImportData"))},on:{click:t.pickBackup}}),s("button",{attrs:{title:t.i18n("hintVacuum"),disabled:t.vacuuming},domProps:{textContent:t._s(t.labelVacuum)},on:{click:t.vacuum}}),s("div",{staticClass:"mt-1 ml-2c"},[s("setting-check",{attrs:{name:"importScriptData",label:t.i18n("labelImportScriptData")}}),s("setting-check",{attrs:{name:"importSettings",label:t.i18n("labelImportSettings")}})],1),s("table",{staticClass:"import-report"},t._l(t.reports,(e,a)=>{var n=e.type,o=e.name,i=e.text;return s("tr",{key:a,attrs:{"data-type":n}},[o?s("td",{domProps:{textContent:t._s(o)}}):t._e(),s("td",{attrs:{colspan:o?null:2},domProps:{textContent:t._s(i)}})])}),0)])}),[],!1,null,null,null);e.a=m.exports},function(t,e,s){"use strict";var a=s(0),n=s(7),o=s(27),i=s(26),r=s(21),l=s(11);const c={current:""};Object(i.a)("sync.current",t=>{c.current=t||""});var d={components:{SettingCheck:o.a,Icon:r.a},data:()=>({syncConfig:c,store:l.a}),computed:{syncServices(){const t=this.store.sync;return t&&t.length?[{displayName:this.i18n("labelSyncDisabled"),name:"",properties:{}},...t]:null},service(){if(this.syncServices){const t=this.syncConfig.current||"";let e=this.syncServices.find(e=>e.name===t);return e||(console.warn("Invalid current service:",t),e=this.syncServices[0]),e}return null},state(){const{service:t}=this;if(t){const e=["unauthorized","error","authorized"].includes(t.authState)&&["idle","error"].includes(t.syncState),s=e&&"authorized"===t.authState;return{message:this.getMessage(),label:this.getLabel(),canAuthorize:e,canSync:s,authType:t.properties.authType,userConfig:t.userConfig||{}}}return null}},methods:{onSaveUserConfig(){Object(a.w)("SyncSetConfig",this.state.userConfig).catch(a.t)},onSyncChange(t){const{value:e}=t.target;n.a.set("sync.current",e)},onAuthorize(){const{service:t}=this;["authorized"].includes(t.authState)?Object(a.w)("SyncRevoke"):["unauthorized","error"].includes(t.authState)&&Object(a.w)("SyncAuthorize")},onSync(){Object(a.w)("SyncStart")},getMessage(){const{service:t}=this;if("initializing"===t.authState)return this.i18n("msgSyncInit");if("error"===t.authState)return this.i18n("msgSyncInitError");if("unauthorized"===t.authState)return this.i18n("msgSyncInitError");if("error"===t.syncState)return this.i18n("msgSyncError");if("ready"===t.syncState)return this.i18n("msgSyncReady");if("syncing"===t.syncState){let e="";return t.progress&&t.progress.total&&(e=` (${t.progress.finished}/${t.progress.total})`),this.i18n("msgSyncing")+e}if(t.lastSync){const e=new Date(t.lastSync).toLocaleString();return this.i18n("lastSync",e)}},getLabel(){const{service:t}=this;return"authorizing"===t.authState?this.i18n("labelSyncAuthorizing"):"authorized"===t.authState?this.i18n("labelSyncRevoke"):this.i18n("labelSyncAuthorize")}}},u=(s(181),s(5)),p=Object(u.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"mt-1c"},[s("h3",{domProps:{textContent:t._s(t.i18n("labelSync"))}}),t.state?s("div",[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncService"))}}),s("select",{staticClass:"mx-1",domProps:{value:t.syncConfig.current},on:{change:t.onSyncChange}},t._l(t.syncServices,e=>s("option",{key:e.name,domProps:{value:e.name,textContent:t._s(e.displayName)}})),0),t.service.name&&"oauth"===t.state.authType?s("button",{attrs:{disabled:!t.state.canAuthorize},domProps:{textContent:t._s(t.state.label)},on:{click:t.onAuthorize}}):t._e(),t.service.name?s("button",{attrs:{disabled:!t.state.canSync},on:{click:t.onSync}},[s("icon",{attrs:{name:"refresh"}})],1):t._e()]):t._e(),t.state?s("p",{staticClass:"mt-1",domProps:{textContent:t._s(t.state.message)}}):t._e(),t.state&&"password"===t.state.authType?s("fieldset",{staticClass:"mt-1c"},[s("label",{staticClass:"sync-server-url"},[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncServerUrl"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.serverUrl,expression:"state.userConfig.serverUrl"}],attrs:{type:"url",disabled:!t.state.canAuthorize},domProps:{value:t.state.userConfig.serverUrl},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"serverUrl",e.target.value)}}})]),s("div",{staticClass:"mr-2c"},[s("label",[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncUsername"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.username,expression:"state.userConfig.username"}],attrs:{type:"text",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.username},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"username",e.target.value)}}})]),s("label",{staticClass:"inline-block"},[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncPassword"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.password,expression:"state.userConfig.password"}],attrs:{type:"password",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.password},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"password",e.target.value)}}})]),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.anonymous,expression:"state.userConfig.anonymous"}],attrs:{type:"checkbox",disabled:!t.state.canAuthorize},domProps:{checked:Array.isArray(t.state.userConfig.anonymous)?t._i(t.state.userConfig.anonymous,null)>-1:t.state.userConfig.anonymous},on:{change:e=>{var s=t.state.userConfig.anonymous,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.state.userConfig,"anonymous",s.concat([null])):o>-1&&t.$set(t.state.userConfig,"anonymous",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.state.userConfig,"anonymous",n)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelSyncAnonymous"))}})])]),s("div",[s("button",{attrs:{disabled:!t.state.canAuthorize},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:e=>(e.preventDefault(),t.onSaveUserConfig(e))}})])]):t._e(),s("div",{staticClass:"mr-2c"},[s("setting-check",{attrs:{name:"syncScriptStatus",label:t.i18n("labelSyncScriptStatus")}})],1)])}),[],!1,null,null,null);e.a=p.exports},function(t,e,s){"use strict";var a=s(4),n=s.n(a),o=s(7),i=s(16),r={data:()=>({hint:null}),components:{SettingText:s(30).a},mounted(){this.$refs.editor.$el.addEventListener("dblclick",this.toggleBoolean)},methods:{onSave(){Object(i.c)({text:this.$refs.editor.error||this.i18n("msgSavedEditorOptions")})},toggleBoolean(t){const e=t.target,{selectionStart:s,selectionEnd:a,value:n}=e,o={false:"true",true:"false"}[n.slice(s,a)];o&&!document.execCommand("insertText",!1,o)&&(e.value=n.slice(0,s)+o+n.slice(a),e.setSelectionRange(s+o.length,s+o.length),e.dispatchEvent(new Event("input")),e.onblur=()=>e.dispatchEvent(new Event("change")))},async toggleStateHint(){if(this.hint)return void(this.hint=null);const t=["mode","value","configureMouse","lineNumberFormatter","specialCharPlaceholder"],e={};Object.entries(n()({},(await Promise.resolve().then(s.t.bind(null,12,7))).defaults,{},(await Promise.resolve().then(s.bind(null,37))).cmOptions,{},o.a.get("editor"))).sort(([t],[e])=>t<e?-1:t>e).filter(([e,s])=>!t.includes(e)&&"function"!=typeof s).forEach(([t,s])=>{e[t]=s}),this.hint=JSON.stringify(e,null,"  "),setTimeout(()=>{this.$el.getBoundingClientRect().bottom>window.innerHeight&&this.$el.scrollIntoView({behavior:"smooth"})})}}},l=(s(182),s(5)),c=Object(l.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelEditor"))}}),s("p",{domProps:{innerHTML:t._s(t.i18n("descEditorOptions"))}}),s("setting-text",{ref:"editor",attrs:{name:"editor",json:!0,"has-reset":!0},on:{save:t.onSave}},[s("button",{domProps:{textContent:t._s(t.i18n("buttonShowEditorState"))},on:{click:t.toggleStateHint}})]),s("pre",{staticClass:"monospace-font dim-hint",domProps:{textContent:t._s(t.hint)}})],1)}),[],!1,null,null,null);e.a=c.exports},function(t,e,s){"use strict";var a=s(16),n={components:{SettingText:s(30).a},methods:{onSave(){Object(a.c)({text:this.i18n("msgSavedScriptTemplate")})}}},o=s(5),i=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("h3",{domProps:{textContent:this._s(this.i18n("labelScriptTemplate"))}}),e("setting-text",{attrs:{name:"scriptTemplate"},on:{save:this.onSave}})],1)}),[],!1,null,null,null);e.a=i.exports},function(t,e,s){"use strict";var a=s(0),n=s(16),o={components:{SettingText:s(30).a},methods:{onSave(){Object(n.c)({text:this.i18n("msgSavedBlacklist")}),Object(a.w)("BlacklistReset")}}},i=s(5),r=Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelBlacklist"))}}),s("p",[t._v(" "+t._s(t.i18n("descBlacklist"))+" "),s("a",{attrs:{href:"https://violentmonkey.github.io/posts/smart-rules-for-blacklist/#blacklist-patterns",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("learnBlacklist"))}})]),s("setting-text",{attrs:{name:"blacklist"},on:{save:t.onSave}})],1)}),[],!1,null,null,null);e.a=r.exports},function(t,e,s){"use strict";var a=s(16),n={components:{SettingText:s(30).a},methods:{onSave(){Object(a.c)({text:this.i18n("msgSavedCustomCSS")})}}},o=s(5),i=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("h3",{domProps:{textContent:this._s(this.i18n("labelCustomCSS"))}}),e("p",{domProps:{innerHTML:this._s(this.i18n("descCustomCSS"))}}),e("setting-text",{attrs:{name:"customCSS"},on:{save:this.onSave}})],1)}),[],!1,null,null,null);e.a=i.exports},function(t,e,s){"use strict";var a=s(20),n=s.n(a),o=s(0),i=s(1),r=s(16),l={props:["active","settings","value"],components:{Tooltip:n.a},computed:{custom(){return this.settings.custom||{}},config(){return this.settings.config||{}},placeholders(){const{value:t}=this;return{name:Object(i.h)(t,"meta.name"),homepageURL:Object(i.h)(t,"meta.homepageURL"),updateURL:Object(i.h)(t,"meta.updateURL")||Object(o.n)("hintUseDownloadURL"),downloadURL:Object(i.h)(t,"meta.downloadURL")||Object(i.h)(t,"custom.lastInstallURL")}},textInputs:()=>[["name",Object(o.n)("labelName")],["homepageURL",Object(o.n)("labelHomepageURL")],["updateURL",Object(o.n)("labelUpdateURL")],["downloadURL",Object(o.n)("labelDownloadURL")]],textAreas:()=>[["include","origInclude",Object(o.n)("labelInclude")],["match","origMatch",Object(o.n)("labelMatch")],["exclude","origExclude",Object(o.n)("labelExclude")],["excludeMatch","origExcludeMatch",Object(o.n)("labelExcludeMatch")]]},watch:{active(t){t&&(this.$refs.container.querySelector("input").focus(),Object(r.a)(this.$refs.area))}}},c=(s(173),s(5)),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"edit-settings"},[s("h4",{domProps:{textContent:t._s(t.i18n("editLabelSettings"))}}),s("div",{staticClass:"form-group condensed"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.shouldUpdate,expression:"config.shouldUpdate"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.config.shouldUpdate)?t._i(t.config.shouldUpdate,null)>-1:t.config.shouldUpdate},on:{change:e=>{var s=t.config.shouldUpdate,a=e.target,n=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(t.config,"shouldUpdate",s.concat([null])):o>-1&&t.$set(t.config,"shouldUpdate",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.config,"shouldUpdate",n)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelAllowUpdate"))}})]),s("span",{domProps:{textContent:t._s(t.i18n("labelNotifyThisUpdated"))}}),t._l([[t.i18n("genericOn"),"1"],[t.i18n("genericOff"),"0"],[t.i18n("genericUseGlobal"),""]],e=>{var a=e[0],n=e[1];return s("label",{key:n,staticClass:"ml-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.notifyUpdates,expression:"config.notifyUpdates"}],attrs:{type:"radio"},domProps:{value:n,checked:t._q(t.config.notifyUpdates,n)},on:{change:e=>t.$set(t.config,"notifyUpdates",n)}}),t._v(" "),s("span",{domProps:{textContent:t._s(a)}})])})],2),s("h4",{domProps:{textContent:t._s(t.i18n("editLabelMeta"))}}),s("div",{staticClass:"form-group"},[s("label",{domProps:{textContent:t._s(t.i18n("labelRunAt"))}}),s("tooltip",{attrs:{content:"@run-at",placement:"right"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.custom.runAt,expression:"custom.runAt"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.custom,"runAt",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelRunAtDefault"))}}),s("option",{attrs:{value:"document-start"}},[t._v("document-start")]),s("option",{attrs:{value:"document-body"}},[t._v("document-body")]),s("option",{attrs:{value:"document-end"}},[t._v("document-end")]),s("option",{attrs:{value:"document-idle"}},[t._v("document-idle")])])])],1),t._l(t.textInputs,e=>{var a=e[0],n=e[1];return s("div",{key:a,staticClass:"form-group"},[s("label",{domProps:{textContent:t._s(n)}}),s("tooltip",{staticClass:"mr-tooltip",attrs:{content:"@"+a,placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom[a],expression:"custom[name]"}],attrs:{type:"text",placeholder:t.placeholders[a]},domProps:{value:t.custom[a]},on:{input:e=>{e.target.composing||t.$set(t.custom,a,e.target.value)}}})])],1)}),t._l(t.textAreas,e=>{var a=e[0],n=e[1],o=e[2];return s("div",{key:a,staticClass:"form-group"},[s("div",[s("span",{domProps:{textContent:t._s(o)}}),s("label",{staticClass:"ml-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom[n],expression:"custom[orig]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom[n])?t._i(t.custom[n],null)>-1:t.custom[n]},on:{change:e=>{var s=t.custom[n],a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.custom,n,s.concat([null])):i>-1&&t.$set(t.custom,n,s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.custom,n,o)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom[a],expression:"custom[name]"}],ref:"area",refInFor:!0,attrs:{spellcheck:"false"},domProps:{value:t.custom[a]},on:{input:e=>{e.target.composing||t.$set(t.custom,a,e.target.value)}}})])})],2)}),[],!1,null,null,null);e.a=d.exports},function(t,e,s){"use strict";var a=s(20),n=s.n(a),o=s(0),i=s(1),r=s(21),l=s(2),c=s(16);let d,u;var p={props:["active","script"],components:{Icon:r.a,Tooltip:n.a},data:()=>({current:null,keys:null,page:null,values:null}),computed:{totalPages(){var t;return Math.ceil((null==(t=this.keys)?void 0:t.length)/25)||0},pageKeys(){var t;const e=25*(this.page-1);return null==(t=this.keys)?void 0:t.slice(e,e+25)}},watch:{active(t){var e;t&&(l.a.value.getOne(this.script.props.id).then(this.setData),d=l.a.value.prefix+(null==(e=this.script)?void 0:e.props.id),(u||this.$refs.container.querySelector("button")).focus()),browser.storage.onChanged[`${t?"add":"remove"}Listener`](this.onStorageChanged)},current(t,e){if(t)u=document.activeElement,this.$nextTick(()=>{const e=this.$refs[t.isNew?"key":"value"];e.setSelectionRange(0,0),e.focus()});else if(e){var s;null==(s=u)||s.focus()}}},methods:{getValue(t,e){let s=this.values[t];const a=s[0];return s=s.slice(1),"s"===a?s=JSON.stringify(s):e||(s=(t=>{try{return JSON.stringify(JSON.parse(t),null,"  ")}catch(e){return t}})(s)),e&&s.length>1024&&(s=s.slice(0,1024)),s},setData(t={}){this.values=t,this.keys=Object.keys(t).sort(),this.page=Math.min(this.page,this.totalPages)||1},updateValue({key:t,jsonValue:e,isNew:s}){const a=Object(o.e)(e)||"",{id:n}=this.script.props;return Object(o.w)("UpdateValue",{id:n,key:t,value:a}).then(()=>{if(a)this.$set(this.values,t,a),s&&this.keys.push(t);else{const e=this.keys.indexOf(t);e>=0&&this.keys.splice(e,1),this.$delete(this.values,t)}})},onNew(){this.current={isNew:!0,key:"",value:""}},onRemove(t){this.updateValue({key:t}).then(()=>{this.current&&this.current.key===t&&(this.current=null)})},onEdit(t){this.current={isNew:!1,key:t,value:this.getValue(t)}},onEditAll(){this.current={isAll:!0,value:`{\n  ${this.keys.map(t=>`${JSON.stringify(t)}: ${this.getValue(t)}`).join(",\n").replace(/\n/g,"\n  ")}\n}`}},async onSave(){const{current:t}=this;if(t.jsonPaused&&(t.jsonPaused=!1,this.onChange()),t.error){const e=+t.error.match(/position\s+(\d+)|$/)[1]||0;return this.$refs.value.setSelectionRange(e,e+1),this.$refs.value.focus(),void Object(c.c)({text:t.error})}var e;this.current=null,t.isAll?await Object(o.w)("SetValueStores",[{where:{id:this.script.props.id},store:(e=t.jsonValue,i.f).call(e,([,t])=>Object(o.e)(t)||"")}]):await this.updateValue(t)},onCancel(){this.current=null},onChange(){const{current:t}=this;if(t.error=null,t.jsonPaused)return;const e=performance.now(),s=t.value.trim();try{t.jsonValue=s?JSON.parse(s):void 0}catch(e){t.error=e.message||e,t.jsonValue=void 0}t.jsonPaused=performance.now()-e>10},onStorageChanged(t){var e;const s=null==(e=t[d])?void 0:e.newValue;if(s){this.setData(s);const{current:t}=this;if(t){const e=this.getValue(t.key);e===t.value?t.isNew=!1:(Object.keys(t).filter(t=>"key"!==t&&"value"!==t).forEach(e=>delete t[e]),t.value=e)}}}}},h=(s(174),s(5)),m=Object(h.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"edit-values"},[s("div",{staticClass:"mb-1"},[s("button",{on:{click:t.onNew}},[t._v("+")]),s("tooltip",{attrs:{content:t.i18n("editValueAllHint"),align:"left"}},[s("button",{domProps:{textContent:t._s(t.i18n("editValueAll"))},on:{click:t.onEditAll}})]),t.totalPages>1?s("div",{staticClass:"inline-block ml-2"},[s("button",{attrs:{disabled:1===t.page},on:{click:e=>{t.page-=1}}},[t._v("\u2190")]),s("span",{staticClass:"ml-1",domProps:{textContent:t._s(t.page)}}),t._v(" / "),s("span",{staticClass:"mr-1",domProps:{textContent:t._s(t.totalPages)}}),s("button",{attrs:{disabled:t.page>=t.totalPages},on:{click:e=>{t.page+=1}}},[t._v("\u2192")])]):t._e()],1),t.keys?s("div",{staticClass:"edit-values-table"},[t.keys.length?t._e():s("div",{staticClass:"edit-values-empty"},[s("div",{domProps:{textContent:t._s(t.i18n("noValues"))}})]),t._l(t.pageKeys,e=>s("a",{key:e,staticClass:"edit-values-row flex",attrs:{href:"#"},on:{keydown:s=>!s.type.indexOf("key")&&t._k(s.keyCode,"delete",[8,46],s.key,["Backspace","Delete","Del"])?null:s.ctrlKey?s.shiftKey||s.altKey||s.metaKey?null:t.onRemove(e):null,click:s=>(s.preventDefault(),t.onEdit(e))}},[s("div",{staticClass:"ellipsis"},[s("span",{domProps:{textContent:t._s(e)}}),s("div",{staticClass:"edit-values-btn",on:{click:s=>(s.stopPropagation(),s.preventDefault(),t.onRemove(e))}},[s("tooltip",{attrs:{content:"Ctrl-Del: "+t.i18n("buttonRemove")}},[s("icon",{attrs:{name:"trash"}})],1)],1)]),s("div",{staticClass:"ellipsis flex-auto",domProps:{textContent:t._s(t.getValue(e,!0))}})]))],2):t._e(),t.current?s("div",{staticClass:"edit-values-panel flex flex-col mb-1c"},[s("div",{staticClass:"control"},[s("h4",{domProps:{textContent:t._s(t.current.isAll?t.i18n("labelEditValueAll"):t.i18n("labelEditValue"))}}),s("div",[s("button",{class:{"has-error":t.current.error},attrs:{title:t.current.error,disabled:t.current.error},domProps:{textContent:t._s(t.i18n("editValueSave"))},on:{click:t.onSave}}),s("button",{domProps:{textContent:t._s(t.i18n("editValueCancel"))},on:{click:t.onCancel}})])]),s("label",{directives:[{name:"show",rawName:"v-show",value:!t.current.isAll,expression:"!current.isAll"}]},[s("span",{domProps:{textContent:t._s(t.i18n("valueLabelKey"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.current.key,expression:"current.key"}],ref:"key",attrs:{type:"text",readOnly:!t.current.isNew,spellcheck:"false"},domProps:{value:t.current.key},on:{keydown:e=>!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.onCancel(e)),input:e=>{e.target.composing||t.$set(t.current,"key",e.target.value)}}})]),s("label",[s("span",{domProps:{textContent:t._s(t.current.isAll?t.i18n("valueLabelValueAll"):t.i18n("valueLabelValue"))}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.value,expression:"current.value"}],ref:"value",attrs:{spellcheck:"false"},domProps:{value:t.current.value},on:{input:[e=>{e.target.composing||t.$set(t.current,"value",e.target.value)},t.onChange],keydown:e=>!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.onCancel(e))}})])]):t._e()])}),[],!1,null,null,null);e.a=m.exports},function(t,e,s){"use strict";var a=s(37),n=s(2),o={props:["script","isRes"],components:{VmCode:a.default},data(){const{require:t,resources:e}=this.script.meta;return{all:[...t.map(t=>["@require",t]),...Object.entries(e).map(([t,e])=>[`@resource ${t}`,e])],code:null,img:null,index:null,mode:null}},watch:{async index(t){var e;const[s,a]=this.all[t],o="@require"===s,i=(null==(e=this.script.custom.pathMap)?void 0:e[a])||a;let r,l,c,d=await n.a[o?"require":"cache"].getOne(i);if(o||(d=n.a.cache.makeDataUri(i,d)),o||!d)l=d;else if(d.startsWith("data:image"))r=d;else{if([c,l]=d.split(","),null==l){var u;const t=(null==(u=a.match(/\.(\w+)([#&?]|$)/))?void 0:u[1])||"";c=/^(png|jpe?g|bmp|svgz?|gz|zip)$/i.test(t)?"":`text/${t.toLowerCase()}`,l=d}if(l=atob(l),/[\x80-\xFF]/.test(l)){const t=l.length,e=new Uint8Array(t);for(let s=0;s<t;s+=1)e[s]=l.charCodeAt(s);l=(new TextDecoder).decode(e)}}this.img=r,this.mode="text/css"===c||/\.css([#&?]|$)/i.test(a)?"css":null,this.code=l}},async mounted(){this.index=0}},i=(s(175),s(5)),r=Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-externals flex flex-col"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.index,expression:"index"}],staticClass:"monospace-font",attrs:{size:Math.max(2,t.all.length),"data-size":t.all.length},on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.index=e.target.multiple?s:s[0]}}},t._l(t.all,(e,a)=>{var n=e[0],o=e[1];return s("option",{key:a,staticClass:"ellipsis",attrs:{"data-type":n},domProps:{value:a,textContent:t._s(o)}})}),0),s("div",{staticClass:"contents pos-rel flex-auto"},[t.img?s("img",{attrs:{src:t.img}}):s("vm-code",{ref:"code",staticClass:"abs-full",attrs:{readonly:!0,mode:t.mode},model:{value:t.code,callback:e=>{t.code=e},expression:"code"}})],1)])}),[],!1,null,null,null);e.a=r.exports},function(t,e,s){"use strict";var a=(s(176),s(5)),n=Object(a.a)({props:["hotkeys"]},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-help mb-2c"},[s("div",[s("h3",{domProps:{innerHTML:t._s(t.i18n("editHelpDocumention"))}}),s("a",{attrs:{href:"https://violentmonkey.github.io/api/",rel:"noopener noreferrer",target:"_blank"}},[t._v("violentmonkey.github.io/api/")])]),s("div",{staticClass:"keyboard"},[s("h3",{domProps:{textContent:t._s(t.i18n("editHelpKeyboard"))}}),t._l(t.hotkeys,e=>{var a=e[0],n=e[1];return s("dl",{key:a},[s("dt",{staticClass:"monospace-font",domProps:{textContent:t._s(a)}}),s("dd",{domProps:{textContent:t._s(n)}})])})],2)])}),[],!1,null,null,null);e.a=n.exports},function(t,e,s){"use strict";var a=s(42).a,n=(s(177),s(5)),o=Object(n.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit frame flex flex-col fixed-full"},[s("div",{staticClass:"edit-header flex mr-1 mr-1c"},[s("nav",t._l(t.navItems,(e,a)=>s("div",{key:a,staticClass:"edit-nav-item",class:{active:t.nav===a},domProps:{textContent:t._s(e)},on:{click:e=>{t.nav=a}}})),0),s("div",{staticClass:"edit-name text-center ellipsis flex-1",domProps:{textContent:t._s(t.scriptName)}}),s("div",{staticClass:"edit-hint text-right ellipsis"},[s("a",{attrs:{href:"https://violentmonkey.github.io/posts/how-to-edit-scripts-with-your-favorite-editor/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("editHowToHint"))}})]),s("div",{staticClass:"edit-buttons"},[s("button",{attrs:{disabled:!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.save}}),s("button",{attrs:{disabled:!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSaveClose"))},on:{click:t.saveClose}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonClose"))},on:{click:t.close}})])]),s("div",{staticClass:"frame-block flex-auto pos-rel"},[s("vm-code",{directives:[{name:"show",rawName:"v-show",value:"code"===t.nav,expression:"nav === 'code'"}],ref:"code",staticClass:"abs-full",attrs:{active:"code"===t.nav,commands:t.commands},on:{"code-dirty":e=>{t.codeDirty=e}},model:{value:t.code,callback:e=>{t.code=e},expression:"code"}}),s("vm-settings",{directives:[{name:"show",rawName:"v-show",value:"settings"===t.nav,expression:"nav === 'settings'"}],staticClass:"abs-full edit-body",attrs:{active:"settings"===t.nav,settings:t.settings,value:t.script}}),s("vm-values",{directives:[{name:"show",rawName:"v-show",value:"values"===t.nav,expression:"nav === 'values'"}],staticClass:"abs-full edit-body",attrs:{active:"values"===t.nav,script:t.script}}),"externals"===t.nav?s("vm-externals",{staticClass:"abs-full",attrs:{script:t.script}}):t._e(),s("vm-help",{directives:[{name:"show",rawName:"v-show",value:"help"===t.nav,expression:"nav === 'help'"}],staticClass:"abs-full edit-body",attrs:{hotkeys:t.hotkeys}})],1)])}),[],!1,null,null,null);e.a=o.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(t,e,s)=>{},,,,,(t,e,s)=>{"use strict";var a=s(41);s.n(a).a},,,,,,,,,,,,,,,,,,,,,,(t,e,s)=>{"use strict";var a=s(45);s.n(a).a},(t,e,s)=>{"use strict";var a=s(46);s.n(a).a},(t,e,s)=>{"use strict";var a=s(47);s.n(a).a},(t,e,s)=>{"use strict";var a=s(48);s.n(a).a},(t,e,s)=>{"use strict";var a=s(49);s.n(a).a},(t,e,s)=>{"use strict";var a=s(50);s.n(a).a},(t,e,s)=>{"use strict";var a=s(52);s.n(a).a},(t,e,s)=>{"use strict";var a=s(53);s.n(a).a},(t,e,s)=>{"use strict";var a=s(54);s.n(a).a},(t,e,s)=>{"use strict";var a=s(55);s.n(a).a},(t,e,s)=>{"use strict";var a=s(56);s.n(a).a},(t,e,s)=>{"use strict";var a=s(57);s.n(a).a},(t,e,s)=>{"use strict";var a=s(58);s.n(a).a}]);